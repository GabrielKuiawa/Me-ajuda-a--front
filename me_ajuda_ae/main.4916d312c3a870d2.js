"use strict";var y8=Object.defineProperty,v8=Object.defineProperties,b8=Object.getOwnPropertyDescriptors,WU=Object.getOwnPropertySymbols,w8=Object.prototype.hasOwnProperty,E8=Object.prototype.propertyIsEnumerable,ZU=(st,be,L)=>be in st?y8(st,be,{enumerable:!0,configurable:!0,writable:!0,value:L}):st[be]=L,KU=(st,be)=>{for(var L in be||(be={}))w8.call(be,L)&&ZU(st,L,be[L]);if(WU)for(var L of WU(be))E8.call(be,L)&&ZU(st,L,be[L]);return st},YU=(st,be)=>v8(st,b8(be));(self.webpackChunkme_ajuda_ae=self.webpackChunkme_ajuda_ae||[]).push([[179],{2011:(st,be,L)=>{L.d(be,{hO:()=>Ze,xv:()=>me,Dh:()=>de,GT:()=>Ee,cc:()=>Se,on:()=>q,pX:()=>he});var h=L(5e3),G=L(127),F=L(5813);st=L.hmd(st);const ie=["ngOnDestroy"],he=(ve,Oe,ze,Ue={})=>new Proxy(ve,{get:(ot,xe)=>ze.runOutsideAngular(()=>{var ct;if(ve[xe])return(null===(ct=null==Ue?void 0:Ue.spy)||void 0===ct?void 0:ct.get)&&Ue.spy.get(xe,ve[xe]),ve[xe];if(ie.indexOf(xe)>-1)return()=>{};const Qe=Oe.toPromise().then(Ce=>{const K=Ce&&Ce[xe];return"function"==typeof K?K.bind(Ce):K&&K.then?K.then(re=>ze.run(()=>re)):ze.run(()=>K)});return new Proxy(()=>{},{get:(Ce,K)=>Qe[K],apply:(Ce,K,re)=>Qe.then(pe=>{var ye;const Pe=pe&&pe(...re);return(null===(ye=null==Ue?void 0:Ue.spy)||void 0===ye?void 0:ye.apply)&&Ue.spy.apply(xe,re,Pe),Pe})})})}),Ee=(ve,Oe)=>{Oe.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Ue=>{Object.defineProperty(ve.prototype,Ue,Object.getOwnPropertyDescriptor(ze.prototype||ze,Ue))})})};class se{constructor(Oe){return Oe}}const de=new h.OlP("angularfire2.app.options"),me=new h.OlP("angularfire2.app.name");function q(ve,Oe,ze){const ot="object"==typeof ze&&ze||{};ot.name=ot.name||"string"==typeof ze&&ze||"[DEFAULT]";const ct=G.Z.apps.filter(Qe=>Qe&&Qe.name===ot.name)[0]||Oe.runOutsideAngular(()=>G.Z.initializeApp(ve,ot));try{JSON.stringify(ve)!==JSON.stringify(ct.options)&&Y("error",`${ct.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new se(ct)}const Y=(ve,...Oe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ve](...Oe)},oe={provide:se,useFactory:q,deps:[de,h.R0b,[new h.FiY,me]]};let Ze=(()=>{class ve{constructor(ze){G.Z.registerVersion("angularfire",F.q4.full,"core"),G.Z.registerVersion("angularfire",F.q4.full,"app-compat"),G.Z.registerVersion("angular",h.q4F.full,ze.toString())}static initializeApp(ze,Ue){return{ngModule:ve,providers:[{provide:de,useValue:ze},{provide:me,useValue:Ue}]}}}return ve.\u0275fac=function(ze){return new(ze||ve)(h.LFG(h.Lbi))},ve.\u0275mod=h.oAB({type:ve}),ve.\u0275inj=h.cJS({providers:[oe]}),ve})();function Se(ve,Oe,ze,Ue,ot){const[,xe,ct]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ve)||[];if(xe)return function Ve(ve,Oe){try{return ve.toString()===Oe.toString()}catch(ze){return ve===Oe}}(ot,ct)||(_e("error",`${Oe} was already initialized on the ${ze} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ot,was:ct})),xe;{const Qe=Ue();return globalThis.\u0275AngularfireInstanceCache.push([ve,Qe,ot]),Qe}}const He=!!st.hot,_e=(ve,...Oe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ve](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,be,L)=>{L.d(be,{q4:()=>Pc,iC:()=>fu,fc:()=>ip,HU:()=>Ch,vb:()=>Xr,JM:()=>bl});var h=L(5e3),G=L(5867),F=L(5861),ie=L(9681),he=L(2090),Ee=L(4859),se=L(1877),de=L(8766);const me="@firebase/installations",q="0.5.16",oe=`w:${q}`,Ze="FIS_v2",Oe=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(T){return T instanceof he.ZR&&T.code.includes("request-failed")}function Ue({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function ot(T){return{token:T.token,requestStatus:2,expiresIn:pe(T.expiresIn),creationTime:Date.now()}}function xe(T,S){return ct.apply(this,arguments)}function ct(){return(ct=(0,F.Z)(function*(T,S){const H=(yield S.json()).error;return Oe.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function Qe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ce(T,{refreshToken:S}){const k=Qe(T);return k.append("Authorization",function ye(T){return`${Ze} ${T}`}(S)),k}function K(T){return re.apply(this,arguments)}function re(){return(re=(0,F.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function pe(T){return Number(T.replace("s","000"))}function Pe(T,S){return ce.apply(this,arguments)}function ce(){return(ce=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:k}){const H=Ue(T),ee=Qe(T),le=S.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&ee.append("x-firebase-client",Rt)}const qe={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:Ze,appId:T.appId,sdkVersion:oe})},bt=yield K(()=>fetch(H,qe));if(bt.ok){const Rt=yield bt.json();return{fid:Rt.fid||k,registrationStatus:2,refreshToken:Rt.refreshToken,authToken:ot(Rt.authToken)}}throw yield xe("Create Installation",bt)})).apply(this,arguments)}function St(T){return new Promise(S=>{setTimeout(S,T)})}const Ar=/^[cdef][\w-]{21}$/;function Ot(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function ir(T){return function qt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Ar.test(k)?k:""}catch(T){return""}}function tn(T){return`${T.appName}!${T.appId}`}const gr=new Map;function _n(T,S){const k=tn(T);zn(k,S),function Wr(T,S){const k=function wn(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=T=>{zn(T.data.key,T.data.fid)}),Ln}();k&&k.postMessage({key:T,fid:S}),function Ds(){0===gr.size&&Ln&&(Ln.close(),Ln=null)}()}(k,S)}function zn(T,S){const k=gr.get(T);if(k)for(const H of k)H(S)}let Ln=null;const Fe="firebase-installations-store";let _r=null;function _t(){return _r||(_r=(0,de.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Fe)}})),_r}function Nr(T,S){return sn.apply(this,arguments)}function sn(){return(sn=(0,F.Z)(function*(T,S){const k=tn(T),ee=(yield _t()).transaction(Fe,"readwrite"),le=ee.objectStore(Fe),De=yield le.get(k);return yield le.put(S,k),yield ee.done,(!De||De.fid!==S.fid)&&_n(T,S.fid),S})).apply(this,arguments)}function yn(T){return _i.apply(this,arguments)}function _i(){return(_i=(0,F.Z)(function*(T){const S=tn(T),H=(yield _t()).transaction(Fe,"readwrite");yield H.objectStore(Fe).delete(S),yield H.done})).apply(this,arguments)}function ni(T,S){return xr.apply(this,arguments)}function xr(){return(xr=(0,F.Z)(function*(T,S){const k=tn(T),ee=(yield _t()).transaction(Fe,"readwrite"),le=ee.objectStore(Fe),De=yield le.get(k),qe=S(De);return void 0===qe?yield le.delete(k):yield le.put(qe,k),yield ee.done,qe&&(!De||De.fid!==qe.fid)&&_n(T,qe.fid),qe})).apply(this,arguments)}function An(T){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,F.Z)(function*(T){let S;const k=yield ni(T.appConfig,H=>{const ee=Mo(H),le=Qt(T,ee);return S=le.registrationPromise,le.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Mo(T){return En(T||{fid:Ot(),registrationStatus:0})}function Qt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Oe.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function yt(T,S){return mt.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ds(T)}:{installationEntry:S}}function mt(){return(mt=(0,F.Z)(function*(T,S){try{const k=yield Pe(T,S);return Nr(T.appConfig,k)}catch(k){throw ze(k)&&409===k.customData.serverCode?yield yn(T.appConfig):yield Nr(T.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ds(T){return ri.apply(this,arguments)}function ri(){return(ri=(0,F.Z)(function*(T){let S=yield It(T.appConfig);for(;1===S.registrationStatus;)yield St(100),S=yield It(T.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:H}=yield An(T);return H||k}return S})).apply(this,arguments)}function It(T){return ni(T,S=>{if(!S)throw Oe.create("installation-not-found");return En(S)})}function En(T){return function yr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Cn(T,S){return vt.apply(this,arguments)}function vt(){return(vt=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},k){const H=vr(T,k),ee=Ce(T,k),le=S.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&ee.append("x-firebase-client",Rt)}const qe={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:oe,appId:T.appId}})},bt=yield K(()=>fetch(H,qe));if(bt.ok)return ot(yield bt.json());throw yield xe("Generate Auth Token",bt)})).apply(this,arguments)}function vr(T,{fid:S}){return`${Ue(T)}/${S}/authTokens:generate`}function Kt(T){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(T,S=!1){let k;const H=yield ni(T.appConfig,le=>{if(!nn(le))throw Oe.create("not-registered");const De=le.authToken;if(!S&&W(De))return le;if(1===De.requestStatus)return k=et(T,S),le;{if(!navigator.onLine)throw Oe.create("app-offline");const qe=J(le);return k=Pt(T,qe),qe}});return k?yield k:H.authToken})).apply(this,arguments)}function et(T,S){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)(function*(T,S){let k=yield tt(T.appConfig);for(;1===k.authToken.requestStatus;)yield St(100),k=yield tt(T.appConfig);const H=k.authToken;return 0===H.requestStatus?Kt(T,S):H})).apply(this,arguments)}function tt(T){return ni(T,S=>{if(!nn(S))throw Oe.create("not-registered");return function $(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Pt(T,S){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,F.Z)(function*(T,S){try{const k=yield Cn(T,S),H=Object.assign(Object.assign({},S),{authToken:k});return yield Nr(T.appConfig,H),k}catch(k){if(!ze(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Nr(T.appConfig,H)}else yield yn(T.appConfig);throw k}})).apply(this,arguments)}function nn(T){return void 0!==T&&2===T.registrationStatus}function W(T){return 2===T.requestStatus&&!function z(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function J(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function j(){return(j=(0,F.Z)(function*(T){const S=T,{installationEntry:k,registrationPromise:H}=yield An(S);return H?H.catch(console.error):Kt(S).catch(console.error),k.fid})).apply(this,arguments)}function ke(){return(ke=(0,F.Z)(function*(T,S=!1){const k=T;return yield at(k),(yield Kt(k,S)).token})).apply(this,arguments)}function at(T){return lt.apply(this,arguments)}function lt(){return(lt=(0,F.Z)(function*(T){const{registrationPromise:S}=yield An(T);S&&(yield S)})).apply(this,arguments)}function Qa(T){return Oe.create("missing-app-config-values",{valueName:T})}const Di="installations",Wt=T=>{const S=T.getProvider("app").getImmediate(),k=function Mr(T){if(!T||!T.options)throw Qa("App Configuration");if(!T.name)throw Qa("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!T.options[k])throw Qa(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ie._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},mn=T=>{const S=T.getProvider("app").getImmediate(),k=(0,ie._getProvider)(S,Di).getImmediate();return{getId:()=>function N(T){return j.apply(this,arguments)}(k),getToken:ee=>function ae(T){return ke.apply(this,arguments)}(k,ee)}};(function or(){(0,ie._registerComponent)(new Ee.wA(Di,Wt,"PUBLIC")),(0,ie._registerComponent)(new Ee.wA("installations-internal",mn,"PRIVATE"))})(),(0,ie.registerVersion)(me,q),(0,ie.registerVersion)(me,q,"esm2017");const ii="@firebase/remote-config",ar=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qf{constructor(S,k,H,ee){this.client=S,this.storage=k,this.storageCache=H,this.logger=ee}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-k,ee=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var k=this;return(0,F.Z)(function*(){const[H,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(S.cacheMaxAgeMillis,H))return ee;S.eTag=ee&&ee.eTag;const le=yield k.client.fetch(S),De=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&De.push(k.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(De),le})()}}function lm(T=navigator){return T.languages&&T.languages[0]||T.language}class Ni{constructor(S,k,H,ee,le,De){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=H,this.projectId=ee,this.apiKey=le,this.appId=De}fetch(S){var k=this;return(0,F.Z)(function*(){var H,ee,le;const[De,qe]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Tt={sdk_version:k.sdkVersion,app_instance_id:De,app_instance_id_token:qe,app_id:k.appId,language_code:lm()},dr={method:"POST",headers:Ut,body:JSON.stringify(Tt)},Kn=fetch(Rt,dr),Ta=new Promise((Bo,yo)=>{S.signal.addEventListener(()=>{const Uc=new Error("The operation was aborted.");Uc.name="AbortError",yo(Uc)})});let Da;try{yield Promise.race([Kn,Ta]),Da=yield Kn}catch(Bo){let yo="fetch-client-network";throw"AbortError"===(null===(H=Bo)||void 0===H?void 0:H.name)&&(yo="fetch-timeout"),ar.create(yo,{originalErrorMessage:null===(ee=Bo)||void 0===ee?void 0:ee.message})}let go=Da.status;const mo=Da.headers.get("ETag")||void 0;let Ls,_o;if(200===Da.status){let Bo;try{Bo=yield Da.json()}catch(yo){throw ar.create("fetch-client-parse",{originalErrorMessage:null===(le=yo)||void 0===le?void 0:le.message})}Ls=Bo.entries,_o=Bo.state}if("INSTANCE_STATE_UNSPECIFIED"===_o?go=500:"NO_CHANGE"===_o?go=304:("NO_TEMPLATE"===_o||"EMPTY_CONFIG"===_o)&&(Ls={}),304!==go&&200!==go)throw ar.create("fetch-status",{httpStatus:go});return{status:go,eTag:mo,config:Ls}})()}}class Xf{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,F.Z)(function*(){const H=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:H}){var ee=this;return(0,F.Z)(function*(){yield function um(T,S){return new Promise((k,H)=>{const ee=Math.max(S-Date.now(),0),le=setTimeout(k,ee);T.addEventListener(()=>{clearTimeout(le),H(ar.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const le=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),le}catch(le){if(!function Ja(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const De={throttleEndTimeMillis:Date.now()+(0,he.$s)(H),backoffCount:H+1};return yield ee.storage.setThrottleMetadata(De),ee.attemptFetch(S,De)}})()}}class ih{constructor(S,k,H,ee,le){this.app=S,this._client=k,this._storageCache=H,this._storage=ee,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function uc(T,S){var k;const H=T.target.error||void 0;return ar.create(S,{originalErrorMessage:H&&(null===(k=H)||void 0===k?void 0:k.message)})}const ao="app_namespace_store";class oh{constructor(S,k,H,ee=function cc(){return new Promise((T,S)=>{var k;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=ee=>{S(uc(ee,"storage-open"))},H.onsuccess=ee=>{T(ee.target.result)},H.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(ao,{keyPath:"compositeKey"})}}catch(H){S(ar.create("storage-open",{originalErrorMessage:null===(k=H)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=H,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,F.Z)(function*(){const H=yield k.openDbPromise;return new Promise((ee,le)=>{var De;const bt=H.transaction([ao],"readonly").objectStore(ao),Rt=k.createCompositeKey(S);try{const Ut=bt.get(Rt);Ut.onerror=Tt=>{le(uc(Tt,"storage-get"))},Ut.onsuccess=Tt=>{const dr=Tt.target.result;ee(dr?dr.value:void 0)}}catch(Ut){le(ar.create("storage-get",{originalErrorMessage:null===(De=Ut)||void 0===De?void 0:De.message}))}})})()}set(S,k){var H=this;return(0,F.Z)(function*(){const ee=yield H.openDbPromise;return new Promise((le,De)=>{var qe;const Rt=ee.transaction([ao],"readwrite").objectStore(ao),Ut=H.createCompositeKey(S);try{const Tt=Rt.put({compositeKey:Ut,value:k});Tt.onerror=dr=>{De(uc(dr,"storage-set"))},Tt.onsuccess=()=>{le()}}catch(Tt){De(ar.create("storage-set",{originalErrorMessage:null===(qe=Tt)||void 0===qe?void 0:qe.message}))}})})()}delete(S){var k=this;return(0,F.Z)(function*(){const H=yield k.openDbPromise;return new Promise((ee,le)=>{var De;const bt=H.transaction([ao],"readwrite").objectStore(ao),Rt=k.createCompositeKey(S);try{const Ut=bt.delete(Rt);Ut.onerror=Tt=>{le(uc(Tt,"storage-delete"))},Ut.onsuccess=()=>{ee()}}catch(Ut){le(ar.create("storage-delete",{originalErrorMessage:null===(De=Ut)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class dm{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const k=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),le=yield k;le&&(S.lastFetchStatus=le);const De=yield H;De&&(S.lastSuccessfulFetchTimestampMillis=De);const qe=yield ee;qe&&(S.activeConfig=qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function hm(){return el.apply(this,arguments)}function el(){return(el=(0,F.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}!function ah(){(0,ie._registerComponent)(new Ee.wA("remote-config",function T(S,{instanceIdentifier:k}){const H=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ar.create("registration-window");if(!(0,he.hl)())throw ar.create("indexed-db-unavailable");const{projectId:le,apiKey:De,appId:qe}=H.options;if(!le)throw ar.create("registration-project-id");if(!De)throw ar.create("registration-api-key");if(!qe)throw ar.create("registration-app-id");const bt=new oh(qe,H.name,k=k||"firebase"),Rt=new dm(bt),Ut=new se.Yd(ii);Ut.logLevel=se.in.ERROR;const Tt=new Ni(ee,ie.SDK_VERSION,k,le,De,qe),dr=new Xf(Tt,bt),Kn=new Qf(dr,bt,Rt,Ut),Ta=new ih(H,Kn,Rt,bt,Ut);return function xn(T){const S=(0,he.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ta),Ta},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(ii,"0.3.15"),(0,ie.registerVersion)(ii,"0.3.15","esm2017")}();const fm="/firebase-messaging-sw.js",As="/firebase-cloud-messaging-push-scope",lh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tl="google.c.a.c_id",dc="google.c.a.c_l",ql="google.c.a.ts",Fi="google.c.a.e";var aa=(()=>{return(T=aa||(aa={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",aa;var T})();function lr(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ep(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(k),ee=new Uint8Array(H.length);for(let le=0;le<H.length;++le)ee[le]=H.charCodeAt(le);return ee}const Qr="fcm_token_details_db",Zl="fcm_token_object_Store";function uh(T){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Qr))return null;let S=null;return(yield(0,de.X3)(Qr,5,{upgrade:(H=(0,F.Z)(function*(ee,le,De,qe){var bt;if(le<2||!ee.objectStoreNames.contains(Zl))return;const Rt=qe.objectStore(Zl),Ut=yield Rt.index("fcmSenderId").get(T);if(yield Rt.clear(),Ut)if(2===le){const Tt=Ut;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;S={token:Tt.fcmToken,createTime:null!==(bt=Tt.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:lr(Tt.vapidKey)}}}else if(3===le){const Tt=Ut;S={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:lr(Tt.auth),p256dh:lr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:lr(Tt.vapidKey)}}}else if(4===le){const Tt=Ut;S={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:lr(Tt.auth),p256dh:lr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:lr(Tt.vapidKey)}}}}),function(le,De,qe,bt){return H.apply(this,arguments)})})).close(),yield(0,de.Lj)(Qr),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),fc(S)?S:null;var H}),Kl.apply(this,arguments)}function fc(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const yi="firebase-messaging-store";let ch=null;function Yn(){return ch||(ch=(0,de.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(yi)}})),ch}function la(T){return pc.apply(this,arguments)}function pc(){return(pc=(0,F.Z)(function*(T){const S=Rs(T),H=yield(yield Yn()).transaction(yi).objectStore(yi).get(S);if(H)return H;{const ee=yield uh(T.appConfig.senderId);if(ee)return yield Li(T,ee),ee}})).apply(this,arguments)}function Li(T,S){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*(T,S){const k=Rs(T),ee=(yield Yn()).transaction(yi,"readwrite");return yield ee.objectStore(yi).put(S,k),yield ee.done,S})).apply(this,arguments)}function xs(T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,F.Z)(function*(T){const S=Rs(T),H=(yield Yn()).transaction(yi,"readwrite");yield H.objectStore(yi).delete(S),yield H.done})).apply(this,arguments)}function Rs({appConfig:T}){return T.appId}const Or=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nl(T,S){return lo.apply(this,arguments)}function lo(){return(lo=(0,F.Z)(function*(T,S){var k;const H=yield si(T),ee=Yl(S),le={method:"POST",headers:H,body:JSON.stringify(ee)};let De;try{De=yield(yield fetch(uo(T.appConfig),le)).json()}catch(qe){throw Or.create("token-subscribe-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(De.error)throw Or.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw Or.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Xi(T,S){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(T,S){var k;const H=yield si(T),ee=Yl(S.subscriptionOptions),le={method:"PATCH",headers:H,body:JSON.stringify(ee)};let De;try{De=yield(yield fetch(`${uo(T.appConfig)}/${S.token}`,le)).json()}catch(qe){throw Or.create("token-update-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(De.error)throw Or.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw Or.create("token-update-no-token");return De.token})).apply(this,arguments)}function rl(T,S){return At.apply(this,arguments)}function At(){return(At=(0,F.Z)(function*(T,S){var k;const ee={method:"DELETE",headers:yield si(T)};try{const De=yield(yield fetch(`${uo(T.appConfig)}/${S}`,ee)).json();if(De.error)throw Or.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(le){throw Or.create("token-unsubscribe-failed",{errorInfo:null===(k=le)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function uo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function si(T){return ua.apply(this,arguments)}function ua(){return(ua=(0,F.Z)(function*({appConfig:T,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Yl({p256dh:T,auth:S,endpoint:k,vapidKey:H}){const ee={web:{endpoint:k,auth:S,p256dh:T}};return H!==lh&&(ee.web.applicationPubKey=H),ee}const il=6048e5;function sl(T){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,F.Z)(function*(T){const S=yield oi(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:lr(S.getKey("auth")),p256dh:lr(S.getKey("p256dh"))},H=yield la(T.firebaseDependencies);if(H){if(ol(H.subscriptionOptions,k))return Date.now()>=H.createTime+il?Xl(T,{token:H.token,createTime:Date.now(),subscriptionOptions:k}):H.token;try{yield rl(T.firebaseDependencies,H.token)}catch(ee){console.warn(ee)}return ca(T.firebaseDependencies,k)}return ca(T.firebaseDependencies,k)})).apply(this,arguments)}function Me(T){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(T){const S=yield la(T.firebaseDependencies);S&&(yield rl(T.firebaseDependencies,S.token),yield xs(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Xl(T,S){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,F.Z)(function*(T,S){try{const k=yield Xi(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield Li(T.firebaseDependencies,H),k}catch(k){throw yield Me(T),k}})).apply(this,arguments)}function ca(T,S){return ks.apply(this,arguments)}function ks(){return(ks=(0,F.Z)(function*(T,S){const H={token:yield nl(T,S),createTime:Date.now(),subscriptionOptions:S};return yield Li(T,H),H.token})).apply(this,arguments)}function oi(T,S){return co.apply(this,arguments)}function co(){return(co=(0,F.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ep(S)})})).apply(this,arguments)}function ol(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function gc(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function mc(T,S){if(!S.notification)return;T.notification={};const k=S.notification.title;k&&(T.notification.title=k);const H=S.notification.body;H&&(T.notification.body=H);const ee=S.notification.image;ee&&(T.notification.image=ee);const le=S.notification.icon;le&&(T.notification.icon=le)}(S,T),function Oo(T,S){!S.data||(T.data=S.data)}(S,T),function da(T,S){var k,H,ee,le,De;if(!S.fcmOptions&&!(null===(k=S.notification)||void 0===k?void 0:k.click_action))return;T.fcmOptions={};const qe=null!==(ee=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==ee?ee:null===(le=S.notification)||void 0===le?void 0:le.click_action;qe&&(T.fcmOptions.link=qe);const bt=null===(De=S.fcmOptions)||void 0===De?void 0:De.analytics_label;bt&&(T.fcmOptions.analyticsLabel=bt)}(S,T),S}function Lr(T){return"object"==typeof T&&!!T&&tl in T}function Vi(T,S){const k=[];for(let H=0;H<T.length;H++)k.push(T.charAt(H)),H<S.length&&k.push(S.charAt(H));return k.join("")}function Ji(T){return Or.create("missing-app-config-values",{valueName:T})}Vi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Os{constructor(S,k,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function _c(T){if(!T||!T.options)throw Ji("App Configuration Object");if(!T.name)throw Ji("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const H of S)if(!k[H])throw Ji(H);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:k,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Jl(T){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(fm,{scope:As}),T.swRegistration.update().catch(()=>{})}catch(k){throw Or.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function yc(T,S){return ha.apply(this,arguments)}function ha(){return(ha=(0,F.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Jl(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function al(T,S){return ho.apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=lh)})).apply(this,arguments)}function Po(){return(Po=(0,F.Z)(function*(T,S){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield al(T,null==S?void 0:S.vapidKey),yield yc(T,null==S?void 0:S.serviceWorkerRegistration),sl(T)})).apply(this,arguments)}function dh(T,S,k){return ll.apply(this,arguments)}function ll(){return(ll=(0,F.Z)(function*(T,S,k){const H=tu(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:k[tl],message_name:k[dc],message_time:k[ql],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tu(T){switch(T){case aa.NOTIFICATION_CLICKED:return"notification_open";case aa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function nu(){return(nu=(0,F.Z)(function*(T,S){const k=S.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===aa.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(gc(k)):T.onMessageHandler.next(gc(k)));const H=k.data;Lr(H)&&"1"===H[Fi]&&(yield dh(T,k.messageType,H))})).apply(this,arguments)}const ul="@firebase/messaging",fa=T=>{const S=new Os(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function bc(T,S){return nu.apply(this,arguments)}(S,k)),S},gm=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function vc(T,S){return Po.apply(this,arguments)}(S,H)}};function Vr(){return Br.apply(this,arguments)}function Br(){return(Br=(0,F.Z)(function*(){try{yield(0,he.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hh(){(0,ie._registerComponent)(new Ee.wA("messaging",fa,"PUBLIC")),(0,ie._registerComponent)(new Ee.wA("messaging-internal",gm,"PRIVATE")),(0,ie.registerVersion)(ul,"0.11.0"),(0,ie.registerVersion)(ul,"0.11.0","esm2017")}();const pa="analytics",ga="firebase_id",mm="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",es="https://www.googletagmanager.com/gtag/js",ur=new se.Yd("@firebase/analytics");function Tc(T){return Promise.all(T.map(S=>S.catch(k=>k)))}function _m(T,S){const k=document.createElement("script");k.src=`${es}?l=${T}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Dc(T,S,k,H,ee,le){return ou.apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*(T,S,k,H,ee,le){const De=H[ee];try{if(De)yield S[De];else{const bt=(yield Tc(k)).find(Rt=>Rt.measurementId===ee);bt&&(yield S[bt.appId])}}catch(qe){ur.error(qe)}T("config",ee,le)})).apply(this,arguments)}function Sc(T,S,k,H,ee){return No.apply(this,arguments)}function No(){return(No=(0,F.Z)(function*(T,S,k,H,ee){try{let le=[];if(ee&&ee.send_to){let De=ee.send_to;Array.isArray(De)||(De=[De]);const qe=yield Tc(k);for(const bt of De){const Rt=qe.find(Tt=>Tt.measurementId===bt),Ut=Rt&&S[Rt.appId];if(!Ut){le=[];break}le.push(Ut)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),T("event",H,ee||{})}catch(le){ur.error(le)}})).apply(this,arguments)}function In(T){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(es)&&k.src.includes(T))return k;return null}const Xe=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gh=new class Wn{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function dl(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function mh(T){return hl.apply(this,arguments)}function hl(){return(hl=(0,F.Z)(function*(T){var S;const{appId:k,apiKey:H}=T,ee={method:"GET",headers:dl(H)},le=mm.replace("{app-id}",k),De=yield fetch(le,ee);if(200!==De.status&&304!==De.status){let qe="";try{const bt=yield De.json();(null===(S=bt.error)||void 0===S?void 0:S.message)&&(qe=bt.error.message)}catch(bt){}throw Xe.create("config-fetch-failed",{httpStatus:De.status,responseMessage:qe})}return De.json()})).apply(this,arguments)}function ym(T){return xc.apply(this,arguments)}function xc(){return(xc=(0,F.Z)(function*(T,S=gh,k){const{appId:H,apiKey:ee,measurementId:le}=T.options;if(!H)throw Xe.create("no-app-id");if(!ee){if(le)return{measurementId:le,appId:H};throw Xe.create("no-api-key")}const De=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new pl;return setTimeout((0,F.Z)(function*(){qe.abort()}),void 0!==k?k:6e4),ps({appId:H,apiKey:ee,measurementId:le},De,qe,S)})).apply(this,arguments)}function ps(T,S,k){return ht.apply(this,arguments)}function ht(){return(ht=(0,F.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:k},H,ee=gh){var le,De;const{appId:qe,measurementId:bt}=T;try{yield Mc(H,S)}catch(Rt){if(bt)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(le=Rt)||void 0===le?void 0:le.message}]`),{appId:qe,measurementId:bt};throw Rt}try{const Rt=yield mh(T);return ee.deleteThrottleMetadata(qe),Rt}catch(Rt){const Ut=Rt;if(!fl(Ut)){if(ee.deleteThrottleMetadata(qe),bt)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null==Ut?void 0:Ut.message}]`),{appId:qe,measurementId:bt};throw Rt}const Tt=503===Number(null===(De=null==Ut?void 0:Ut.customData)||void 0===De?void 0:De.httpStatus)?(0,he.$s)(k,ee.intervalMillis,30):(0,he.$s)(k,ee.intervalMillis),dr={throttleEndTimeMillis:Date.now()+Tt,backoffCount:k+1};return ee.setThrottleMetadata(qe,dr),ur.debug(`Calling attemptFetch again in ${Tt} millis`),ps(T,dr,H,ee)}})).apply(this,arguments)}function Mc(T,S){return new Promise((k,H)=>{const ee=Math.max(S-Date.now(),0),le=setTimeout(k,ee);T.addEventListener(()=>{clearTimeout(le),H(Xe.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function fl(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class pl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let ma,ai;function fo(){return(fo=(0,F.Z)(function*(T,S,k,H,ee){if(ee&&ee.global)T("event",k,H);else{const le=yield S;T("event",k,Object.assign(Object.assign({},H),{send_to:le}))}})).apply(this,arguments)}function _h(T){ai=T}function gs(T){ma=T}function Ui(){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,F.Z)(function*(){var T;if(!(0,he.hl)())return ur.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(S){return ur.warn(Xe.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function _l(){return(_l=(0,F.Z)(function*(T,S,k,H,ee,le,De){var qe;const bt=ym(T);bt.then(Kn=>{k[Kn.measurementId]=Kn.appId,T.options.measurementId&&Kn.measurementId!==T.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>ur.error(Kn)),S.push(bt);const Rt=Ui().then(Kn=>{if(Kn)return H.getId()}),[Ut,Tt]=yield Promise.all([bt,Rt]);In(le)||_m(le,Ut.measurementId),ai&&(ee("consent","default",ai),_h(void 0)),ee("js",new Date);const dr=null!==(qe=null==De?void 0:De.config)&&void 0!==qe?qe:{};return dr.origin="firebase",dr.update=!0,null!=Tt&&(dr[ga]=Tt),ee("config",Ut.measurementId,dr),ma&&(ee("set",ma),gs(void 0)),Ut.measurementId})).apply(this,arguments)}class Zt{constructor(S){this.app=S}_delete(){return delete Zn[this.app.options.appId],Promise.resolve()}}let Zn={},li=[];const Lo={};let ui,kn,Ai="dataLayer",ji=!1;function yl(T,S,k){!function lu(){const T=[];if((0,he.ru)()&&T.push("This is a browser extension environment."),(0,he.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,ee)=>`(${ee+1}) ${H}`).join(" "),k=Xe.create("invalid-analytics-context",{errorInfo:S});ur.warn(k.message)}}();const H=T.options.appId;if(!H)throw Xe.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Xe.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zn[H])throw Xe.create("already-exists",{id:H});if(!ji){!function su(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(Ai);const{wrappedGtag:le,gtagCore:De}=function Ac(T,S,k,H,ee){let le=function(...De){window[H].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(le=window[ee]),window[ee]=function ph(T,S,k,H){function le(){return(le=(0,F.Z)(function*(De,qe,bt){try{"event"===De?yield Sc(T,S,k,qe,bt):"config"===De?yield Dc(T,S,k,H,qe,bt):"consent"===De?T("consent","update",bt):T("set",qe)}catch(Rt){ur.error(Rt)}})).apply(this,arguments)}return function ee(De,qe,bt){return le.apply(this,arguments)}}(le,T,S,k),{gtagCore:le,wrappedGtag:window[ee]}}(Zn,li,Lo,Ai,"gtag");kn=le,ui=De,ji=!0}return Zn[H]=function Fo(T,S,k,H,ee,le,De){return _l.apply(this,arguments)}(T,li,Lo,S,ui,Ai,k),new Zt(T)}function vh(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,F.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}const kc="@firebase/analytics";!function ms(){(0,ie._registerComponent)(new Ee.wA(pa,(S,{options:k})=>yl(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ie._registerComponent)(new Ee.wA("analytics-internal",function T(S){try{const k=S.getProvider(pa).getImmediate();return{logEvent:(H,ee,le)=>function ba(T,S,k,H){T=(0,he.m9)(T),function Un(T,S,k,H,ee){return fo.apply(this,arguments)}(kn,Zn[T.app.options.appId],S,k,H).catch(ee=>ur.error(ee))}(k,H,ee,le)}}catch(k){throw Xe.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ie.registerVersion)(kc,"0.8.4"),(0,ie.registerVersion)(kc,"0.8.4","esm2017")}();var bh=L(4408),Ea=L(7565);const wh=new class uu extends Ea.v{}(class wa extends bh.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,k,H):S.flush(this)}});var bm=L(4986),Oc=L(8505),cu=L(5363),xt=L(9468);const Pc=new h.GfV("7.5.0"),ci="__angularfire_symbol__analyticsIsSupportedValue",Nc="__angularfire_symbol__analyticsIsSupported",Ca="__angularfire_symbol__remoteConfigIsSupportedValue",Fc="__angularfire_symbol__remoteConfigIsSupported",Lc="__angularfire_symbol__messagingIsSupportedValue",Vc="__angularfire_symbol__messagingIsSupported";function bl(T,S,k){if(S){if(1===S.length)return S[0];const le=S.filter(De=>De.app===k);if(1===le.length)return le[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[Nc]||(globalThis[Nc]=vh().then(T=>globalThis[ci]=T).catch(()=>globalThis[ci]=!1)),globalThis[Vc]||(globalThis[Vc]=Vr().then(T=>globalThis[Lc]=T).catch(()=>globalThis[Lc]=!1)),globalThis[Fc]||(globalThis[Fc]=hm().then(T=>globalThis[Ca]=T).catch(()=>globalThis[Ca]=!1));const Xr=(T,S)=>{const k=S?[S]:(0,G.C6)(),H=[];return k.forEach(ee=>{ee.container.getProvider(T).instances.forEach(De=>{H.includes(De)||H.push(De)})}),H};function er(){}class du{constructor(S,k=wh){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,H){const ee=this.zone;return this.delegate.schedule(function(De){ee.runGuarded(()=>{S.apply(this,[De])})},k,H)}}class Ia{constructor(S){this.zone=S,this.task=null}call(S,k){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",er,{},er,er)),k.pipe((0,Oc.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ch=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new du(Zone.current)),this.insideAngular=k.run(()=>new du(Zone.current,bm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function _s(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function ip(T){return T.pipe((0,cu.Q)(_s().outsideAngular))}function fu(T){return _s(),function ys(T){return function(k){return(k=k.lift(new Ia(T.ngZone))).pipe((0,xt.R)(T.outsideAngular),(0,cu.Q)(T.insideAngular))}}(_s())(T)}},732:(st,be,L)=>{L.d(be,{$:()=>eu,A:()=>Ot,B:()=>gr,G:()=>th,H:()=>Ja,J:()=>lr,L:()=>Wi,M:()=>Li,N:()=>Rs,P:()=>fu,Q:()=>Si,R:()=>Eh,T:()=>Or,U:()=>Ms,V:()=>fs,W:()=>rl,X:()=>Yl,Y:()=>Oo,Z:()=>Lr,_:()=>_c,a:()=>gs,a0:()=>vc,a1:()=>dh,a2:()=>tu,a3:()=>nu,a4:()=>wc,a5:()=>gm,a6:()=>Vr,a7:()=>Br,a8:()=>ru,a9:()=>Ec,aA:()=>vn,aB:()=>gu,aC:()=>Bo,aD:()=>_o,aE:()=>qn,aI:()=>Fo,aL:()=>lo,aa:()=>av,ab:()=>pa,ac:()=>fh,af:()=>ur,ag:()=>_m,ah:()=>su,ak:()=>Jt,al:()=>Bn,an:()=>fl,ao:()=>au,ap:()=>_t,aq:()=>Ss,ar:()=>oo,as:()=>Ln,at:()=>Am,au:()=>_u,av:()=>Fr,aw:()=>wn,ax:()=>Fe,ay:()=>op,az:()=>sn,b:()=>ai,c:()=>le,d:()=>Rt,e:()=>qe,f:()=>bE,g:()=>Vs,h:()=>sp,i:()=>kc,j:()=>wE,k:()=>Mm,l:()=>du,m:()=>kh,o:()=>qt,r:()=>Ch,s:()=>Xr,u:()=>ip});var h=L(5861),G=L(2090),F=L(9681),ie=L(1877);function de(v,g){var _={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&g.indexOf(w)<0&&(_[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(v);A<w.length;A++)g.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(v,w[A])&&(_[w[A]]=v[w[A]])}return _}var ce=L(4859);const qt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ot={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gr=function ir(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_n=function tn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},mr=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zn=new ie.Yd("@firebase/auth");function Wr(v,...g){zn.logLevel<=ie.in.ERROR&&zn.error(`Auth (${F.SDK_VERSION}): ${v}`,...g)}function Ln(v,...g){throw mi(v,...g)}function wn(v,...g){return mi(v,...g)}function Ds(v,g,_){const w=Object.assign(Object.assign({},_n()),{[g]:_});return new G.LL("auth","Firebase",w).create(g,{appName:v.name})}function Zr(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ln(v,"argument-error"),Ds(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mi(v,...g){if("string"!=typeof v){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return mr.create(v,...g)}function Fe(v,g,..._){if(!v)throw mi(g,..._)}function _r(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Wr(g),new Error(g)}function _t(v,g){v||_r(g)}const Nr=new Map;function sn(v){_t(v instanceof Function,"Expected a class definition");let g=Nr.get(v);return g?(_t(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Nr.set(v,g),g)}function ni(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function xr(){return"http:"===An()||"https:"===An()}function An(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Qt{constructor(g,_){this.shortDelay=g,this.longDelay=_,_t(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Kr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xr()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yt(v,g){_t(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class mt{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ds={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ri=new Qt(3e4,6e4);function It(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function En(v,g,_,w){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(v,g,_,w,A={}){return Cn(v,A,(0,h.Z)(function*(){let R={},Z={};w&&("GET"===g?Z=w:R={body:JSON.stringify(w)});const fe=(0,G.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Ke=yield v._getAdditionalHeaders();return Ke["Content-Type"]="application/json",v.languageCode&&(Ke["X-Firebase-Locale"]=v.languageCode),mt.fetch()(sr(v,v.config.apiHost,_,fe),Object.assign({method:g,headers:Ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Cn(v,g,_){return vt.apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(v,g,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},ds),g);try{const A=new et(v),R=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const Z=yield R.json();if("needConfirmation"in Z)throw Te(v,"account-exists-with-different-credential",Z);if(R.ok&&!("errorMessage"in Z))return Z;{const fe=R.ok?Z.errorMessage:Z.error.message,[Ke,Le]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw Te(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ke)throw Te(v,"email-already-in-use",Z);if("USER_DISABLED"===Ke)throw Te(v,"user-disabled",Z);const ut=w[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(Le)throw Ds(v,ut,Le);Ln(v,ut)}}catch(A){if(A instanceof G.ZR)throw A;Ln(v,"network-request-failed")}})).apply(this,arguments)}function vr(v,g,_,w){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,h.Z)(function*(v,g,_,w,A={}){const R=yield En(v,g,_,w,A);return"mfaPendingCredential"in R&&Ln(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function sr(v,g,_,w){const A=`${g}${_}?${w}`;return v.config.emulator?yt(v.config,A):`${v.config.apiScheme}://${A}`}class et{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(wn(this.auth,"network-request-failed")),ri.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Te(v,g,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const A=wn(v,g,w);return A.customData._tokenResponse=_,A}function Pt(){return(Pt=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Nt(v,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function W(v,g){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function J(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function j(){return(j=(0,h.Z)(function*(v,g=!1){const _=(0,G.m9)(v),w=yield _.getIdToken(g),A=ke(w);Fe(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,Z=null==R?void 0:R.sign_in_provider;return{claims:A,token:w,authTime:J(ae(A.auth_time)),issuedAtTime:J(ae(A.iat)),expirationTime:J(ae(A.exp)),signInProvider:Z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function ae(v){return 1e3*Number(v)}function ke(v){var g;const[_,w,A]=v.split(".");if(void 0===_||void 0===w||void 0===A)return Wr("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,G.tV)(w);return R?JSON.parse(R):(Wr("Failed to decode base64 JWT payload"),null)}catch(R){return Wr("Caught error parsing JWT payload as JSON",null===(g=R)||void 0===g?void 0:g.toString()),null}}function lt(v,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof G.ZR&&ft(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ft({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class gn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class br{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=J(this.lastLoginAt),this.creationTime=J(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bt(v){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(v){var g;const _=v.auth,w=yield v.getIdToken(),A=yield lt(v,W(_,{idToken:w}));Fe(null==A?void 0:A.users.length,_,"internal-error");const R=A.users[0];v._notifyReloadListener(R);const Z=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?Di(R.providerUserInfo):[],fe=Qa(v.providerData,Z),ut=!!v.isAnonymous&&!(v.email&&R.passwordHash||(null==fe?void 0:fe.length)),on={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:fe,metadata:new br(R.createdAt,R.lastLoginAt),isAnonymous:ut};Object.assign(v,on)})).apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(v){const g=(0,G.m9)(v);yield Bt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Qa(v,g){return[...v.filter(w=>!g.some(A=>A.providerId===w.providerId)),...g]}function Di(v){return v.map(g=>{var{providerId:_}=g,w=de(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Wt(){return(Wt=(0,h.Z)(function*(v,g){const _=yield Cn(v,{},(0,h.Z)(function*(){const w=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:R}=v.config,Z=sr(v,A,"/v1/token",`key=${R}`),fe=yield v._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",mt.fetch()(Z,{method:"POST",headers:fe,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class mn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Fe(g.idToken,"internal-error"),Fe(void 0!==g.idToken,"internal-error"),Fe(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function at(v){const g=ke(v);return Fe(g,"internal-error"),Fe(void 0!==g.exp,"internal-error"),Fe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,h.Z)(function*(){return Fe(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:Z}=yield function nt(v,g){return Wt.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(A,R,Number(Z))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:A,expirationTime:R}=_,Z=new mn;return w&&(Fe("string"==typeof w,"internal-error",{appName:g}),Z.refreshToken=w),A&&(Fe("string"==typeof A,"internal-error",{appName:g}),Z.accessToken=A),R&&(Fe("number"==typeof R,"internal-error",{appName:g}),Z.expirationTime=R),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new mn,this.toJSON())}_performRefresh(){return _r("not implemented")}}function or(v,g){Fe("string"==typeof v||void 0===v,"internal-error",{appName:g})}class ii{constructor(g){var{uid:_,auth:w,stsTokenManager:A}=g,R=de(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new br(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,h.Z)(function*(){const w=yield lt(_,_.stsTokenManager.getToken(_.auth,g));return Fe(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function N(v){return j.apply(this,arguments)}(this,g)}reload(){return function hs(v){return Mr.apply(this,arguments)}(this)}_assign(g){this!==g&&(Fe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ii(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,h.Z)(function*(){let A=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield Bt(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const _=yield g.getIdToken();return yield lt(g,function tt(v,g){return Pt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,A,R,Z,fe,Ke,Le,ut;const on=null!==(w=_.displayName)&&void 0!==w?w:void 0,Tn=null!==(A=_.email)&&void 0!==A?A:void 0,Ri=null!==(R=_.phoneNumber)&&void 0!==R?R:void 0,xa=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,qc=null!==(fe=_.tenantId)&&void 0!==fe?fe:void 0,Wc=null!==(Ke=_._redirectEventId)&&void 0!==Ke?Ke:void 0,pp=null!==(Le=_.createdAt)&&void 0!==Le?Le:void 0,gp=null!==(ut=_.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:Cl,emailVerified:Rm,isAnonymous:km,providerData:Ma,stsTokenManager:Om}=_;Fe(Cl&&Om,g,"internal-error");const Zc=mn.fromJSON(this.name,Om);Fe("string"==typeof Cl,g,"internal-error"),or(on,g.name),or(Tn,g.name),Fe("boolean"==typeof Rm,g,"internal-error"),Fe("boolean"==typeof km,g,"internal-error"),or(Ri,g.name),or(xa,g.name),or(qc,g.name),or(Wc,g.name),or(pp,g.name),or(gp,g.name);const Kc=new ii({uid:Cl,auth:g,email:Tn,emailVerified:Rm,displayName:on,isAnonymous:km,photoURL:xa,phoneNumber:Ri,tenantId:qc,stsTokenManager:Zc,createdAt:pp,lastLoginAt:gp});return Ma&&Array.isArray(Ma)&&(Kc.providerData=Ma.map(gv=>Object.assign({},gv))),Wc&&(Kc._redirectEventId=Wc),Kc}static _fromIdTokenResponse(g,_,w=!1){return(0,h.Z)(function*(){const A=new mn;A.updateFromServerResponse(_);const R=new ii({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:w});return yield Bt(R),R})()}}const Wi=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,w){var A=this;return(0,h.Z)(function*(){A.storage[_]=w})()}_get(_){var w=this;return(0,h.Z)(function*(){const A=w.storage[_];return void 0===A?null:A})()}_remove(_){var w=this;return(0,h.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function vn(v,g,_){return`firebase:${v}:${g}:${_}`}class Zi{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=vn(this.userKey,A.apiKey,R),this.fullPersistenceKey=vn("persistence",A.apiKey,R),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?ii._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,h.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,h.Z)(function*(){if(!_.length)return new Zi(sn(Wi),g,w);const A=(yield Promise.all(_.map(function(){var Le=(0,h.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return Le.apply(this,arguments)}}()))).filter(Le=>Le);let R=A[0]||sn(Wi);const Z=vn(w,g.config.apiKey,g.name);let fe=null;for(const Le of _)try{const ut=yield Le._get(Z);if(ut){const on=ii._fromJSON(g,ut);Le!==R&&(fe=on),R=Le;break}}catch(ut){}const Ke=A.filter(Le=>Le._shouldAllowMigration);return R._shouldAllowMigration&&Ke.length?(R=Ke[0],fe&&(yield R._set(Z,fe.toJSON())),yield Promise.all(_.map(function(){var Le=(0,h.Z)(function*(ut){if(ut!==R)try{yield ut._remove(Z)}catch(on){}});return function(ut){return Le.apply(this,arguments)}}())),new Zi(R,g,w)):new Zi(R,g,w)})()}}function ar(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Xa(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($t(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(kr(g))return"Blackberry";if(sa(g))return"Webos";if(ia(g))return"Safari";if((g.includes("chrome/")||so(g))&&!g.includes("edge/"))return"Chrome";if(oo(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function $t(v=(0,G.z$)()){return/firefox\//i.test(v)}function ia(v=(0,G.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function so(v=(0,G.z$)()){return/crios\//i.test(v)}function Xa(v=(0,G.z$)()){return/iemobile/i.test(v)}function oo(v=(0,G.z$)()){return/android/i.test(v)}function kr(v=(0,G.z$)()){return/blackberry/i.test(v)}function sa(v=(0,G.z$)()){return/webos/i.test(v)}function Ss(v=(0,G.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Fr(v=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function oa(v=(0,G.z$)()){return Ss(v)||oo(v)||sa(v)||kr(v)||/windows phone/i.test(v)||Xa(v)}function Yi(v,g=[]){let _;switch(v){case"Browser":_=ar((0,G.z$)());break;case"Worker":_=`${ar((0,G.z$)())}-${v}`;break;default:_=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${F.SDK_VERSION}/${w}`}class Jd{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const w=R=>new Promise((Z,fe)=>{try{Z(g(R))}catch(Ke){fe(Ke)}});w.onAbort=_,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,h.Z)(function*(){var w;if(_.auth.currentUser===g)return;const A=[];try{for(const R of _.queue)yield R(g),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const Z of A)try{Z()}catch(fe){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=R)||void 0===w?void 0:w.message})}})()}}class eh{constructor(g,_,w){this.app=g,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qi(this),this.idTokenSubscription=new Qi(this),this.beforeStateQueue=new Jd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=sn(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,R;if(!w._deleted&&(w.persistenceManager=yield Zi.create(w,g),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,h.Z)(function*(){var w;const A=yield _.assertedPersistence.getCurrentUser();let R=A,Z=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const fe=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Ke=null==R?void 0:R._redirectEventId,Le=yield _.tryRedirectSignIn(g);(!fe||fe===Ke)&&(null==Le?void 0:Le.user)&&(R=Le.user,Z=!0)}if(!R)return _.directlySetCurrentUser(null);if(!R._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(R)}catch(fe){R=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(fe))}return R?_.reloadAndSetCurrentUserOrClear(R):_.directlySetCurrentUser(null)}return Fe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===R._redirectEventId?_.directlySetCurrentUser(R):_.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(g){var _=this;return(0,h.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(A){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,h.Z)(function*(){var w;try{yield Bt(g)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Mo(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,h.Z)(function*(){const w=g?(0,G.m9)(g):null;return w&&Fe(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g,_=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return g&&Fe(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(sn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,h.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&sn(g)||_._popupRedirectResolver;Fe(w,_,"argument-error"),_.redirectPersistenceManager=yield Zi.create(_,[sn(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,h.Z)(function*(){var w,A;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,h.Z)(function*(){if(g===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,A){if(this._deleted)return()=>{};const R="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(Z,this,"internal-error"),Z.then(()=>R(this.currentUser)),"function"==typeof _?g.addObserver(_,w,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var _;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function qn(v){return(0,G.m9)(v)}class Qi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function th(v,g,_){const w=qn(v);Fe(w._canInitEmulator,w,"emulator-config-failed"),Fe(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),R=Qf(g),{host:Z,port:fe}=function lm(v){const g=Qf(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:Ni(w.substr(R.length+1))}}{const[R,Z]=w.split(":");return{host:R,port:Ni(Z)}}}(g);w.config.emulator={url:`${R}//${Z}${null===fe?"":`:${fe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:fe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function um(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Qf(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Ni(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Ja{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return _r("not implemented")}_getIdTokenResponse(g){return _r("not implemented")}_linkToIdToken(g,_){return _r("not implemented")}_getReauthenticationResolver(g){return _r("not implemented")}}function Xf(v,g){return nh.apply(this,arguments)}function nh(){return(nh=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:resetPassword",It(v,g))})).apply(this,arguments)}function rh(v,g){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function uc(v,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:update",It(v,g))})).apply(this,arguments)}function sh(){return(sh=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithPassword",It(v,g))})).apply(this,arguments)}function cc(v,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:sendOobCode",It(v,g))})).apply(this,arguments)}function dm(v,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,h.Z)(function*(v,g){return cc(v,g)})).apply(this,arguments)}function Jf(v,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,h.Z)(function*(v,g){return cc(v,g)})).apply(this,arguments)}function hm(v,g){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(v,g){return cc(v,g)})).apply(this,arguments)}function fm(v,g){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(v,g){return cc(v,g)})).apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithEmailLink",It(v,g))})).apply(this,arguments)}function dc(){return(dc=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithEmailLink",It(v,g))})).apply(this,arguments)}class ql extends Ja{constructor(g,_,w,A=null){super("password",w),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new ql(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new ql(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function cm(v,g){return sh.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function lh(v,g){return ko.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ln(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return rh(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function tl(v,g){return dc.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:Ln(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Fi(v,g){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithIdp",It(v,g))})).apply(this,arguments)}class lr extends Ja{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new lr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ln("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A}=_,R=de(_,["providerId","signInMethod"]);if(!w||!A)return null;const Z=new lr(w,A);return Z.idToken=R.idToken||void 0,Z.accessToken=R.accessToken||void 0,Z.secret=R.secret,Z.nonce=R.nonce,Z.pendingToken=R.pendingToken||null,Z}_getIdTokenResponse(g){return Fi(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,Fi(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Fi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,G.xO)(_)}return g}}function ep(v,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:sendVerificationCode",It(v,g))})).apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithPhoneNumber",It(v,g))})).apply(this,arguments)}function Kl(){return(Kl=(0,h.Z)(function*(v,g){const _=yield vr(v,"POST","/v1/accounts:signInWithPhoneNumber",It(v,g));if(_.temporaryProof)throw Te(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const fc={USER_NOT_FOUND:"user-not-found"};function Vn(){return(Vn=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithPhoneNumber",It(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),fc)})).apply(this,arguments)}class yi extends Ja{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new yi({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new yi({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function hc(v,g){return Zl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function uh(v,g){return Kl.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function pm(v,g){return Vn.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:R}=g;return w||_||A||R?new yi({verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class la{constructor(g){var _,w,A,R,Z,fe;const Ke=(0,G.zd)((0,G.pd)(g)),Le=null!==(_=Ke.apiKey)&&void 0!==_?_:null,ut=null!==(w=Ke.oobCode)&&void 0!==w?w:null,on=function ch(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ke.mode)&&void 0!==A?A:null);Fe(Le&&ut&&on,"argument-error"),this.apiKey=Le,this.operation=on,this.code=ut,this.continueUrl=null!==(R=Ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Z=Ke.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(fe=Ke.tenantId)&&void 0!==fe?fe:null}static parseLink(g){const _=function Yn(v){const g=(0,G.zd)((0,G.pd)(v)).link,_=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,w=(0,G.zd)((0,G.pd)(v)).deep_link_id;return(w?(0,G.zd)((0,G.pd)(w)).link:null)||w||_||g||v}(g);try{return new la(_)}catch(w){return null}}}let Li=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return ql._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const A=la.parseLink(w);return Fe(A,"argument-error"),ql._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Qn{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xs extends Qn{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ms extends xs{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Fe("providerId"in _&&"signInMethod"in _,"argument-error"),lr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Fe(g.idToken||g.accessToken,"argument-error"),lr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ms.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ms.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:Z,providerId:fe}=g;if(!w&&!A&&!_&&!R||!fe)return null;try{return new Ms(fe)._credential({idToken:_,accessToken:w,nonce:Z,pendingToken:R})}catch(Ke){return null}}}let Rs=(()=>{class v extends xs{constructor(){super("facebook.com")}static credential(_){return lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Si=(()=>{class v extends xs{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:A}=_;if(!w&&!A)return null;try{return v.credential(w,A)}catch(R){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Or=(()=>{class v extends xs{constructor(){super("github.com")}static credential(_){return lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class lo extends Ja{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Fi(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,Fi(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Fi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A,pendingToken:R}=_;return w&&A&&R&&w===A?new lo(w,R):null}static _create(g,_){return new lo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fs extends Qn{constructor(g){Fe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return fs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return fs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=lo.fromJSON(g);return Fe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return lo._create(w,_)}catch(A){return null}}}let rl=(()=>{class v extends xs{constructor(){super("twitter.com")}static credential(_,w){return lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=_;if(!w||!A)return null;try{return v.credential(w,A)}catch(R){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function At(v,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signUp",It(v,g))})).apply(this,arguments)}class si{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,A=!1){return(0,h.Z)(function*(){const R=yield ii._fromIdTokenResponse(g,w,A),Z=ua(w);return new si({user:R,providerId:Z,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const A=ua(w);return new si({user:g,providerId:A,_tokenResponse:w,operationType:_})})()}}function ua(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yl(v){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(v){var g;const _=qn(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new si({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield At(_,{returnSecureToken:!0}),A=yield si._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class sl extends G.ZR{constructor(g,_,w,A){var R;super(_.code,_.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,sl.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,A){return new sl(g,_,w,A)}}function Ql(v,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?sl._fromErrorAndOperation(v,R,g,w):R})}function Me(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Jt(v,g){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(v,g){const _=(0,G.m9)(v);yield ks(!0,_,g);const{providerUserInfo:w}=yield Nt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=Me(w||[]);return _.providerData=_.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Mn(v,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(v,g,_=!1){const w=yield lt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return si._forOperation(v,"link",w)})).apply(this,arguments)}function ks(v,g,_){return oi.apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(v,g,_){yield Bt(g);const A=!1===v?"provider-already-linked":"no-such-provider";Fe(Me(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function co(v,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(v,g,_=!1){var w;const{auth:A}=v,R="reauthenticate";try{const Z=yield lt(v,Ql(A,R,g,v),_);Fe(Z.idToken,A,"internal-error");const fe=ke(Z.idToken);Fe(fe,A,"internal-error");const{sub:Ke}=fe;return Fe(v.uid===Ke,A,"user-mismatch"),si._forOperation(v,R,Z)}catch(Z){throw"auth/user-not-found"===(null===(w=Z)||void 0===w?void 0:w.code)&&Ln(A,"user-mismatch"),Z}})).apply(this,arguments)}function gc(v,g){return mc.apply(this,arguments)}function mc(){return(mc=(0,h.Z)(function*(v,g,_=!1){const w="signIn",A=yield Ql(v,w,g),R=yield si._fromIdTokenResponse(v,w,A);return _||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Oo(v,g){return da.apply(this,arguments)}function da(){return(da=(0,h.Z)(function*(v,g){return gc(qn(v),g)})).apply(this,arguments)}function Lr(v,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(v,g){const _=(0,G.m9)(v);return yield ks(!1,_,g.providerId),Mn(_,g)})).apply(this,arguments)}function _c(v,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(v,g){return co((0,G.m9)(v),g)})).apply(this,arguments)}function Os(v,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,h.Z)(function*(v,g){return vr(v,"POST","/v1/accounts:signInWithCustomToken",It(v,g))})).apply(this,arguments)}function eu(v,g){return yc.apply(this,arguments)}function yc(){return(yc=(0,h.Z)(function*(v,g){const _=qn(v),w=yield Os(_,{token:g,returnSecureToken:!0}),A=yield si._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class ha{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?al._fromServerResponse(g,_):Ln(g,"internal-error")}}class al extends ha{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new al(_)}}function ho(v,g,_){var w;Fe((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Fe(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Fe(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Fe(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function vc(v,g,_){return Po.apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&ho(w,A,_),yield Jf(w,A)})).apply(this,arguments)}function dh(v,g,_){return ll.apply(this,arguments)}function ll(){return(ll=(0,h.Z)(function*(v,g,_){yield Xf((0,G.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function tu(v,g){return bc.apply(this,arguments)}function bc(){return(bc=(0,h.Z)(function*(v,g){yield uc((0,G.m9)(v),{oobCode:g})})).apply(this,arguments)}function nu(v,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(v,g){const _=(0,G.m9)(v),w=yield Xf(_,{oobCode:g}),A=w.requestType;switch(Fe(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(w.mfaInfo,_,"internal-error");default:Fe(w.email,_,"internal-error")}let R=null;return w.mfaInfo&&(R=ha._fromServerResponse(qn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function wc(v,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(v,g){const{data:_}=yield nu((0,G.m9)(v),g);return _.email})).apply(this,arguments)}function gm(v,g,_){return hh.apply(this,arguments)}function hh(){return(hh=(0,h.Z)(function*(v,g,_){const w=qn(v),A=yield At(w,{returnSecureToken:!0,email:g,password:_}),R=yield si._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Vr(v,g,_){return Oo((0,G.m9)(v),Li.credential(g,_))}function Br(v,g,_){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};Fe(_.handleCodeInApp,w,"argument-error"),_&&ho(w,A,_),yield hm(w,A)})).apply(this,arguments)}function ru(v,g){const _=la.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Ec(v,g,_){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v),A=Li.credentialWithLink(g,_||ni());return Fe(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Oo(w,A)})).apply(this,arguments)}function ov(v,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:createAuthUri",It(v,g))})).apply(this,arguments)}function av(v,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(v,g){const w={identifier:g,continueUri:xr()?ni():"http://localhost"},{signinMethods:A}=yield ov((0,G.m9)(v),w);return A||[]})).apply(this,arguments)}function pa(v,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(v,g){const _=(0,G.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&ho(_.auth,A,g);const{email:R}=yield dm(_.auth,A);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function fh(v,g,_){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&ho(w.auth,R,_);const{email:Z}=yield fm(w.auth,R);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function mm(v,g){return es.apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(v,g){return En(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ur(v,g){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,h.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,G.m9)(v),R={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Z=yield lt(w,mm(w.auth,R));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const fe=w.providerData.find(({providerId:Ke})=>"password"===Ke);fe&&(fe.displayName=w.displayName,fe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function _m(v,g){return Dc((0,G.m9)(v),g,null)}function su(v,g){return Dc((0,G.m9)(v),null,g)}function Dc(v,g,_){return ou.apply(this,arguments)}function ou(){return(ou=(0,h.Z)(function*(v,g,_){const{auth:w}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(R.email=g),_&&(R.password=_);const Z=yield lt(v,rh(w,R));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class No{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class ph extends No{constructor(g,_,w,A){super(g,_,w),this.username=A}}class Ac extends No{constructor(g,_){super(g,"facebook.com",_)}}class In extends ph{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ps extends No{constructor(g,_){super(g,"google.com",_)}}class Xe extends ph{constructor(g,_,w){super(g,"twitter.com",_,w)}}function Bn(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Sc(v){var g,_;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const Z=null===(_=null===(g=ke(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new No(R,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new Ac(R,A);case"github.com":return new In(R,A);case"google.com":return new Ps(R,A);case"twitter.com":return new Xe(R,A,v.screenName||null);case"custom":case"anonymous":return new No(R,null);default:return new No(R,w,A)}}(_)}class ht{constructor(g,_,w){this.type=g,this.credential=_,this.auth=w}static _fromIdtoken(g,_){return new ht("enroll",g,_)}static _fromMfaPendingCredential(g){return new ht("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ht._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return ht._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Mc{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=qn(g),A=_.customData._serverResponse,R=(A.mfaInfo||[]).map(fe=>ha._fromServerResponse(w,fe));Fe(A.mfaPendingCredential,w,"internal-error");const Z=ht._fromMfaPendingCredential(A.mfaPendingCredential);return new Mc(Z,R,function(){var fe=(0,h.Z)(function*(Ke){const Le=yield Ke._process(w,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const ut=Object.assign(Object.assign({},A),{idToken:Le.idToken,refreshToken:Le.refreshToken});switch(_.operationType){case"signIn":const on=yield si._fromIdTokenResponse(w,_.operationType,ut);return yield w._updateCurrentUser(on.user),on;case"reauthenticate":return Fe(_.user,w,"internal-error"),si._forOperation(_.user,_.operationType,ut);default:Ln(w,"internal-error")}});return function(Ke){return fe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,h.Z)(function*(){return _.signInResolver(g)})()}}function fl(v,g){var _;const w=(0,G.m9)(v),A=g;return Fe(g.customData.operationType,w,"argument-error"),Fe(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Mc._fromError(w,A)}function pl(v,g){return En(v,"POST","/v2/accounts/mfaEnrollment:start",It(v,g))}class fo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>ha._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new fo(g)}getSession(){var g=this;return(0,h.Z)(function*(){return ht._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var w=this;return(0,h.Z)(function*(){const A=g,R=yield w.getSession(),Z=yield lt(w.user,A._process(w.user.auth,R,_));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(g){var _=this;return(0,h.Z)(function*(){var w;const A="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),Z=yield lt(_.user,function Un(v,g){return En(v,"POST","/v2/accounts/mfaEnrollment:withdraw",It(v,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:fe})=>fe!==A),yield _.user._updateTokensIfNecessary(Z);try{yield _.user.reload()}catch(fe){if("auth/user-token-expired"!==(null===(w=fe)||void 0===w?void 0:w.code))throw fe}})()}}const Rc=new WeakMap;function au(v){const g=(0,G.m9)(v);return Rc.has(g)||Rc.set(g,fo._fromUser(g)),Rc.get(g)}const _a="__sak";class gl{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ai=(()=>{class v extends gl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ml(){const v=(0,G.z$)();return ia(v)||Ss(v)}()&&function Ki(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=oa(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&_(w,R,A)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((fe,Ke,Le)=>{this.notifyListeners(fe,Le)});const A=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(A);if(_.newValue!==fe)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!w)return}const R=()=>{const fe=this.storage.getItem(A);!w&&this.localCache[A]===fe||this.notifyListeners(A,fe)},Z=this.storage.getItem(A);!function Xd(){return(0,G.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?R():setTimeout(R,10)}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var A=()=>super._set,R=this;return(0,h.Z)(function*(){yield A().call(R,_,w),R.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,A=this;return(0,h.Z)(function*(){const R=yield w().call(A,_);return A.localCache[_]=JSON.stringify(R),R})()}_remove(_){var w=()=>super._remove,A=this;return(0,h.Z)(function*(){yield w().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),gs=(()=>{class v extends gl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Rn=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(R=>R.isListeningto(_));if(w)return w;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,h.Z)(function*(){const A=_,{eventId:R,eventType:Z,data:fe}=A.data,Ke=w.handlersMap[Z];if(!(null==Ke?void 0:Ke.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:Z});const Le=Array.from(Ke).map(function(){var on=(0,h.Z)(function*(Tn){return Tn(A.origin,fe)});return function(Tn){return on.apply(this,arguments)}}()),ut=yield function Ui(v){return Promise.all(v.map(function(){var g=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(Le);A.ports[0].postMessage({status:"done",eventId:R,eventType:Z,response:ut})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Fo(v="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return v+_}class _l{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var A=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Z,fe;return new Promise((Ke,Le)=>{const ut=Fo("",20);R.port1.start();const on=setTimeout(()=>{Le(new Error("unsupported_event"))},w);fe={messageChannel:R,onMessage(Tn){const Ri=Tn;if(Ri.data.eventId===ut)switch(Ri.data.status){case"ack":clearTimeout(on),Z=setTimeout(()=>{Le(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ke(Ri.data.response);break;default:clearTimeout(on),clearTimeout(Z),Le(new Error("invalid_response"))}}},A.handlers.add(fe),R.port1.addEventListener("message",fe.onMessage),A.target.postMessage({eventType:g,eventId:ut,data:_},[R.port2])}).finally(()=>{fe&&A.removeMessageHandler(fe)})})()}}function Zt(){return window}function li(){return void 0!==Zt().WorkerGlobalScope&&"function"==typeof Zt().importScripts}function Ai(){return(Ai=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const kn="firebaseLocalStorageDb",bn="firebaseLocalStorage",lu="fbase_key";class yl{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function yh(v,g){return v.transaction([bn],g?"readwrite":"readonly").objectStore(bn)}function vh(){const v=indexedDB.open(kn,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(bn,{keyPath:lu})}catch(A){_(A)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(bn)?g(w):(w.close(),yield function np(){const v=indexedDB.deleteDatabase(kn);return new yl(v).toPromise()}(),g(yield vh()))}))})}function Ns(v,g,_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(v,g,_){const w=yh(v,!0).put({[lu]:g,value:_});return new yl(w).toPromise()})).apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(v,g){const _=yh(v,!1).get(g),w=yield new yl(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Jn(v,g){const _=yh(v,!0).delete(g);return new yl(_).toPromise()}const kc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield vh()),_.db})()}_withRetries(_){var w=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield _(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return li()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=Rn._getInstance(function ui(){return li()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(A,R){return{keyProcessed:(yield _._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var w,A;if(_.activeServiceWorker=yield function Lo(){return Ai.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new _l(_.activeServiceWorker);const R=yield _.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function cr(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield vh();return yield Ns(_,_a,"1"),yield Jn(_,_a),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(R=>Ns(R,_,w)),A.localCache[_]=w,A.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,h.Z)(function*(){const A=yield w._withRetries(R=>function vl(v,g){return Fs.apply(this,arguments)}(R,_));return w.localCache[_]=A,A})()}_remove(_){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(A=>Jn(A,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const w=yield _._withRetries(Z=>{const fe=yh(Z,!1).getAll();return new yl(fe).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:Z,value:fe}of w)R.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(fe)&&(_.notifyListeners(Z,fe),A.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!R.has(Z)&&(_.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const R of Array.from(A))R(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function xi(v,g){return En(v,"POST","/v2/accounts/mfaSignIn:start",It(v,g))}function wa(){return(wa=(0,h.Z)(function*(v){return(yield En(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uu(v){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=A=>{const R=wn("internal-error");R.customData=A,_(R)},w.type="text/javascript",w.charset="UTF-8",function Ea(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function wh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Oc=1e12;class cu{constructor(g){this.auth=g,this.counter=Oc,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new xt(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||Oc;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Oc))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,h.Z)(function*(){var w;return null===(w=_._widgets.get(g||Oc))||void 0===w||w.execute(),""})()}}class xt{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;Fe(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ci=wh("rcb"),Nc=new Qt(3e4,6e4);class Fc{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=Zt().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return Fe(function Lc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Zt().grecaptcha):new Promise((w,A)=>{const R=Zt().setTimeout(()=>{A(wn(g,"network-request-failed"))},Nc.get());Zt()[ci]=()=>{Zt().clearTimeout(R),delete Zt()[ci];const fe=Zt().grecaptcha;if(!fe)return void A(wn(g,"internal-error"));const Ke=fe.render;fe.render=(Le,ut)=>{const on=Ke(Le,ut);return this.counter++,on},this.hostLanguage=_,w(fe)},uu(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:ci,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(R),A(wn(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=Zt().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vc{load(g){return(0,h.Z)(function*(){return new cu(g)})()}clearedOneInstance(){}}const Mi="recaptcha",rp={theme:"light",type:"image"};class Eh{constructor(g,_=Object.assign({},rp),w){this.parameters=_,this.type=Mi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(w),this.isInvisible="invisible"===this.parameters.size,Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;Fe(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vc:new Fc,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(R=>{const Z=fe=>{!fe||(g.tokenChangeListeners.delete(Z),R(fe))};g.tokenChangeListeners.add(Z),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=Zt()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){Fe(xr()&&!li(),g.auth,"internal-error"),yield function Bc(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function bh(v){return wa.apply(this,arguments)}(g.auth);Fe(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bl{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=yi._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Xr(v,g,_){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(v,g,_){const w=qn(v),A=yield hu(w,g,(0,G.m9)(_));return new bl(A,R=>Oo(w,R))})).apply(this,arguments)}function du(v,g,_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v);yield ks(!1,w,"phone");const A=yield hu(w.auth,g,(0,G.m9)(_));return new bl(A,R=>Lr(w,R))})).apply(this,arguments)}function Ch(v,g,_){return _s.apply(this,arguments)}function _s(){return(_s=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v),A=yield hu(w.auth,g,(0,G.m9)(_));return new bl(A,R=>_c(w,R))})).apply(this,arguments)}function hu(v,g,_){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(v,g,_){var w;const A=yield _.verify();try{let R;if(Fe("string"==typeof A,v,"argument-error"),Fe(_.type===Mi,v,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const Z=R.session;if("phoneNumber"in R)return Fe("enroll"===Z.type,v,"internal-error"),(yield pl(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Fe("signin"===Z.type,v,"internal-error");const fe=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Fe(fe,v,"missing-multi-factor-info"),(yield xi(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield ep(v,{phoneNumber:R.phoneNumber,recaptchaToken:A});return Z}}finally{_._reset()}})).apply(this,arguments)}function ip(v,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(v,g){yield Mn((0,G.m9)(v),g)})).apply(this,arguments)}let fu=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=qn(_)}verifyPhoneNumber(_,w){return hu(this.auth,_,(0,G.m9)(w))}static credential(_,w){return yi._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:A}=_;return w&&A?yi._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ys(v,g){return g?sn(g):(Fe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class On extends Ja{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Fi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Fi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Fi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function en(v){return gc(v.auth,new On(v),v.bypassAuthState)}function T(v){const{auth:g,user:_}=v;return Fe(_,g,"internal-error"),co(_,new On(v),v.bypassAuthState)}function S(v){return k.apply(this,arguments)}function k(){return(k=(0,h.Z)(function*(v){const{auth:g,user:_}=v;return Fe(_,g,"internal-error"),Mn(_,new On(v),v.bypassAuthState)})).apply(this,arguments)}class H{constructor(g,_,w,A,R=!1){this.auth=g,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,h.Z)(function*(w,A){g.pendingPromise={resolve:w,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(w,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:Z,error:fe,type:Ke}=g;if(fe)return void _.reject(fe);const Le={auth:_.auth,requestUri:w,sessionId:A,tenantId:Z||void 0,postBody:R||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ke)(Le))}catch(ut){_.reject(ut)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return en;case"linkViaPopup":case"linkViaRedirect":return S;case"reauthViaPopup":case"reauthViaRedirect":return T;default:Ln(this.auth,"internal-error")}}resolve(g){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ee=new Qt(2e3,1e4);function le(v,g,_){return De.apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(v,g,_){const w=qn(v);Zr(v,g,Qn);const A=ys(w,_);return new Tt(w,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function qe(v,g,_){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v);Zr(w.auth,g,Qn);const A=ys(w.auth,_);return new Tt(w.auth,"reauthViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}function Rt(v,g,_){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v);Zr(w.auth,g,Qn);const A=ys(w.auth,_);return new Tt(w.auth,"linkViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}let Tt=(()=>{class v extends H{constructor(_,w,A,R,Z){super(_,w,R,Z),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const w=yield _.execute();return Fe(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,h.Z)(function*(){_t(1===_.filter.length,"Popup operations only handle one event");const w=Fo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(wn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ee.get())};_()}}return v.currentPopupAction=null,v})();const Kn=new Map;class Ta extends H{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,h.Z)(function*(){let w=Kn.get(_.auth._key());if(!w){try{const R=(yield function Da(v,g){return go.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}Kn.set(_.auth._key(),w)}return _.bypassAuthState||Kn.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const A=yield w.auth._redirectUserForId(g.eventId);if(A)return w.user=A,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function go(){return(go=(0,h.Z)(function*(v,g){const _=Uc(g),w=yo(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(_));return yield w._remove(_),A})).apply(this,arguments)}function mo(v,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,g){return yo(v)._set(Uc(g),"true")})).apply(this,arguments)}function _o(){Kn.clear()}function Bo(v,g){Kn.set(v._key(),g)}function yo(v){return sn(v._redirectPersistence)}function Uc(v){return vn("pendingRedirect",v.config.apiKey,v.name)}function bE(v,g,_){return function lv(v,g,_){return Ih.apply(this,arguments)}(v,g,_)}function Ih(){return(Ih=(0,h.Z)(function*(v,g,_){const w=qn(v);Zr(v,g,Qn);const A=ys(w,_);return yield mo(A,w),A._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function sp(v,g,_){return function pu(v,g,_){return ns.apply(this,arguments)}(v,g,_)}function ns(){return(ns=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v);Zr(w.auth,g,Qn);const A=ys(w.auth,_);yield mo(A,w.auth);const R=yield mu(w);return A._openRedirect(w.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function Vs(v,g,_){return function wm(v,g,_){return Th.apply(this,arguments)}(v,g,_)}function Th(){return(Th=(0,h.Z)(function*(v,g,_){const w=(0,G.m9)(v);Zr(w.auth,g,Qn);const A=ys(w.auth,_);yield ks(!1,w,g.providerId),yield mo(A,w.auth);const R=yield mu(w);return A._openRedirect(w.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function wE(v,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(v,g){return yield qn(v)._initializationPromise,gu(v,g,!1)})).apply(this,arguments)}function gu(v,g){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,h.Z)(function*(v,g,_=!1){const w=qn(v),A=ys(w,g),Z=yield new Ta(w,A,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,g)),Z})).apply(this,arguments)}function mu(v){return jc.apply(this,arguments)}function jc(){return(jc=(0,h.Z)(function*(v){const g=Fo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class op{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function uv(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ah(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!Ah(g)){const A=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(wn(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sh(g))}saveEventToCache(g){this.cachedEventUids.add(Sh(g)),this.lastProcessedEventTime=Date.now()}}function Sh(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Ah({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function _u(v){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,g={}){return En(v,"GET","/v1/projects",g)})).apply(this,arguments)}const yu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Em=/^https?/;function wl(){return(wl=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield _u(v);for(const _ of g)try{if(ap(_))return}catch(w){}Ln(v,"unauthorized-domain")})).apply(this,arguments)}function ap(v){const g=ni(),{protocol:_,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===w}if(!Em.test(_))return!1;if(yu.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Cm=new Qt(3e4,6e4);function lp(){const v=Zt().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let vu=null;function cv(v){return vu=vu||function Im(v){return new Promise((g,_)=>{var w,A,R;function Z(){lp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{lp(),_(wn(v,"network-request-failed"))},timeout:Cm.get()})}if(null===(A=null===(w=Zt().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=Zt().gapi)||void 0===R?void 0:R.load)){const fe=wh("iframefcb");return Zt()[fe]=()=>{gapi.load?Z():_(wn(v,"network-request-failed"))},uu(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Ke=>_(Ke))}Z()}}).catch(g=>{throw vu=null,g})}(v),vu}const dv=new Qt(5e3,15e3),Mh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rh(v){const g=v.config;Fe(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?yt(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:F.SDK_VERSION},A=Hc.get(v.config.apiHost);A&&(w.eid=A);const R=v._getFrameworks();return R.length&&(w.fw=R.join(",")),`${_}?${(0,G.xO)(w).slice(1)}`}function Sa(){return Sa=(0,h.Z)(function*(v){const g=yield cv(v),_=Zt().gapi;return Fe(_,v,"internal-error"),g.open({where:document.body,url:Rh(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mh,dontclear:!0},w=>new Promise(function(){var A=(0,h.Z)(function*(R,Z){yield w.restyle({setHideOnLeave:!1});const fe=wn(v,"network-request-failed"),Ke=Zt().setTimeout(()=>{Z(fe)},dv.get());function Le(){Zt().clearTimeout(Ke),R(w)}w.ping(Le).then(Le,()=>{Z(fe)})});return function(R,Z){return A.apply(this,arguments)}}()))}),Sa.apply(this,arguments)}const up={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Aa{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Am(v,g,_,w,A,R){Fe(v.config.authDomain,v,"auth-domain-config-required"),Fe(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:F.SDK_VERSION,eventId:A};if(g instanceof Qn){g.setDefaultLanguage(v.languageCode),Z.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(Z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ke,Le]of Object.entries(R||{}))Z[Ke]=Le}if(g instanceof xs){const Ke=g.getScopes().filter(Le=>""!==Le);Ke.length>0&&(Z.scopes=Ke.join(","))}v.tenantId&&(Z.tid=v.tenantId);const fe=Z;for(const Ke of Object.keys(fe))void 0===fe[Ke]&&delete fe[Ke];return`${function xm({config:v}){return v.emulator?yt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,G.xO)(fe).slice(1)}`}const El="webStorageSupport",Mm=class $c{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gs,this._completeRedirectFn=gu,this._overrideRedirectResult=Bo}_openPopup(g,_,w,A){var R=this;return(0,h.Z)(function*(){var Z;_t(null===(Z=R.eventManagers[g._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const fe=Am(g,_,w,ni(),A);return function cp(v,g,_,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let fe="";const Ke=Object.assign(Object.assign({},up),{width:w.toString(),height:A.toString(),top:R,left:Z}),Le=(0,G.z$)().toLowerCase();_&&(fe=so(Le)?"_blank":_),$t(Le)&&(g=g||"http://localhost",Ke.scrollbars="yes");const ut=Object.entries(Ke).reduce((Tn,[Ri,xa])=>`${Tn}${Ri}=${xa},`,"");if(function xn(v=(0,G.z$)()){var g;return Ss(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Le)&&"_self"!==fe)return function jo(v,g){const _=document.createElement("a");_.href=v,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",fe),new Aa(null);const on=window.open(g||"",fe,ut);Fe(on,v,"popup-blocked");try{on.focus()}catch(Tn){}return new Aa(on)}(g,fe,Fo())})()}_openRedirect(g,_,w,A){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(g),function Zn(v){Zt().location.href=v}(Am(g,_,w,ni(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:R}=this.eventManagers[_];return A?Promise.resolve(A):(_t(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,h.Z)(function*(){const w=yield function vo(v){return Sa.apply(this,arguments)}(g),A=new op(g);return w.register("authEvent",R=>(Fe(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=w,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(El,{type:El},A=>{var R;const Z=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[El];void 0!==Z&&_(!!Z),Ln(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function xh(v){return wl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return oa()||ia()||Ss()}};class bu extends class Gc{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return _r("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new bu(g)}_finalizeEnroll(g,_,w){return function ma(v,g){return En(v,"POST","/v2/accounts/mfaEnrollment:finalize",It(v,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ms(v,g){return En(v,"POST","/v2/accounts/mfaSignIn:finalize",It(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kh=(()=>{class v{constructor(){}static assertion(_){return bu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Oh="@firebase/auth",zc="0.20.11";class pv{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{var A;g((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function hp(v){(0,F._registerComponent)(new ce.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:R,authDomain:Z}=w.options;return((fe,Ke)=>{Fe(R&&!R.includes(":"),"invalid-api-key",{appName:fe.name}),Fe(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:fe.name});const Le={apiKey:R,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yi(v)},ut=new eh(fe,Ke,Le);return function _i(v,g){const _=(null==g?void 0:g.persistence)||[],w=(Array.isArray(_)?_:[_]).map(sn);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(ut,_),ut})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ce.wA("auth-internal",g=>{const _=qn(g.getProvider("auth").getImmediate());return new pv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Oh,zc,function wr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,F.registerVersion)(Oh,zc,"esm2017")}("Browser")},2090:(st,be,L)=>{L.d(be,{BH:()=>dt,LL:()=>gr,ZR:()=>tn,gQ:()=>An,zI:()=>Ce,hu:()=>G,g5:()=>F,US:()=>Ee,tV:()=>me,h$:()=>se,L:()=>de,$s:()=>tt,r3:()=>mi,Sg:()=>Ot,ne:()=>Kr,p$:()=>q,vZ:()=>Nr,ZB:()=>Y,gK:()=>ri,pd:()=>xr,aH:()=>qt,Pz:()=>Ar,m9:()=>nn,z$:()=>Ze,GJ:()=>Zr,jU:()=>He,ru:()=>_e,xb:()=>_r,w1:()=>ze,hl:()=>ct,uI:()=>Se,UG:()=>Ve,Yr:()=>ot,b$:()=>ve,G6:()=>xe,w9:()=>Ds,cI:()=>ti,UI:()=>_t,xO:()=>_i,zd:()=>ni,DV:()=>Fe,ug:()=>vt,dS:()=>Cn,Wl:()=>zn,Dv:()=>ds,Wj:()=>En,lb:()=>yr,eu:()=>Qe});const G=function(W,z){if(!W)throw F(z)},F=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ie=function(W){const z=[];let J=0;for(let $=0;$<W.length;$++){let N=W.charCodeAt($);N<128?z[J++]=N:N<2048?(z[J++]=N>>6|192,z[J++]=63&N|128):55296==(64512&N)&&$+1<W.length&&56320==(64512&W.charCodeAt($+1))?(N=65536+((1023&N)<<10)+(1023&W.charCodeAt(++$)),z[J++]=N>>18|240,z[J++]=N>>12&63|128,z[J++]=N>>6&63|128,z[J++]=63&N|128):(z[J++]=N>>12|224,z[J++]=N>>6&63|128,z[J++]=63&N|128)}return z},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let N=0;N<W.length;N+=3){const j=W[N],ae=N+1<W.length,ke=ae?W[N+1]:0,at=N+2<W.length,lt=at?W[N+2]:0;let gn=(15&ke)<<2|lt>>6,br=63&lt;at||(br=64,ae||(gn=64)),$.push(J[j>>2],J[(3&j)<<4|ke>>4],J[gn],J[br])}return $.join("")},encodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(W):this.encodeByteArray(ie(W),z)},decodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(W):function(W){const z=[];let J=0,$=0;for(;J<W.length;){const N=W[J++];if(N<128)z[$++]=String.fromCharCode(N);else if(N>191&&N<224){const j=W[J++];z[$++]=String.fromCharCode((31&N)<<6|63&j)}else if(N>239&&N<365){const at=((7&N)<<18|(63&W[J++])<<12|(63&W[J++])<<6|63&W[J++])-65536;z[$++]=String.fromCharCode(55296+(at>>10)),z[$++]=String.fromCharCode(56320+(1023&at))}else{const j=W[J++],ae=W[J++];z[$++]=String.fromCharCode((15&N)<<12|(63&j)<<6|63&ae)}}return z.join("")}(this.decodeStringToByteArray(W,z))},decodeStringToByteArray(W,z){this.init_();const J=z?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let N=0;N<W.length;){const j=J[W.charAt(N++)],ke=N<W.length?J[W.charAt(N)]:0;++N;const lt=N<W.length?J[W.charAt(N)]:64;++N;const ft=N<W.length?J[W.charAt(N)]:64;if(++N,null==j||null==ke||null==lt||null==ft)throw Error();$.push(j<<2|ke>>4),64!==lt&&($.push(ke<<4&240|lt>>2),64!==ft&&$.push(lt<<6&192|ft))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},se=function(W){const z=ie(W);return Ee.encodeByteArray(z,!0)},de=function(W){return se(W).replace(/\./g,"")},me=function(W){try{return Ee.decodeString(W,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function q(W){return Y(void 0,W)}function Y(W,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return z}for(const J in z)!z.hasOwnProperty(J)||!oe(J)||(W[J]=Y(W[J],z[J]));return W}function oe(W){return"__proto__"!==W}function Ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function He(){return"object"==typeof self&&self.self===self}function _e(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ze(){const W=Ze();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ot(){return!1}function xe(){return!Ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){return"object"==typeof indexedDB}function Qe(){return new Promise((W,z)=>{try{let J=!0;const $="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open($);N.onsuccess=()=>{N.result.close(),J||self.indexedDB.deleteDatabase($),W(!0)},N.onupgradeneeded=()=>{J=!1},N.onerror=()=>{var j;z((null===(j=N.error)||void 0===j?void 0:j.message)||"")}}catch(J){z(J)}})}function Ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Pe=()=>{try{return function K(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if("undefined"==typeof document)return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(J){return}const z=W&&me(W[1]);return z&&JSON.parse(z)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},qt=()=>{var W;return null===(W=Pe())||void 0===W?void 0:W.config},Ar=W=>{var z;return null===(z=Pe())||void 0===z?void 0:z[`_${W}`]};class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,J)=>{this.resolve=z,this.reject=J})}wrapCallback(z){return(J,$)=>{J?this.reject(J):this.resolve($),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(J):z(J,$))}}}function Ot(W,z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=z||"demo-project",N=W.iat||0,j=W.sub||W.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:N,exp:N+3600,auth_time:N,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},W);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ae)),""].join(".")}class tn extends Error{constructor(z,J,$){super(J),this.code=z,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gr.prototype.create)}}class gr{constructor(z,J,$){this.service=z,this.serviceName=J,this.errors=$}create(z,...J){const $=J[0]||{},N=`${this.service}/${z}`,j=this.errors[z],ae=j?function _n(W,z){return W.replace(mr,(J,$)=>{const N=z[$];return null!=N?String(N):`<${$}?>`})}(j,$):"Error";return new tn(N,`${this.serviceName}: ${ae} (${N}).`,$)}}const mr=/\{\$([^}]+)}/g;function ti(W){return JSON.parse(W)}function zn(W){return JSON.stringify(W)}const Wr=function(W){let z={},J={},$={},N="";try{const j=W.split(".");z=ti(me(j[0])||""),J=ti(me(j[1])||""),N=j[2],$=J.d||{},delete J.d}catch(j){}return{header:z,claims:J,data:$,signature:N}},Ds=function(W){const J=Wr(W).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Zr=function(W){const z=Wr(W).claims;return"object"==typeof z&&!0===z.admin};function mi(W,z){return Object.prototype.hasOwnProperty.call(W,z)}function Fe(W,z){if(Object.prototype.hasOwnProperty.call(W,z))return W[z]}function _r(W){for(const z in W)if(Object.prototype.hasOwnProperty.call(W,z))return!1;return!0}function _t(W,z,J){const $={};for(const N in W)Object.prototype.hasOwnProperty.call(W,N)&&($[N]=z.call(J,W[N],N,W));return $}function Nr(W,z){if(W===z)return!0;const J=Object.keys(W),$=Object.keys(z);for(const N of J){if(!$.includes(N))return!1;const j=W[N],ae=z[N];if(sn(j)&&sn(ae)){if(!Nr(j,ae))return!1}else if(j!==ae)return!1}for(const N of $)if(!J.includes(N))return!1;return!0}function sn(W){return null!==W&&"object"==typeof W}function _i(W){const z=[];for(const[J,$]of Object.entries(W))Array.isArray($)?$.forEach(N=>{z.push(encodeURIComponent(J)+"="+encodeURIComponent(N))}):z.push(encodeURIComponent(J)+"="+encodeURIComponent($));return z.length?"&"+z.join("&"):""}function ni(W){const z={};return W.replace(/^\?/,"").split("&").forEach($=>{if($){const[N,j]=$.split("=");z[decodeURIComponent(N)]=decodeURIComponent(j)}}),z}function xr(W){const z=W.indexOf("?");if(!z)return"";const J=W.indexOf("#",z);return W.substring(z,J>0?J:void 0)}class An{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,J){J||(J=0);const $=this.W_;if("string"==typeof z)for(let ft=0;ft<16;ft++)$[ft]=z.charCodeAt(J)<<24|z.charCodeAt(J+1)<<16|z.charCodeAt(J+2)<<8|z.charCodeAt(J+3),J+=4;else for(let ft=0;ft<16;ft++)$[ft]=z[J]<<24|z[J+1]<<16|z[J+2]<<8|z[J+3],J+=4;for(let ft=16;ft<80;ft++){const gn=$[ft-3]^$[ft-8]^$[ft-14]^$[ft-16];$[ft]=4294967295&(gn<<1|gn>>>31)}let lt,Ft,N=this.chain_[0],j=this.chain_[1],ae=this.chain_[2],ke=this.chain_[3],at=this.chain_[4];for(let ft=0;ft<80;ft++){ft<40?ft<20?(lt=ke^j&(ae^ke),Ft=1518500249):(lt=j^ae^ke,Ft=1859775393):ft<60?(lt=j&ae|ke&(j|ae),Ft=2400959708):(lt=j^ae^ke,Ft=3395469782);const gn=(N<<5|N>>>27)+lt+at+Ft+$[ft]&4294967295;at=ke,ke=ae,ae=4294967295&(j<<30|j>>>2),j=N,N=gn}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+ae&4294967295,this.chain_[3]=this.chain_[3]+ke&4294967295,this.chain_[4]=this.chain_[4]+at&4294967295}update(z,J){if(null==z)return;void 0===J&&(J=z.length);const $=J-this.blockSize;let N=0;const j=this.buf_;let ae=this.inbuf_;for(;N<J;){if(0===ae)for(;N<=$;)this.compress_(z,N),N+=this.blockSize;if("string"==typeof z){for(;N<J;)if(j[ae]=z.charCodeAt(N),++ae,++N,ae===this.blockSize){this.compress_(j),ae=0;break}}else for(;N<J;)if(j[ae]=z[N],++ae,++N,ae===this.blockSize){this.compress_(j),ae=0;break}}this.inbuf_=ae,this.total_+=J}digest(){const z=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&J,J/=256;this.compress_(this.buf_);let $=0;for(let N=0;N<5;N++)for(let j=24;j>=0;j-=8)z[$]=this.chain_[N]>>j&255,++$;return z}}function Kr(W,z){const J=new Mo(W,z);return J.subscribe.bind(J)}class Mo{constructor(z,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{z(this)}).catch($=>{this.error($)})}next(z){this.forEachObserver(J=>{J.next(z)})}error(z){this.forEachObserver(J=>{J.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,J,$){let N;if(void 0===z&&void 0===J&&void 0===$)throw new Error("Missing Observer.");N=function yt(W,z){if("object"!=typeof W||null===W)return!1;for(const J of z)if(J in W&&"function"==typeof W[J])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:J,complete:$},void 0===N.next&&(N.next=mt),void 0===N.error&&(N.error=mt),void 0===N.complete&&(N.complete=mt);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch(ae){}}),this.observers.push(N),j}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,z)}sendOne(z,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{J(this.observers[z])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mt(){}const ds=function(W,z,J,$){let N;if($<z?N="at least "+z:$>J&&(N=0===J?"none":"no more than "+J),N)throw new Error(W+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+N+".")};function ri(W,z){return`${W} failed: ${z} argument `}function En(W,z,J,$){if((!$||J)&&"function"!=typeof J)throw new Error(ri(W,z)+"must be a valid function.")}function yr(W,z,J,$){if((!$||J)&&("object"!=typeof J||null===J))throw new Error(ri(W,z)+"must be a valid context object.")}const Cn=function(W){const z=[];let J=0;for(let $=0;$<W.length;$++){let N=W.charCodeAt($);if(N>=55296&&N<=56319){const j=N-55296;$++,G($<W.length,"Surrogate pair missing trail surrogate."),N=65536+(j<<10)+(W.charCodeAt($)-56320)}N<128?z[J++]=N:N<2048?(z[J++]=N>>6|192,z[J++]=63&N|128):N<65536?(z[J++]=N>>12|224,z[J++]=N>>6&63|128,z[J++]=63&N|128):(z[J++]=N>>18|240,z[J++]=N>>12&63|128,z[J++]=N>>6&63|128,z[J++]=63&N|128)}return z},vt=function(W){let z=0;for(let J=0;J<W.length;J++){const $=W.charCodeAt(J);$<128?z++:$<2048?z+=2:$>=55296&&$<=56319?(z+=4,J++):z+=3}return z};function tt(W,z=1e3,J=2){const $=z*Math.pow(J,W),N=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+N)}function nn(W){return W&&W._delegate?W._delegate:W}},2831:(st,be,L)=>{var h=L(5e3);let G=null;function F(){return G}const se=new h.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function me(){return(0,h.LFG)(Y)}()},providedIn:"platform"}),n})();const q=new h.OlP("Location Initialized");let Y=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ze(){return new Y((0,h.LFG)(se))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ve(n){const e=(0,h.LFG)(se).location;return new ze((0,h.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Oe=new h.OlP("appBaseHref");let ze=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+He(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+He(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(Oe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+He(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+He(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(Oe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(Qe(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function ct(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Se,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function xe(){return new ot((0,h.LFG)(_e),(0,h.LFG)(de))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var re=(()=>((re=re||{})[re.Zero=0]="Zero",re[re.One=1]="One",re[re.Two=2]="Two",re[re.Few=3]="Few",re[re.Many=4]="Many",re[re.Other=5]="Other",re))();const mi=h.kL8;class vn{}let ar=(()=>{class n extends vn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(mi(r||this.locale)(t)){case re.Zero:return"zero";case re.One:return"one";case re.Two:return"two";case re.Few:return"few";case re.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class oo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new oo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,l),sa(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{sa(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function sa(n,e){n.context.$implicit=e.item}let Fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class xn{constructor(){this.$implicit=null,this.ngIf=null}}function Xd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class um{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ja{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Xf=new Ja,nh=new um;let rh=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Xf;if((0,h.F4k)(t))return nh;throw function Ni(n,e){return new h.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})(),Fi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:vn,useClass:ar}]}),n})();const Wl="browser";function hc(n){return"server"===n}let fc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new pm((0,h.LFG)(se),window)}),n})();class pm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function yi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vn(this.window.history)||Vn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Vn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pc extends class la extends class Ee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){G||(G=n)}(new pc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qn(){return Li=Li||document.querySelector("base"),Li?Li.getAttribute("href"):null}();return null==t?null:function Ms(n){xs=xs||document.createElement("a"),xs.setAttribute("href",n);const e=xs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Li=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let xs,Li=null;const Rs=new h.OlP("TRANSITION_ID"),Or=[{provide:h.ip1,useFactory:function Si(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Rs,se,h.zs3],multi:!0}];class nl{static init(){(0,h.VLi)(new nl)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const d=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let lo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xi=new h.OlP("EventManagerPlugins");let fs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class rl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let At=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),uo=(()=>{class n extends At{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(si),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(si))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function si(n){F().remove(n)}const ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yl=/%COMP%/g;function Mn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Mn(n,i,t):(i=i.replace(Yl,n),t.push(i))}return t}function ca(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let oi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new co(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new mc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Oo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Mn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fs),h.LFG(uo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class co{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ua[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ua[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ua[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ca(r)):this.eventManager.addEventListener(e,t,ca(r))}}class mc extends co{constructor(e,t,r,i){super(e),this.component=r;const s=Mn(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Jt(n){return"_ngcontent-%COMP%".replace(Yl,n)}(i+"-"+r.id),this.hostAttr=function Xl(n){return"_nghost-%COMP%".replace(Yl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Oo extends co{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Mn(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let da=(()=>{class n extends rl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Lr=["alt","control","meta","shift"],_c={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ji={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Os={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Jl=(()=>{class n extends rl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="";if(Lr.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),l+=p+".")}),l+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=l,d}static getEventFullKey(t){let r="",i=function eu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ji.hasOwnProperty(e)&&(e=Ji[e]))}return _c[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lr.forEach(s=>{s!=i&&Os[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const vc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Wl},{provide:h.g9A,useValue:function yc(){pc.makeCurrent(),nl.init()},multi:!0},{provide:se,useFactory:function al(){return(0,h.RDi)(document),document},deps:[]}]),Po=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ha(){return new h.qLn},deps:[]},{provide:Xi,useClass:da,multi:!0,deps:[se,h.R0b,h.Lbi]},{provide:Xi,useClass:Jl,multi:!0,deps:[se]},{provide:oi,useClass:oi,deps:[fs,uo,h.AFp]},{provide:h.FYo,useExisting:oi},{provide:At,useExisting:uo},{provide:uo,useClass:uo,deps:[se]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:fs,useClass:fs,deps:[Xi,h.R0b]},{provide:class Yn{},useClass:lo,deps:[]}];let dh=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Rs,useExisting:h.AFp},Or]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Po,imports:[Fi,h.hGG]}),n})();"undefined"!=typeof window&&window;let Sc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(ph),r},providedIn:"root"}),n})(),ph=(()=>{class n extends Sc{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function No(n){return new ph(n.get(se))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var In=L(8996),Ps=L(3269);function Xe(...n){const e=(0,Ps.yG)(n);return(0,In.D)(n,e)}var Bn=L(7579);class Bi extends Bn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Wn=L(8306);const{isArray:gh}=Array,{getPrototypeOf:dl,prototype:mh,keys:hl}=Object;function ym(n){if(1===n.length){const e=n[0];if(gh(e))return{args:e,keys:null};if(function xc(n){return n&&"object"==typeof n&&dl(n)===mh}(e)){const t=hl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ps=L(4671),ht=L(4004);const{isArray:Mc}=Array;function pl(n){return(0,ht.U)(e=>function fl(n,e){return Mc(e)?n(...e):n(e)}(n,e))}function ma(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Un=L(5403),fo=L(9672);function _a(n,e,t){n?(0,fo.f)(t,n,e):e()}const ml=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ya=L(8189);function po(...n){return function tp(){return(0,ya.J)(1)}()((0,In.D)(n,(0,Ps.yG)(n)))}var ai=L(8421);function _h(n){return new Wn.y(e=>{(0,ai.Xf)(n()).subscribe(e)})}var gs=L(515),Ui=L(727),Rn=L(4482);function Fo(){return(0,Rn.e)((n,e)=>{let t=null;n._refCount++;const r=new Un.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _l extends Wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ui.w0;const t=this.getSubject();e.add(this.source.subscribe(new Un.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ui.w0.EMPTY)}return e}refCount(){return Fo()(this)}}function Zt(n,e){return(0,Rn.e)((t,r)=>{let i=null,s=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe(new Un.Q(r,p=>{null==i||i.unsubscribe();let y=0;const E=s++;(0,ai.Xf)(n(p,E)).subscribe(i=new Un.Q(r,D=>r.next(e?e(p,D,E,y++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var Zn=L(5698);function li(...n){const e=(0,Ps.yG)(n);return(0,Rn.e)((t,r)=>{(e?po(n,t,e):po(n,t)).subscribe(r)})}function Lo(n,e,t,r,i){return(s,l)=>{let d=t,p=e,y=0;s.subscribe(new Un.Q(l,E=>{const D=y++;p=d?n(p,E,D):(d=!0,E),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function Ai(n,e){return(0,Rn.e)(Lo(n,e,arguments.length>=2,!0))}function cr(n,e){return(0,Rn.e)((t,r)=>{let i=0;t.subscribe(new Un.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ui(n){return(0,Rn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new Un.Q(t,void 0,void 0,l=>{s=(0,ai.Xf)(n(l,ui(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var kn=L(5577),ji=L(576);function bn(n,e){return(0,ji.m)(e)?(0,kn.z)(n,e,1):(0,kn.z)(n,1)}function lu(n){return n<=0?()=>gs.E:(0,Rn.e)((e,t)=>{let r=[];e.subscribe(new Un.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yl(n=yh){return(0,Rn.e)((e,t)=>{let r=!1;e.subscribe(new Un.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yh(){return new ml}function np(n){return(0,Rn.e)((e,t)=>{let r=!1;e.subscribe(new Un.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ns(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cr((i,s)=>n(i,s,r)):ps.y,(0,Zn.q)(1),t?np(e):yl(()=>new ml))}var Ur=L(8505);function vl(n){return(0,Rn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Fs{constructor(e,t){this.id=e,this.url=t}}class Jn extends Fs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class va extends Fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ba extends Fs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vE extends Fs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kc extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xi extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ms extends Fs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bh extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wa extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ea{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vm{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bm{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Pc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ci(n){return new Pc(n)}const Nc="ngNavigationCancelingError";function Ca(n){const e=Error("NavigationCancelingError: "+n);return e[Nc]=!0,e}function Lc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],d=n[s];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!rp(n[i],e[i]))return!1;return!0}function rp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Eh(n){return Array.prototype.concat.apply([],n)}function Bc(n){return n.length>0?n[n.length-1]:null}function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,In.D)(Promise.resolve(n)):Xe(n)}const Ia={exact:function ts(n,e,t){if(!k(n.segments,e.segments)||!ys(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ts(n.children[r],e.children[r],t))return!1;return!0},subset:Vo},Ch={exact:function hu(n,e){return Mi(n,e)},subset:function ip(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rp(n[t],e[t]))},ignored:()=>!0};function _s(n,e,t){return Ia[t.paths](n.root,e.root,t.matrixParams)&&Ch[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vo(n,e,t){return fu(n,e,e.segments,t)}function fu(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!k(i,t)||e.hasChildren()||!ys(i,t,r))}if(n.segments.length===t.length){if(!k(n.segments,t)||!ys(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Vo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(k(n.segments,i)&&ys(n.segments,i,r)&&n.children[xt])&&fu(n.children[xt],e,s,r)}}function ys(n,e,t){return e.every((r,i)=>Ch[t](n[i].parameters,r.parameters))}class On{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ci(this.queryParams)),this._queryParamMap}toString(){return De.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qe(this)}}class T{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ci(this.parameters)),this._parameterMap}toString(){return Da(this)}}function k(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ee{}class le{parse(e){const t=new lv(e);return new On(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bt(e.root,!0)}`,r=function mo(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ut(t)}=${Ut(i)}`).join("&"):`${Ut(t)}=${Ut(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Tt(n){return encodeURI(n)}(e.fragment)}`:""}`}}const De=new le;function qe(n){return n.segments.map(e=>Da(e)).join("/")}function bt(n,e){if(!n.hasChildren())return qe(n);if(e){const t=n.children[xt]?bt(n.children[xt],!1):"",r=[];return Xr(n.children,(i,s)=>{s!==xt&&r.push(`${s}:${bt(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function H(n,e){let t=[];return Xr(n.children,(r,i)=>{i===xt&&(t=t.concat(e(r,i)))}),Xr(n.children,(r,i)=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xt?[bt(n.children[xt],!1)]:[`${i}:${bt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${qe(n)}/${t[0]}`:`${qe(n)}/(${t.join("//")})`}}function Rt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ut(n){return Rt(n).replace(/%3B/gi,";")}function dr(n){return Rt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kn(n){return decodeURIComponent(n)}function Ta(n){return Kn(n.replace(/\+/g,"%20"))}function Da(n){return`${dr(n.path)}${function go(n){return Object.keys(n).map(e=>`;${dr(e)}=${dr(n[e])}`).join("")}(n.parameters)}`}const Ls=/^[^\/()?;=#]+/;function _o(n){const e=n.match(Ls);return e?e[0]:""}const Bo=/^[^=?&#]+/,Uc=/^[^&#]+/;class lv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new en(e,t)),r}parseSegment(){const e=_o(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new T(Kn(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_o(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=_o(this.remaining);i&&(r=i,this.capture(r))}e[Kn(t)]=Kn(r)}parseQueryParam(e){const t=function yo(n){const e=n.match(Bo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function bE(n){const e=n.match(Uc);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ta(t),s=Ta(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_o(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[xt]:new en([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ih{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pu(e,this._root).map(t=>t.value)}}function sp(n,e){if(n===e.value)return e;for(const t of e.children){const r=sp(n,t);if(r)return r}return null}function pu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pu(n,t);if(r.length)return r.unshift(e),r}return[]}class ns{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wm extends Ih{constructor(e,t){super(e),this.snapshot=t,Uo(this,e)}toString(){return this.snapshot.toString()}}function Th(n,e){const t=function wE(n,e){const l=new mu([],{},{},"",{},xt,e,null,n.root,-1,{});return new jc("",new ns(l,[]))}(n,e),r=new Bi([new T("",{})]),i=new Bi({}),s=new Bi({}),l=new Bi({}),d=new Bi(""),p=new Bs(r,i,l,d,s,xt,e,t.root);return p.snapshot=t.root,new wm(new ns(p,[]),t)}class Bs{constructor(e,t,r,i,s,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>ci(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>ci(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Dh(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mu{constructor(e,t,r,i,s,l,d,p,y,E,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ci(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ci(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jc extends Ih{constructor(e,t){super(t),this.url=e,Uo(this,t)}toString(){return op(this._root)}}function Uo(n,e){e.value._routerState=n,e.children.forEach(t=>Uo(n,t))}function op(n){const e=n.children.length>0?` { ${n.children.map(op).join(", ")} } `:"";return`${n.value}${e}`}function Sh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mi(e.params,t.params)||n.params.next(t.params),function Vc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ah(n,e){const t=Mi(n.params,e.params)&&function S(n,e){return k(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ah(n.parent,e.parent))}function _u(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Us(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _u(n,r,i);return _u(n,r)})}(n,e,t);return new ns(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>_u(n,d)),l}}const r=function yu(n){return new Bs(new Bi(n.url),new Bi(n.params),new Bi(n.queryParams),new Bi(n.fragment),new Bi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>_u(n,s));return new ns(r,i)}}function xh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function wl(n){return"object"==typeof n&&null!=n&&n.outlets}function ap(n,e,t,r,i){let s={};return r&&Xr(r,(l,d)=>{s[d]=Array.isArray(l)?l.map(p=>`${p}`):`${l}`}),new On(t.root===n?e:Cm(t.root,n,e),s,i)}function Cm(n,e,t){const r={};return Xr(n.children,(i,s)=>{r[s]=i===e?t:Cm(i,e,t)}),new en(n.segments,r)}class lp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xh(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(wl);if(i&&i!==Bc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fv(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return Mh(n,e,t);const r=function Hc(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],d=t[r];if(wl(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!up(p,y,l))return s;r+=2}else{if(!up(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new en(n.segments.slice(0,r.pathIndex),{});return s.children[xt]=new en(n.segments.slice(r.pathIndex),n.children),Mh(s,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?Rh(n,e,t):r.match?Mh(n,0,i):Rh(n,e,t)}function Mh(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function hv(n){return wl(n[0])?n[0].outlets:{[xt]:n}}(t),i={};return Xr(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=fv(n.children[l],e,s))}),Xr(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new en(n.segments,i)}}function Rh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(wl(s)){const p=vo(s.outlets);return new en(r,p)}if(0===i&&xh(t[0])){r.push(new T(n.segments[e].path,Sa(t[0]))),i++;continue}const l=wl(s)?s.outlets[xt]:`${s}`,d=i<t.length-1?t[i+1]:null;l&&d&&xh(d)?(r.push(new T(l,Sa(d))),i+=2):(r.push(new T(l,{})),i++)}return new en(r,{})}function vo(n){const e={};return Xr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Rh(new en([],{}),0,t))}),e}function Sa(n){const e={};return Xr(n,(t,r)=>e[r]=`${t}`),e}function up(n,e,t){return n==t.path&&Mi(e,t.parameters)}class Dm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Xr(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vs(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Oc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vm(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Sh(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Sh(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function EE(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=p,l.outlet&&l.outlet.activateWith(i,p),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Sm{constructor(e,t){this.routes=e,this.module=t}}function Aa(n){return"function"==typeof n}function jo(n){return n instanceof On}const El=Symbol("INITIAL_VALUE");function $c(){return Zt(n=>function Rc(...n){const e=(0,Ps.yG)(n),t=(0,Ps.jO)(n),{args:r,keys:i}=ym(n);if(0===r.length)return(0,In.D)([],e);const s=new Wn.y(function au(n,e,t=ps.y){return r=>{_a(e,()=>{const{length:i}=n,s=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)_a(e,()=>{const y=(0,In.D)(n[p],e);let E=!1;y.subscribe(new Un.Q(r,D=>{s[p]=D,E||(E=!0,d--),d||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ma(i,l):ps.y));return t?s.pipe(pl(t)):s}(n.map(e=>e.pipe((0,Zn.q)(1),li(El)))).pipe(Ai((e,t)=>{let r=!1;return t.reduce((i,s,l)=>i!==El?i:(s===El&&(r=!0),r||!1!==s&&l!==t.length-1&&!jo(s)?i:s),e)},El),cr(e=>e!==El),(0,ht.U)(e=>jo(e)?e:!0===e),(0,Zn.q)(1)))}class Mm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gc,this.attachRef=null}}class Gc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Mm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let bu=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=s||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new kh(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class kh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bs?this.route:e===Gc?this.childContexts:this.parent.get(e,t)}}let Oh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[bu],encapsulation:2}),n})();function zc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pv(r,wr(e,r))}}function pv(n,e){n.children&&zc(n.children,e)}function wr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function hp(n){const e=n.children&&n.children.map(hp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=Oh),t}function vs(n){return n.outlet||xt}function Ph(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}const Nh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Fh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Nh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Lc)(t,n,e);if(!s)return Object.assign({},Nh);const l={};Xr(s.posParams,(p,y)=>{l[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:d,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function fp(n,e,t,r,i="corrected"){if(t.length>0&&function _(n,e,t){return t.some(r=>A(n,e,r)&&vs(r)!==xt)}(n,t,r)){const l=new en(e,function g(n,e,t,r){const i={};i[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&vs(s)!==xt){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[vs(s)]=l}return i}(n,e,r,new en(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function w(n,e,t){return t.some(r=>A(n,e,r))}(n,t,r)){const l=new en(n.segments,function v(n,e,t,r,i,s){const l={};for(const d of r)if(A(n,t,d)&&!i[vs(d)]){const p=new en([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[vs(d)]=p}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new en(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function A(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function R(n,e,t,r){return!!(vs(n)===r||r!==xt&&A(e,t,n))&&("**"===n.path||Fh(e,n,t).matched)}function Z(n,e,t){return 0===e.length&&!n.children[t]}class fe{constructor(e){this.segmentGroup=e||null}}class Ke{constructor(e){this.urlTree=e}}function Le(n){return new Wn.y(e=>e.error(new fe(n)))}function ut(n){return new Wn.y(e=>e.error(new Ke(n)))}function on(n){return new Wn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class xa{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=fp(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,ht.U)(s=>this.createUrlTree(Wc(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ui(s=>{if(s instanceof Ke)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof fe?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,ht.U)(i=>this.createUrlTree(Wc(i),e.queryParams,e.fragment))).pipe(ui(i=>{throw i instanceof fe?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[xt]:e}):e;return new On(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(s=>new en([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,In.D)(i).pipe(bn(s=>{const l=r.children[s],d=Ph(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,ht.U)(p=>({segment:p,outlet:s})))}),Ai((s,l)=>(s[l.outlet]=l.segment,s),{}),function vh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cr((i,s)=>n(i,s,r)):ps.y,lu(1),t?np(e):yl(()=>new ml))}())}expandSegment(e,t,r,i,s,l){return(0,In.D)(r).pipe(bn(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,l).pipe(ui(y=>{if(y instanceof fe)return Xe(null);throw y}))),Ns(d=>!!d),ui((d,p)=>{if(d instanceof ml||"EmptyError"===d.name){if(Z(t,i,s))return Xe(new en([],{}));throw new fe(t)}throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,l,d){return R(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):Le(t):Le(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ut(s):this.lineralizeSegments(r,s).pipe((0,kn.z)(l=>{const d=new en(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:d,consumedSegments:p,lastChild:y,positionalParamSegments:E}=Fh(t,i,s);if(!d)return Le(t);const D=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?ut(D):this.lineralizeSegments(i,D).pipe((0,kn.z)(M=>this.expandSegment(e,t,r,M.concat(s.slice(y)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ht.U)(M=>(r._loadedConfig=M,new en(i,{})))):Xe(new en(i,{}));const{matched:l,consumedSegments:d,lastChild:p}=Fh(t,r,i);if(!l)return Le(t);const y=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,kn.z)(D=>{const M=D.module,P=D.routes,{segmentGroup:B,slicedSegments:X}=fp(t,d,y,P),ne=new en(B.segments,B.children);if(0===X.length&&ne.hasChildren())return this.expandChildren(M,P,ne).pipe((0,ht.U)(We=>new en(d,We)));if(0===P.length&&0===X.length)return Xe(new en(d,{}));const je=vs(r)===s;return this.expandSegment(M,ne,P,X,je?xt:s,!0).pipe((0,ht.U)(Ge=>new en(d.concat(Ge.segments),Ge.children)))}))}getChildConfig(e,t,r){return t.children?Xe(new Sm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,kn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ht.U)(s=>(t._loadedConfig=s,s))):function Tn(n){return new Wn.y(e=>e.error(Ca(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Xe(new Sm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Xe(i.map(l=>{const d=e.get(l);let p;if(function dp(n){return n&&Aa(n.canLoad)}(d))p=d.canLoad(t,r);else{if(!Aa(d))throw new Error("Invalid CanLoad guard");p=d(t,r)}return er(p)})).pipe($c(),(0,Ur.b)(l=>{if(!jo(l))return;const d=Ca(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,ht.U)(l=>!0===l)):Xe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[xt])return on(e.redirectTo);i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new On(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Xr(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new en(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Wc(n){const e={};for(const r of Object.keys(n.children)){const s=Wc(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qc(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class gp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cl{constructor(e,t){this.component=e,this.route=t}}function Rm(n,e,t){const r=n._root;return Zc(r,e?e._root:null,t,[r.value])}function Ma(n,e,t){const r=function Om(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Zc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vs(e);return n.children.forEach(l=>{(function Kc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function gv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!k(n.url,e.url);case"pathParamsOrQueryParamsChange":return!k(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ah(n,e)||!Mi(n.queryParams,e.queryParams);default:return!Ah(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new gp(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Zc(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Cl(d.outlet.component,l))}else l&&mp(e,d,i),i.canActivateChecks.push(new gp(r)),Zc(n,null,s.component?d?d.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Xr(s,(l,d)=>mp(l,t.getContext(d),i)),i}function mp(n,e,t){const r=Vs(n),i=n.value;Xr(r,(s,l)=>{mp(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Cl(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class NS{}function TE(n){return new Wn.y(e=>e.error(n))}class DE{constructor(e,t,r,i,s,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=fp(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new mu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ns(r,t),s=new jc(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=gu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const l=t.children[s],d=Ph(e,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;r.push(...p)}const i=Yc(r);return function LS(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,r,i);if(null!==l)return l}return Z(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!R(e,t,r,i))return null;let s,l=[],d=[];if("**"===e.path){const P=r.length>0?Bc(r).parameters:{};s=new mu(r,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mv(e),vs(e),e.component,e,US(t),jS(t)+r.length,HS(e))}else{const P=Fh(t,e,r);if(!P.matched)return null;l=P.consumedSegments,d=r.slice(P.lastChild),s=new mu(l,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mv(e),vs(e),e.component,e,US(t),jS(t)+l.length,HS(e))}const p=function VS(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:E}=fp(t,l,d,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new ns(s,P)]}if(0===p.length&&0===E.length)return[new ns(s,[])];const D=vs(e)===i,M=this.processSegment(p,y,E,D?xt:i);return null===M?null:[new ns(s,M)]}}function BS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Yc(n){const e=[],t=new Set;for(const r of n){if(!BS(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Yc(r.children);e.push(new ns(r.value,i))}return e.filter(r=>!t.has(r))}function US(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function mv(n){return n.data||{}}function HS(n){return n.resolve||{}}function Qc(n){return Zt(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,ht.U)(()=>e)):Xe(e)})}class vv extends class xE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yp=new h.OlP("ROUTES");class bv{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ht.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new Sm(Eh(l.injector.get(yp,void 0,h.XFs.Self|h.XFs.Optional)).map(hp),l)}),ui(s=>{throw t._loader$=void 0,s}));return t._loader$=new _l(i,()=>new Bn.x).pipe(Fo()),t._loader$}loadModuleFactory(e){return er(e()).pipe((0,kn.z)(t=>t instanceof h.YKP?Xe(t):(0,In.D)(this.compiler.compileModuleAsync(t))))}}class Lh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wv(n){throw n}function ME(n,e,t){return e.parse("/")}function RE(n,e){return Xe(null)}const Ev={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rs=(()=>{class n{constructor(t,r,i,s,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bn.x,this.errorHandler=wv,this.malformedUriErrorHandler=ME,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RE,afterPreactivation:RE},this.urlHandlingStrategy=new Lh,this.routeReuseStrategy=new vv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const D=l.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function du(){return new On(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bv(l,d,M=>this.triggerEvent(new Ea(M)),M=>this.triggerEvent(new uu(M))),this.routerState=Th(this.currentUrlTree,this.rootComponentType),this.transitions=new Bi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(cr(i=>0!==i.id),(0,ht.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Zt(i=>{let s=!1,l=!1;return Xe(i).pipe((0,Ur.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zt(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Pm(d.source)&&(this.browserUrlTree=d.extractedUrl),Xe(d).pipe(Zt(D=>{const M=this.transitions.getValue();return r.next(new Jn(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?gs.E:Promise.resolve(D)}),function pp(n,e,t,r){return Zt(i=>function Ri(n,e,t,r,i){return new xa(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function Ra(n,e,t,r,i){return(0,kn.z)(s=>function FS(n,e,t,r,i="emptyOnly",s="legacy"){try{const l=new DE(n,e,t,r,i,s).recognize();return null===l?TE(new NS):Xe(l)}catch(l){return TE(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,ht.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new kc(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:P,source:B,restoredState:X,extras:ne}=d,je=new Jn(M,this.serializeUrl(P),B,X);r.next(je);const Ye=Th(P,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},d),{targetSnapshot:Ye,urlAfterRedirects:P,extras:Object.assign(Object.assign({},ne),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),gs.E}),Qc(d=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:P}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!P})}),(0,Ur.b)(d=>{const p=new xi(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ht.U)(d=>Object.assign(Object.assign({},d),{guards:Rm(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function _p(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function xS(n,e,t,r){return(0,In.D)(n).pipe((0,kn.z)(i=>function PS(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Xe(s.map(d=>{const p=Ma(d,e,i);let y;if(function xm(n){return n&&Aa(n.canDeactivate)}(p))y=er(p.canDeactivate(n,e,t,r));else{if(!Aa(p))throw new Error("Invalid CanDeactivate guard");y=er(p(n,e,t,r))}return y.pipe(Ns())})).pipe($c()):Xe(!0)}(i.component,i.route,t,e,r)),Ns(i=>!0!==i,!0))}(l,r,i,n).pipe((0,kn.z)(d=>d&&function cp(n){return"boolean"==typeof n}(d)?function MS(n,e,t,r){return(0,In.D)(e).pipe(bn(i=>po(function kS(n,e){return null!==n&&e&&e(new wh(n)),Xe(!0)}(i.route.parent,r),function RS(n,e){return null!==n&&e&&e(new bm(n)),Xe(!0)}(i.route,r),function IE(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function km(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>_h(()=>Xe(l.guards.map(p=>{const y=Ma(p,l.node,t);let E;if(function Am(n){return n&&Aa(n.canActivateChild)}(y))E=er(y.canActivateChild(r,n));else{if(!Aa(y))throw new Error("Invalid CanActivateChild guard");E=er(y(r,n))}return E.pipe(Ns())})).pipe($c())));return Xe(s).pipe($c())}(n,i.path,t),function OS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(s=>_h(()=>{const l=Ma(s,e,t);let d;if(function CE(n){return n&&Aa(n.canActivate)}(l))d=er(l.canActivate(e,n));else{if(!Aa(l))throw new Error("Invalid CanActivate guard");d=er(l(e,n))}return d.pipe(Ns())}));return Xe(i).pipe($c())}(n,i.route,t))),Ns(i=>!0!==i,!0))}(r,s,n,e):Xe(d)),(0,ht.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ur.b)(d=>{if(jo(d.guardsResult)){const y=Ca(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new ms(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),cr(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Qc(d=>{if(d.guards.canActivateChecks.length)return Xe(d).pipe((0,Ur.b)(p=>{const y=new bh(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Zt(p=>{let y=!1;return Xe(p).pipe(function _v(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let s=0;return(0,In.D)(i).pipe(bn(l=>function yv(n,e,t,r){return function $S(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Xe({});const s={};return(0,In.D)(i).pipe((0,kn.z)(l=>function SE(n,e,t,r){const i=Ma(n,e,r);return er(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ur.b)(d=>{s[l]=d}))),lu(1),(0,kn.z)(()=>Object.keys(s).length===i.length?Xe(s):gs.E))}(n._resolve,n,e,r).pipe((0,ht.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),gu(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ur.b)(()=>s++),lu(1),(0,kn.z)(l=>s===i.length?Xe(t):gs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Ur.b)(p=>{const y=new wa(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Qc(d=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:P}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!P})}),(0,ht.U)(d=>{const p=function uv(n,e,t){const r=_u(n,e._root,t?t._root:void 0);return new wm(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,Ur.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new Dm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ur.b)({next(){s=!0},complete(){s=!0}}),vl(()=>{var d;s||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),ui(d=>{if(l=!0,function Fc(n){return n&&n[Nc]}(d)){const p=jo(d.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new ba(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pm(i.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new vE(i.id,this.serializeUrl(i.extractedUrl),d);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return gs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zc(t),this.config=t.map(hp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,E=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function Em(n,e,t,r,i){if(0===t.length)return ap(e.root,e.root,e,r,i);const s=function Im(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Xr(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new lp(t,e,r)}(t);if(s.toRoot())return ap(e.root,new en([],{}),e,r,i);const l=function cv(n,e,t){if(n.isAbsolute)return new vu(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new vu(s,s===e.root,0)}const r=xh(n.commands[0])?0:1;return function dv(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new vu(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),d=l.processChildren?Mh(l.segmentGroup,l.index,s.commands):fv(l.segmentGroup,l.index,s.commands);return ap(l.segmentGroup,d,e,r,i)}(y,this.currentUrlTree,t,D,null!=E?E:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=jo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function zS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Ev):!1===r?Object.assign({},GS):r,jo(t))return _s(this.currentUrlTree,t,i);const s=this.parseUrl(t);return _s(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new va(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){var d,p,y;if(this.disposed)return Promise.resolve(!1);const E=this.transitions.value,D=Pm(r)&&E&&!Pm(E.source),M=E.rawUrl.toString()===t.toString(),P=E.id===(null===(d=this.currentNavigation)||void 0===d?void 0:d.id);if(D&&M&&P)return Promise.resolve(!0);let X,ne,je;l?(X=l.resolve,ne=l.reject,je=l.promise):je=new Promise((We,Ct)=>{X=We,ne=Ct});const Ye=++this.navigationId;let Ge;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ge=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):Ge=0,this.setTransition({id:Ye,targetPageId:Ge,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:X,reject:ne,promise:je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),je.catch(We=>Promise.reject(We))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ba(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Pm(n){return"imperative"!==n}let wu=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new Bn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Xc(this.skipLocationChange),replaceUrl:Xc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rs),h.Y36(Bs),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Xc(n){return""===n||!!n}class Nm{}class OE{preload(e,t){return Xe(null)}}let Tv=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new bv(i,r,p=>t.triggerEvent(new Ea(p)),p=>t.triggerEvent(new uu(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(cr(t=>t instanceof va),bn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,In.D)(i).pipe((0,ya.J)(),(0,ht.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,kn.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rs),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Nm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fm=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=new h.OlP("ROUTER_CONFIGURATION"),Dv=new h.OlP("ROUTER_FORROOT_GUARD"),WS=[ot,{provide:ee,useClass:le},{provide:rs,useFactory:function VE(n,e,t,r,i,s,l={},d,p){const y=new rs(null,n,e,t,r,i,Eh(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function Bm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(E=>{var D,M;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[ee,Gc,ot,h.zs3,h.Sil,yp,Eu,[class FO{},new h.FiY],[class AE{},new h.FiY]]},Gc,{provide:Bs,useFactory:function Um(n){return n.routerState.root},deps:[rs]},Tv,OE,class qS{preload(e,t){return t().pipe(ui(()=>Xe(null)))}},{provide:Eu,useValue:{enableTracing:!1}}];function Lm(){return new h.PXZ("Router",rs)}let PE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[WS,Vm(t),{provide:Dv,useFactory:LE,deps:[[rs,new h.FiY,new h.tp0]]},{provide:Eu,useValue:r||{}},{provide:_e,useFactory:FE,deps:[de,[new h.tBr(Oe),new h.FiY],Eu]},{provide:Fm,useFactory:NE,deps:[rs,fc,Eu]},{provide:Nm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:OE},{provide:h.PXZ,multi:!0,useFactory:Lm},[jm,{provide:h.ip1,multi:!0,useFactory:Sv,deps:[jm]},{provide:Hm,useFactory:BE,deps:[jm]},{provide:h.tb,multi:!0,useExisting:Hm}]]}}static forChild(t){return{ngModule:n,providers:[Vm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Dv,8),h.LFG(rs,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function NE(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Fm(n,e,t)}function FE(n,e,t={}){return t.useHash?new Ue(n,e):new ze(n,e)}function LE(n){return"guarded"}function Vm(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:yp,multi:!0,useValue:n}]}let jm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Bn.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),s=this.injector.get(rs),l=this.injector.get(Eu);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Eu),i=this.injector.get(Tv),s=this.injector.get(Fm),l=this.injector.get(rs),d=this.injector.get(h.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Sv(n){return n.appInitializer.bind(n)}function BE(n){return n.bootstrapListener.bind(n)}const Hm=new h.OlP("Router Initializer");var Av=L(732),V=L(2090),is=L(9681),bo=L(1877),js=L(4859),Jc=L(4986),Dn=L(5813);function $m(){return(0,Rn.e)((n,e)=>{let t,r=!1;n.subscribe(new Un.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function xv(n,e=ps.y){return n=null!=n?n:UE,(0,Rn.e)((t,r)=>{let i,s=!0;t.subscribe(new Un.Q(r,l=>{const d=e(l);(s||!n(i,d))&&(s=!1,i=d,r.next(l))}))})}function UE(n,e){return n===e}var Et,di=L(2011),Hs=(L(5881),L(3942)),we=L(5861),jE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Tl={},Mv=Mv||{},Gt=jE||self;function bp(){}function Gm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ht="closure_uid_"+(1e9*Math.random()>>>0),HE=0;function $E(n,e,t){return n.call.apply(n.bind,arguments)}function GE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$E:GE).apply(null,arguments)}function bs(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Cu(){this.s=this.s,this.o=this.o}Cu.prototype.s=!1,Cu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function ZS(n){Object.prototype.hasOwnProperty.call(n,Ht)&&n[Ht]||(n[Ht]=++HE)}(this)},Cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ep(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function kv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Gm(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bi.prototype.h=function(){this.defaultPrevented=!0};var BO=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",bp,e),Gt.removeEventListener("test",bp,e)}catch(t){}return n}();function Cp(n){return/^[\s\xa0]*$/.test(n)}var KS=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bh(n,e){return n<e?-1:n>e?1:0}function ed(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function wo(n){return-1!=ed().indexOf(n)}function Ip(n){return Ip[" "](n),n}Ip[" "]=bp;var zm,n,UO=wo("Opera"),Uh=wo("Trident")||wo("MSIE"),zE=wo("Edge"),Pv=zE||Uh,qE=wo("Gecko")&&!(-1!=ed().toLowerCase().indexOf("webkit")&&!wo("Edge"))&&!(wo("Trident")||wo("MSIE"))&&!wo("Edge"),WE=-1!=ed().toLowerCase().indexOf("webkit")&&!wo("Edge");function YS(){var n=Gt.document;return n?n.documentMode:void 0}e:{var ZE="",qm=(n=ed(),qE?/rv:([^\);]+)(\)|;)/.exec(n):zE?/Edge\/([\d\.]+)/.exec(n):Uh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):WE?/WebKit\/(\S+)/.exec(n):UO?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qm&&(ZE=qm?qm[1]:""),Uh){var Wm=YS();if(null!=Wm&&Wm>parseFloat(ZE)){zm=String(Wm);break e}}zm=ZE}var QS={};var jO=Gt.document&&Uh&&(YS()||parseInt(zm,10))||void 0;function Zm(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qE){e:{try{Ip(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:HO[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zm.X.h.call(this)}}vi(Zm,bi);var HO={2:"touch",3:"pen",4:"mouse"};Zm.prototype.h=function(){Zm.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Km="closure_listenable_"+(1e6*Math.random()|0),$O=0;function GO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++$O,this.ba=this.ea=!1}function Fv(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function YE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Dl(n){const e={};for(const t in n)e[t]=n[t];return e}const Ym="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Ym.length;s++)t=Ym[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tp(n){this.src=n,this.g={},this.h=0}function Dp(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=ka(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Fv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qm(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}Tp.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=Qm(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new GO(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var Sp="closure_lm_"+(1e6*Math.random()|0),Lv={};function Sl(n,e,t,r,i){if(r&&r.once)return Xm(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Sl(n,e[s],t,r,i);return null}return t=Ap(t),n&&n[Km]?n.N(e,t,wp(r)?!!r.capture:!!r,i):Vv(n,e,t,!1,r,i)}function Vv(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=wp(i)?!!i.capture:!!i,d=td(n);if(d||(n[Sp]=d=new Tp(n)),(t=d.add(e,t,r,l,s)).proxy)return t;if(r=function JS(){const e=eA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BO||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(JE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Xm(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Xm(n,e[s],t,r,i);return null}return t=Ap(t),n&&n[Km]?n.O(e,t,wp(r)?!!r.capture:!!r,i):Vv(n,e,t,!0,r,i)}function XE(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)XE(n,e[s],t,r,i);else r=wp(r)?!!r.capture:!!r,t=Ap(t),n&&n[Km]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qm(s=n.g[e],t,r,i))&&(Fv(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=td(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qm(e,t,r,i)),(t=-1<n?e[n]:null)&&Jm(t))}function Jm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Km])Dp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(JE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=td(e))?(Dp(t,n),0==t.h&&(t.src=null,e[Sp]=null)):Fv(n)}}}function JE(n){return n in Lv?Lv[n]:Lv[n]="on"+n}function eA(n,e){if(n.ba)n=!0;else{e=new Zm(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Jm(n),n=t.call(r,e)}return n}function td(n){return(n=n[Sp])instanceof Tp?n:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ap(n){return"function"==typeof n?n:(n[Iu]||(n[Iu]=function(e){return n.handleEvent(e)}),n[Iu])}function Er(){Cu.call(this),this.i=new Tp(this),this.P=this,this.I=null}function jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;QE(e=new bi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=Al(l,r,!0,e)&&i}if(i=Al(l=e.g=n,r,!0,e)&&i,i=Al(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Al(l=e.g=t[s],r,!1,e)&&i}function Al(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&Dp(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}vi(Er,Cu),Er.prototype[Km]=!0,Er.prototype.removeEventListener=function(n,e,t,r){XE(this,n,e,t,r)},Er.prototype.M=function(){if(Er.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Fv(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Bv=Gt.JSON.stringify;function eC(){var n=Hv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jv,e_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Uv,n=>n.reset());class Uv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nC(n){Gt.setTimeout(()=>{throw n},0)}function xp(n,e){jv||function rC(){var n=Gt.Promise.resolve(void 0);jv=function(){n.then(sC)}}(),iC||(jv(),iC=!0),Hv.add(n,e)}var iC=!1,Hv=new class tC{constructor(){this.h=this.g=null}add(e,t){const r=e_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function sC(){for(var n;n=eC();){try{n.h.call(n.g)}catch(t){nC(t)}var e=e_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}iC=!1}function t_(n,e){Er.call(this),this.h=n||1,this.g=e||Gt,this.j=hi(this.lb,this),this.l=Date.now()}function n_(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function $v(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function oC(n){n.g=$v(()=>{n.g=null,n.i&&(n.i=!1,oC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vi(t_,Er),(Et=t_.prototype).ca=!1,Et.R=null,Et.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),jr(this,"tick"),this.ca&&(n_(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){t_.X.M.call(this),n_(this),delete this.g};class $s extends Cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oC(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mp(n){Cu.call(this),this.h=n,this.g={}}vi(Mp,Cu);var aC=[];function tA(n,e,t,r){Array.isArray(t)||(t&&(aC[0]=t.toString()),t=aC);for(var i=0;i<t.length;i++){var s=Sl(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function nA(n){YE(n.g,function(e,t){this.g.hasOwnProperty(t)&&Jm(e)},n),n.g={}}function Rp(){this.g=!0}function Tu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function iA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return Bv(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}Mp.prototype.M=function(){Mp.X.M.call(this),nA(this)},Mp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rp.prototype.Aa=function(){this.g=!1},Rp.prototype.info=function(){};var nd={},uC=null;function kp(){return uC=uC||new Er}function cC(n){bi.call(this,nd.Pa,n)}function jh(n){const e=kp();jr(e,new cC(e))}function dC(n,e){bi.call(this,nd.STAT_EVENT,n),this.stat=e}function ss(n){const e=kp();jr(e,new dC(e,n))}function Gv(n,e){bi.call(this,nd.Qa,n),this.size=e}function Hh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}nd.Pa="serverreachability",vi(cC,bi),nd.STAT_EVENT="statevent",vi(dC,bi),nd.Qa="timingevent",vi(Gv,bi);var r_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ho={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Op(){}function fC(){}Op.prototype.h=null;var qv,i_={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function s_(){bi.call(this,"d")}function zv(){bi.call(this,"c")}function o_(){}function rd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Mp(this),this.O=sA,this.T=new t_(n=Pv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new pC}function pC(){this.i=null,this.g="",this.h=!1}vi(s_,bi),vi(zv,bi),vi(o_,Op),o_.prototype.g=function(){return new XMLHttpRequest},o_.prototype.i=function(){return{}},qv=new o_;var sA=45e3,$h={},Gh={};function Wv(n,e,t){n.K=1,n.v=Su(xl(e)),n.s=t,n.P=!0,a_(n,null)}function a_(n,e){n.F=Date.now(),Pp(n),n.A=xl(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),vC(t.i,"t",r),n.C=0,t=n.l.H,n.h=new pC,n.g=Gp(n.l,t?e:null,!n.s),0<n.N&&(n.L=new $s(hi(n.La,n,n.g),n.N)),tA(n.S,n.g,"readystatechange",n.ib),e=n.H?Dl(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),jh(),function zO(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var E=y[0];y=y[1];var D=E.split("_");l=2<=D.length&&"type"==D[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function l_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Zv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=oA(n,t),i==Gh){4==e&&(n.o=4,ss(14),r=!1),Tu(n.j,n.m,null,"[Incomplete Response]");break}if(i==$h){n.o=4,ss(15),Tu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tu(n.j,n.m,i,null),c_(n,i)}l_(n)&&i!=Gh&&i!=$h&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ss(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ud(e),e.K=!0,ss(11))):(Tu(n.j,n.m,t,"[Invalid Chunked Response]"),Du(n),Np(n))}function oA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gh:(t=Number(e.substring(t,r)),isNaN(t)?$h:(r+=1)+t>e.length?Gh:(e=e.substr(r,t),n.C=r+t,e))}function Pp(n){n.V=Date.now()+n.O,u_(n,n.O)}function u_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hh(hi(n.gb,n),e)}function Kv(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Np(n){0==n.l.G||n.I||w_(n.l,n)}function Du(n){Kv(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,n_(n.T),nA(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function c_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vp(t.h,n)))if(!n.J&&Vp(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Hh(hi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;b_(t),y_(t)}ob(t),ss(18)}if(1>=Gs(t.h)&&t.ja){try{t.ja()}catch(y){}t.ja=void 0}}else Go(t,11)}else if((n.J||t.g==n)&&b_(t),!Cp(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const E=y[3];null!=E&&(t.ma=E,t.j.info("VER="+t.ma));const D=y[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.J=r=1.5*M,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.h;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(h_(s,s.h),s.h=null))}if(r.D){const X=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.za=X,Xn(r.F,r.D,X))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Au(r,r.H?r.ka:null,r.V),l.J){nb(r.h,l);var d=l,p=r.J;p&&d.setTimeout(p),d.B&&(Kv(d),Pp(d)),r.g=l}else ld(r);0<t.i.length&&v_(t)}else"stop"!=y[0]&&"close"!=y[0]||Go(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Go(t,7):jp(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}jh()}catch(y){}}function Yv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Gm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function mC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Gm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function gC(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Gm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Et=rd.prototype).setTimeout=function(n){this.O=n},Et.ib=function(n){n=n.target;const e=this.L;e&&3==Pa(n)?e.l():this.La(n)},Et.La=function(n){try{if(n==this.g)e:{const E=Pa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||Pv||this.g&&(this.h.h||this.g.fa()||DC(this.g)))){this.I||4!=E||7==e||jh(),Kv(this);var t=this.g.aa();this.Y=t;t:if(l_(this)){var r=DC(this.g);n="";var i=r.length,s=4==Pa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Du(this),Np(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function rA(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,E,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cp(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ss(12),Du(this),Np(this);break e}Tu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,c_(this,t)}this.P?(Zv(this,E,l),Pv&&this.i&&3==E&&(tA(this.S,this.T,"tick",this.hb),this.T.start())):(Tu(this.j,this.m,l,null),c_(this,l)),4==E&&Du(this),this.i&&!this.I&&(4==E?w_(this.l,this):(this.i=!1,Pp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ss(12)):(this.o=0,ss(13)),Du(this),Np(this)}}}catch(E){}},Et.hb=function(){if(this.g){var n=Pa(this.g),e=this.g.fa();this.C<e.length&&(Kv(this),Zv(this,n,e),this.i&&4!=n&&Pp(this))}},Et.cancel=function(){this.I=!0,Du(this)},Et.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function lC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jh(),ss(17)),Du(this),this.o=2,Np(this)):u_(this,this.V-n)};var Oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function id(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof id){this.h=void 0!==e?e:n.h,Qv(this,n.j),this.s=n.s,this.g=n.g,zh(this,n.m),this.l=n.l,e=n.i;var t=new Lp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Xv(this,t),this.o=n.o}else n&&(t=String(n).match(Oa))?(this.h=!!e,Qv(this,t[1]||"",!0),this.s=Fp(t[2]||""),this.g=Fp(t[3]||"",!0),zh(this,t[4]),this.l=Fp(t[5]||"",!0),Xv(this,t[6]||"",!0),this.o=Fp(t[7]||"")):(this.h=!!e,this.i=new Lp(null,this.h))}function xl(n){return new id(n)}function Qv(n,e,t){n.j=t?Fp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Xv(n,e,t){e instanceof Lp?(n.i=e,function Wh(n,e){e&&!n.j&&(Ml(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(od(this,r),vC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=sd(e,eb)),n.i=new Lp(e,n.h))}function Xn(n,e,t){n.i.set(e,t)}function Su(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_C),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _C(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}id.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sd(e,Jv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sd(e,Jv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(sd(t,"/"==t.charAt(0)?aA:yC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sd(t,lA)),n.join("")};var Jv=/[#\/\?@]/g,yC=/[#\?:]/g,aA=/[#\?]/g,eb=/[#\?@]/g,lA=/#/g;function Lp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ml(n){n.g||(n.g=new Map,n.h=0,n.i&&function d_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function od(n,e){Ml(n),e=qh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function tb(n,e){return Ml(n),e=qh(n,e),n.g.has(e)}function vC(n,e,t){od(n,e),0<t.length&&(n.i=null,n.g.set(qh(n,e),Ep(t)),n.h+=t.length)}function qh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function bC(n){this.l=n||cA,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=Lp.prototype).add=function(n,e){Ml(this),this.i=null,n=qh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){Ml(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Et.oa=function(){Ml(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Et.W=function(n){Ml(this);let e=[];if("string"==typeof n)tb(this,n)&&(e=e.concat(this.g.get(qh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return Ml(this),this.i=null,tb(this,n=qh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var cA=10;function wC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Gs(n){return n.h?1:n.g?n.g.size:0}function Vp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function h_(n,e){n.g?n.g.add(e):n.h=e}function nb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ep(n.i)}function f_(){}function dA(){this.g=new f_}function hA(n,e,t){const r=t||"";try{Yv(n,function(i,s){let l=i;wp(i)&&(l=Bv(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function p_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Zh(n){this.l=n.ac||null,this.j=n.jb||!1}function ib(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=g_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bC.prototype.cancel=function(){if(this.i=rb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},f_.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},f_.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},vi(Zh,Op),Zh.prototype.g=function(){return new ib(this.l,this.j)},Zh.prototype.i=function(n){return function(){return n}}({}),vi(ib,Er);var g_=0;function EC(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,m_(n)}function m_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=ib.prototype).open=function(n,e){if(this.readyState!=g_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,m_(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bp(this)),this.readyState=g_},Et.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,m_(this)),this.g&&(this.readyState=3,m_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Gt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EC(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Et.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bp(this):m_(this),3==this.readyState&&EC(this)}},Et.Va=function(n){this.g&&(this.response=this.responseText=n,Bp(this))},Et.Ua=function(n){this.g&&(this.response=n,Bp(this))},Et.ga=function(){this.g&&Bp(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ib.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qO=Gt.JSON.parse;function hr(n){Er.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=CC,this.K=this.L=!1}vi(hr,Er);var CC="",IC=/^https?$/i,TC=["POST","PUT"];function Eo(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pA(n),Up(n)}function pA(n){n.D||(n.D=!0,jr(n,"complete"),jr(n,"error"))}function gA(n){if(n.h&&void 0!==Mv&&(!n.C[1]||4!=Pa(n)||2!=n.aa()))if(n.v&&4==Pa(n))$v(n.Ha,0,n);else if(jr(n,"readystatechange"),4==Pa(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(Oa)[1]||null;if(!i&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;i=s.substr(0,s.length-1)}r=!IC.test(i?i.toLowerCase():"")}t=r}if(t)jr(n,"complete"),jr(n,"success");else{n.m=6;try{var l=2<Pa(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.aa()+"]",pA(n)}}finally{Up(n)}}}function Up(n,e){if(n.g){sb(n);const t=n.g,r=n.C[0]?bp:null;n.g=null,n.C=null,e||jr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function sb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Pa(n){return n.g?n.g.readyState:0}function DC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case CC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function mA(n){let e="";return YE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function __(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mA(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function ad(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SC(n){this.Ca=0,this.i=[],this.j=new Rp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ad("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ad("baseRetryDelayMs",5e3,n),this.bb=ad("retryDelaySeedMs",1e4,n),this.$a=ad("forwardChannelMaxRetries",2,n),this.ta=ad("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new bC(n&&n.concurrentRequestLimit),this.Fa=new dA,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function jp(n){if(AC(n),3==n.G){var e=n.U++,t=xl(n.F);Xn(t,"SID",n.I),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),Hp(n,t),(e=new rd(n,n.j,e,void 0)).K=2,e.v=Su(xl(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Gp(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pp(e)}ki(n)}function y_(n){n.g&&(ud(n),n.g.cancel(),n.g=null)}function AC(n){y_(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),b_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function v_(n){wC(n.h)||n.m||(n.m=!0,xp(n.Ja,n),n.C=0)}function xC(n,e){var t;t=e?e.m:n.U++;const r=xl(n.F);Xn(r,"SID",n.I),Xn(r,"RID",t),Xn(r,"AID",n.T),Hp(n,r),n.o&&n.s&&__(r,n.o,n.s),t=new rd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$p(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),h_(n.h,t),Wv(t,r,e)}function Hp(n,e){n.ia&&YE(n.ia,function(t,r){Xn(e,r,t)}),n.l&&Yv({},function(t,r){Xn(e,r,t)})}function $p(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const E=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),d=!1;else try{hA(E,l,"req"+y+"_")}catch(D){r&&r(E)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function ld(n){n.g||n.u||(n.Z=1,xp(n.Ia,n),n.A=0)}function ob(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Hh(hi(n.Ia,n),$o(n,n.A)),n.A++,0))}function ud(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function MC(n){n.g=new rd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=xl(n.sa);Xn(e,"RID","rpc"),Xn(e,"SID",n.I),Xn(e,"CI",n.L?"0":"1"),Xn(e,"AID",n.T),Xn(e,"TYPE","xmlhttp"),Hp(n,e),n.o&&n.s&&__(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Su(xl(e)),t.s=null,t.P=!0,a_(t,n)}function b_(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function w_(n,e){var t=null;if(n.g==e){b_(n),ud(n),n.g=null;var r=2}else{if(!Vp(n.h,e))return;t=e.D,nb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;jr(r=kp(),new Gv(r,t)),v_(n)}else ld(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function _A(n,e){return!(Gs(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Hh(hi(n.Ja,n,e),$o(n,n.C)),n.C++,0)))}(n,e)||2==r&&ob(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Go(n,5);break;case 4:Go(n,10);break;case 3:Go(n,6);break;default:Go(n,2)}}function $o(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Go(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.kb,n);t||(t=new id("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||Qv(t,"https"),Su(t)),function fA(n,e){const t=new Rp;if(Gt.Image){const r=new Image;r.onload=bs(p_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bs(p_,t,r,"TestLoadImage: error",!1,e),r.onabort=bs(p_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bs(p_,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ss(2);n.G=0,n.l&&n.l.va(e),ki(n),AC(n)}function ki(n){if(n.G=0,n.la=[],n.l){const e=rb(n.h);(0!=e.length||0!=n.i.length)&&(kv(n.la,e),kv(n.la,n.i),n.h.i.length=0,Ep(n.i),n.i.length=0),n.l.ua()}}function Au(n,e,t){var r=t instanceof id?xl(t):new id(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),zh(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new id(null,void 0);r&&Qv(s,r),e&&(s.g=e),i&&zh(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Xn(r,t,e),Xn(r,"VER",n.ma),Hp(n,r),r}function Gp(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Da&&!n.ra?new Zh({jb:!0}):n.ra)).Ka(n.H),e}function zs(){}function Kh(){if(Uh&&!(10<=Number(jO)))throw Error("Environmental error: no available transport.")}function wi(n,e){Er.call(this),this.g=new SC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Cp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zo(this)}function cd(n){s_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dd(){zv.call(this),this.status=1}function zo(n){this.g=n}(Et=hr.prototype).Ka=function(n){this.L=n},Et.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qv.g(),this.C=function hC(n){return n.h||(n.h=n.i())}(this.u?this.u:qv),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Eo(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=ka(TC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sb(this),0<this.B&&((this.K=function WO(n){return Uh&&function Nv(){return function Ov(n){var e=QS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=KS(String(zm)).split("."),t=KS("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Bh(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Bh(0==i[2].length,0==s[2].length)||Bh(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=$v(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Eo(this,s)}},Et.qa=function(){void 0!==Mv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jr(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jr(this,"complete"),jr(this,"abort"),Up(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Up(this,!0)),hr.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?gA(this):this.fb())},Et.fb=function(){gA(this)},Et.aa=function(){try{return 2<Pa(this)?this.g.status:-1}catch(n){return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Et.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qO(e)}},Et.Ea=function(){return this.m},Et.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=SC.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new rd(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=Dl(s),QE(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$p(this,i,e),Xn(t=xl(this.F),"RID",n),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),Hp(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(mA(s)))+"&"+e:this.o&&__(t,this.o,s)),h_(this.h,i),this.Ya&&Xn(t,"TYPE","init"),this.O?(Xn(t,"$req",e),Xn(t,"SID","null"),i.Z=!0,Wv(i,t,null)):Wv(i,t,e),this.G=2}}else 3==this.G&&(n?xC(this,n):0==this.i.length||wC(this.h)||xC(this))},Et.Ia=function(){if(this.u=null,MC(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Hh(hi(this.eb,this),n)}},Et.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ss(10),y_(this),MC(this))},Et.cb=function(){null!=this.v&&(this.v=null,y_(this),ob(this),ss(19))},Et.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ss(2)):(this.j.info("Failed to ping google.com"),ss(1))},(Et=zs.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Ra=function(){},Kh.prototype.g=function(n,e){return new wi(n,e)},vi(wi,Er),wi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ss(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Au(n,null,n.V),v_(n)},wi.prototype.close=function(){jp(this.g)},wi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Bv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&v_(e)},wi.prototype.M=function(){this.g.l=null,delete this.j,jp(this.g),delete this.g,wi.X.M.call(this)},vi(cd,s_),vi(dd,zv),vi(zo,zs),zo.prototype.xa=function(){jr(this.g,"a")},zo.prototype.wa=function(n){jr(this.g,new cd(n))},zo.prototype.va=function(n){jr(this.g,new dd)},zo.prototype.ua=function(){jr(this.g,"b")},Kh.prototype.createWebChannel=Kh.prototype.g,wi.prototype.send=wi.prototype.u,wi.prototype.open=wi.prototype.m,wi.prototype.close=wi.prototype.close,r_.NO_ERROR=0,r_.TIMEOUT=8,r_.HTTP_ERROR=6,Ho.COMPLETE="complete",fC.EventType=i_,i_.OPEN="a",i_.CLOSE="b",i_.ERROR="c",i_.MESSAGE="d",Er.prototype.listen=Er.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.Oa,hr.prototype.getLastErrorCode=hr.prototype.Ea,hr.prototype.getStatus=hr.prototype.aa,hr.prototype.getResponseJson=hr.prototype.Sa,hr.prototype.getResponseText=hr.prototype.fa,hr.prototype.send=hr.prototype.da,hr.prototype.setWithCredentials=hr.prototype.Ka;var Yh=Tl.createWebChannelTransport=function(){return new Kh},Qh=Tl.getStatEventTarget=function(){return kp()},xu=Tl.ErrorCode=r_,Xh=Tl.EventType=Ho,Jh=Tl.Event=nd,ab=Tl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},RC=Tl.FetchXmlHttpFactory=Zh,zp=Tl.WebChannel=fC,kC=Tl.XhrIo=hr;const lb="@firebase/firestore";class fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");let hd="9.14.0";const Rl=new bo.Yd("@firebase/firestore");function E_(){return Rl.logLevel}function Be(n,...e){if(Rl.logLevel<=bo.in.DEBUG){const t=e.map(C_);Rl.debug(`Firestore (${hd}): ${n}`,...t)}}function Hr(n,...e){if(Rl.logLevel<=bo.in.ERROR){const t=e.map(C_);Rl.error(`Firestore (${hd}): ${n}`,...t)}}function Mu(n,...e){if(Rl.logLevel<=bo.in.WARN){const t=e.map(C_);Rl.warn(`Firestore (${hd}): ${n}`,...t)}}function C_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${hd}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function Lt(n,e){n||pt()}function rt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends V.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}}class ub{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cb{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new vA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new fi(e)}}class wA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Lt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ZO{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new wA(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KO{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.A=t.token,new EA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class CA{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function qo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function NC(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new tr(0,0))}static max(){return new Vt(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ef{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ef.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ef?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends ef{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const IA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cr extends ef{construct(e,t,r){return new Cr(e,t,r)}static isValidIdentifier(e){return IA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(s(),i++)}if(s(),l)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cr(t)}static emptyPath(){return new Cr([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(an.fromString(e))}static fromName(e){return new Je(an.fromString(e).popFirst(5))}static empty(){return new Je(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new an(e.slice()))}}class I_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function db(n){return n.fields.find(e=>2===e.kind)}function fd(n){return n.fields.filter(e=>2!==e.kind)}I_.UNKNOWN_ID=-1;class qp{constructor(e,t){this.fieldPath=e,this.kind=t}}class tf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tf(0,Co.min())}}function hb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Co(i,Je.empty(),e)}function T_(n){return new Co(n.readTime,n.key,-1)}class Co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Co(Vt.min(),Je.empty(),-1)}static max(){return new Co(Vt.max(),Je.empty(),-1)}}function Wp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const FC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Io(n){return D_.apply(this,arguments)}function D_(){return D_=(0,we.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==FC)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),D_.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,s=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const s=e.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(E=>{l[y]=E,++d,d===s&&r(l)},E=>i(E))}})}static doWhile(e,t){return new ue((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class nf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new pd(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=S_(r.target.error);this.P.reject(new pd(e,i))}}static open(e,t,r,i){try{return new nf(t,e.transaction(i,r))}catch(s){throw new pd(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QO(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Wo.D((0,V.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),gd(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,V.hl)())return!1;if(Wo.N())return!0;const e=(0,V.z$)(),t=Wo.D(e),r=0<t&&t<10,i=Wo.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new pd(e,d))},s.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,we.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const p=nf.open(s.db,e,l?"readonly":"readwrite",r),y=i(p).next(E=>(p.V(),E)).catch(E=>(p.abort(E),ue.reject(E))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,E="FirebaseError"!==y.name&&d<3;if(Be("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return gd(this.U.delete())}}class pd extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kl(n){return"IndexedDbTransactionError"===n.name}class QO{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gd(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),gd(this.store.add(e))}get(e){return gd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),gd(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),gd(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(l,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ue((s,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=s=>{const l=S_(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new fb(d),y=t(d.primaryKey,d.value,p);if(y instanceof ue){const E=y.catch(D=>(p.done(),ue.reject(D)));r.push(E)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gd(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=S_(r.target.error);t(i)}})}let pb=!1;function S_(n){const e=Wo.D((0,V.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout(()=>{throw r},0)),r}}return n}class AA{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){kl(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Io(r)}yield t.nt(6e4)}))}}class LC{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return ue.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,s)).next(d=>(Be("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=T_(s);Wp(l,r)>0&&(r=l)}),new Co(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function gb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function A_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Hi.at=-1;class Ir{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new x_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new x_(this.root,e,this.comparator,!1)}getReverseIterator(){return new x_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new x_(this.root,e,this.comparator,!0)}}class x_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Ei.RED,this.left=null!=i?i:Ei.EMPTY,this.right=null!=s?s:Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M_(this.data.getIterator())}getIteratorFrom(e){return new M_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class M_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function md(n){return n.hasNext()?n.getNext():void 0}class qs{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new qs([])}unionWith(e){let t=new jn(Cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Jr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const mb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=mb.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tr(n.seconds),nanos:Tr(n.nanos)}}function Tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ku(n){return"string"==typeof n?Jr.fromBase64String(n):Jr.fromUint8Array(n)}function R_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _b(n){const e=n.mapValue.fields.__previous_value__;return R_(e)?_b(e):e}function rf(n){const e=Na(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class BC{constructor(e,t,r,i,s,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Ol{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}function sf(n){return null==n}function k_(n){return 0===n&&1/n==-1/0}function UC(n){return"number"==typeof n&&Number.isInteger(n)&&!k_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zp={nullValue:"NULL_VALUE"};function _d(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?R_(n)?4:vb(n)?9007199254740991:10:pt()}function $n(n,e){if(n===e)return!0;const t=_d(n);if(t!==_d(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rf(n).isEqual(rf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Na(r.timestampValue),l=Na(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ku(n.bytesValue).isEqual(ku(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Tr(r.geoPointValue.latitude)===Tr(i.geoPointValue.latitude)&&Tr(r.geoPointValue.longitude)===Tr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tr(r.integerValue)===Tr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Tr(r.doubleValue),l=Tr(i.doubleValue);return s===l?k_(s)===k_(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return qo(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(gb(s)!==gb(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!$n(s[d],l[d])))return!1;return!0}(n,e);default:return pt()}var i}function af(n,e){return void 0!==(n.values||[]).find(t=>$n(t,e))}function Pu(n,e){if(n===e)return 0;const t=_d(n),r=_d(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=Tr(i.integerValue||i.doubleValue),d=Tr(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return jC(n.timestampValue,e.timestampValue);case 4:return jC(rf(n),rf(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,s){const l=ku(i),d=ku(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const y=zt(l[p],d[p]);if(0!==y)return y}return zt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=zt(Tr(i.latitude),Tr(s.latitude));return 0!==l?l:zt(Tr(i.longitude),Tr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const y=Pu(l[p],d[p]);if(y)return y}return zt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ou.mapValue&&s===Ou.mapValue)return 0;if(i===Ou.mapValue)return 1;if(s===Ou.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const D=zt(d[E],y[E]);if(0!==D)return D;const M=Pu(l[d[E]],p[y[E]]);if(0!==M)return M}return zt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw pt()}}function jC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=Na(n),r=Na(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function yd(n){return yb(n)}function yb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Na(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ku(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=yb(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${yb(r.fields[d])}`;return s+"}"}(n.mapValue):pt();var e}function Nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O_(n){return!!n&&"integerValue"in n}function Fa(n){return!!n&&"arrayValue"in n}function HC(n){return!!n&&"nullValue"in n}function $C(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kp(n){return!!n&&"mapValue"in n}function Yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XO(n){return"nullValue"in n?Zp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nu(Ol.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function GC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nu(Ol.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ou:pt()}function P_(n,e){const t=Pu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Zo(n,e){const t=Pu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(t)}setAll(e){let t=Cr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=Yp(l):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Kp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ru(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Oi(Yp(this.value))}}function zC(n){const e=[];return Ru(n.fields,(t,r)=>{const i=new Cr([t]);if(Kp(r)){const s=zC(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new qs(e)}class pn{constructor(e,t,r,i,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new pn(e,0,Vt.min(),Vt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r){return new pn(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new pn(e,2,t,Vt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Vt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ko{constructor(e,t=null,r=[],i=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=d,this.ht=null}}function To(n,e=null,t=[],r=[],i=null,s=null,l=null){return new Ko(n,e,t,r,i,s,l)}function Fu(n){const e=rt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+yd(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yd(r)).join(",")),e.ht=t}return e.ht}function Qp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!B_(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!$n(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Eb(n.startAt,e.startAt)&&Eb(n.endAt,e.endAt)}function N_(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function F_(n,e){return n.filters.filter(t=>t instanceof $r&&t.field.isEqual(e))}function WC(n,e,t){let r=Zp,i=!0;for(const s of F_(n,e)){let l=Zp,d=!0;switch(s.op){case"<":case"<=":l=XO(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=Zp}P_({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];P_({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function L_(n,e,t){let r=Ou,i=!0;for(const s of F_(n,e)){let l=Ou,d=!0;switch(s.op){case">=":case">":l=GC(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Ou}Zo({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Zo({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class $r extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new xA(e,t,r):"array-contains"===t?new KC(e,r):"in"===t?new V_(e,r):"not-in"===t?new RA(e,r):"array-contains-any"===t?new YC(e,r):new $r(e,t,r)}static lt(e,t,r){return"in"===t?new ZC(e,r):new MA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Pu(t,this.value)):null!==t&&_d(this.value)===_d(t)&&this.ft(Pu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xA extends $r{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.ft(t)}}class ZC extends $r{constructor(e,t){super(e,"in",t),this.keys=bb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MA extends $r{constructor(e,t){super(e,"not-in",t),this.keys=bb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class KC extends $r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fa(t)&&af(t.arrayValue,this.value)}}class V_ extends $r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&af(this.value.arrayValue,t)}}class RA extends $r{constructor(e,t){super(e,"not-in",t)}matches(e){if(af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!af(this.value.arrayValue,t)}}class YC extends $r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>af(this.value.arrayValue,r))}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function B_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function wb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?Je.comparator(Je.fromName(l.referenceValue),t.key):Pu(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Eb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}class La{constructor(e,t=null,r=[],i=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function Cb(n,e,t,r,i,s,l,d){return new La(n,e,t,r,i,s,l,d)}function vd(n){return new La(n)}function Ib(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function U_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function j_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Tb(n){return null!==n.collectionGroup}function lf(n){const e=rt(n);if(null===e._t){e._t=[];const t=j_(e),r=U_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Lu(t)),e._t.push(new Lu(Cr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Lu(Cr.keyField(),s))}}}return e._t}function os(n){const e=rt(n);if(!e.wt)if("F"===e.limitType)e.wt=To(e.path,e.collectionGroup,lf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of lf(e))t.push(new Lu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Pl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pl(e.startAt.position,e.startAt.inclusive):null;e.wt=To(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function H_(n,e,t){return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return Qp(os(n),os(e))&&n.limitType===e.limitType}function QC(n){return`${Fu(os(n))}|lt:${n.limitType}`}function Db(n){return`Query(target=${function qC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${yd(r.value)}`;var r}).join(", ")}]`),sf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>yd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>yd(t)).join(",")),`Target(${e})`}(os(n))}; limitType=${n.limitType})`}function Sb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const d=wb(i,s,l);return i.inclusive?d<=0:d<0}(t.startAt,lf(t),r)||t.endAt&&!function(i,s,l){const d=wb(i,s,l);return i.inclusive?d>=0:d>0}(t.endAt,lf(t),r)));var t,r}function XC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JC(n){return(e,t)=>{let r=!1;for(const i of lf(n)){const s=kA(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function kA(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,s,l){const d=s.data.field(i),p=l.data.field(i);return null!==d&&null!==p?Pu(d,p):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function eI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k_(e)?"-0":e}}function tI(n){return{integerValue:""+n}}function nI(n,e){return UC(e)?tI(e):eI(n,e)}class $_{constructor(){this._=void 0}}function OA(n,e,t){return n instanceof bd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Vu?Ab(n,e):n instanceof Bu?xb(n,e):function(r,i){const s=rI(r,i),l=Mb(s)+Mb(r.yt);return O_(s)&&O_(r.yt)?tI(l):eI(r.It,l)}(n,e)}function PA(n,e,t){return n instanceof Vu?Ab(n,e):n instanceof Bu?xb(n,e):t}function rI(n,e){return n instanceof wd?O_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bd extends $_{}class Vu extends $_{constructor(e){super(),this.elements=e}}function Ab(n,e){const t=Rb(e);for(const r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bu extends $_{constructor(e){super(),this.elements=e}}function xb(n,e){let t=Rb(e);for(const r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}class wd extends $_{constructor(e,t){super(),this.It=e,this.yt=t}}function Mb(n){return Tr(n.integerValue||n.doubleValue)}function Rb(n){return Fa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uf{constructor(e,t){this.field=e,this.transform=t}}class sI{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function G_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class z_{}function Ed(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new cf(n.key,Pn.none()):new Id(n.key,n.data,Pn.none());{const t=n.data,r=Oi.empty();let i=new jn(Cr.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Uu(n.key,r,new qs(i.toArray()),Pn.none())}}function JO(n,e,t){n instanceof Id?function(r,i,s){const l=r.value.clone(),d=oI(r.fieldTransforms,i,s.transformResults);l.setAll(d),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Uu?function(r,i,s){if(!G_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=oI(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(Mt(r)),d.setAll(l),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cd(n,e,t,r){return n instanceof Id?function(i,s,l,d){if(!G_(i.precondition,s))return l;const p=i.value.clone(),y=aI(i.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Uu?function(i,s,l,d){if(!G_(i.precondition,s))return l;const p=aI(i.fieldTransforms,d,s),y=s.data;return y.setAll(Mt(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,G_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function eP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=rI(r.transform,i||null);null!=s&&(null===t&&(t=Oi.empty()),t.set(r.field,s))}return t||null}function kb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qo(t,r,(i,s)=>function iI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vu&&r instanceof Vu||t instanceof Bu&&r instanceof Bu?qo(t.elements,r.elements,$n):t instanceof wd&&r instanceof wd?$n(t.yt,r.yt):t instanceof bd&&r instanceof bd);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Id extends z_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uu extends z_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mt(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function oI(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,d=e.data.field(s.field);r.set(s.field,PA(l,d,t[i]))}return r}function aI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,OA(s,l,e))}return r}class cf extends z_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class df extends z_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NA{constructor(e){this.count=e}}var Dr,ln;function Sr(n){switch(n){default:return pt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function FA(n){if(void 0===n)return Hr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Dr.OK:return ge.OK;case Dr.CANCELLED:return ge.CANCELLED;case Dr.UNKNOWN:return ge.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ge.INTERNAL;case Dr.UNAVAILABLE:return ge.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ge.NOT_FOUND;case Dr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Dr.ABORTED:return ge.ABORTED;case Dr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Dr.DATA_LOSS:return ge.DATA_LOSS;default:return pt()}}(ln=Dr||(Dr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return A_(this.inner)}size(){return this.innerSize}}const LA=new Ir(Je.comparator);function ws(){return LA}const Ob=new Ir(Je.comparator);function hf(...n){let e=Ob;for(const t of n)e=e.insert(t.key,t);return e}function Pb(n){let e=Ob;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yo(){return Jp()}function lI(){return Jp()}function Jp(){return new Nl(n=>n.toString(),(n,e)=>n.isEqual(e))}const VA=new Ir(Je.comparator),eg=new jn(Je.comparator);function Yt(...n){let e=eg;for(const t of n)e=e.add(t);return e}const BA=new jn(zt);function q_(){return BA}class ju{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ju(Vt.min(),i,q_(),ws(),Yt())}}class ff{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ff(r,t,Yt(),Yt(),Yt())}}class tg{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Nb{constructor(e,t){this.targetId=e,this.At=t}}class uI{constructor(e,t,r=Jr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pf{constructor(){this.Rt=0,this.bt=dI(),this.Pt=Jr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new ff(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=dI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ng{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ws(),this.qt=cI(),this.Kt=new jn(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(N_(s))if(0===r){const l=new Je(s.path);this.jt(t,l,pn.newNoDocument(l,Vt.min()))}else Lt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,l)=>{const d=this.Xt(l);if(d){if(s.current&&N_(d.target)){const p=new Je(d.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,pn.newNoDocument(p,e))}s.Dt&&(t.set(l,s.xt()),s.Nt())}});let r=Yt();this.qt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Ut.forEach((s,l)=>l.setReadTime(e));const i=new ju(e,t,this.Kt,this.Ut,r);return this.Ut=ws(),this.qt=cI(),this.Kt=new jn(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new pf,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new jn(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new pf),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function cI(){return new Ir(Je.comparator)}function dI(){return new Ir(Je.comparator)}const UA={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fI{constructor(e,t){this.databaseId=e,this.gt=t}}function gf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function gI(n,e){return gf(n,e.toTimestamp())}function Ci(n){return Lt(!!n),Vt.fromTimestamp(function(e){const t=Na(e);return new tr(t.seconds,t.nanos)}(n))}function Fb(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jA(n){const e=an.fromString(n);return Lt(K_(e)),e}function W_(n,e){return Fb(n.databaseId,e.path)}function Fl(n,e){const t=jA(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(_I(t))}function mI(n,e){return Fb(n.databaseId,e)}function Lb(n){const e=jA(n);return 4===e.length?an.emptyPath():_I(e)}function Hu(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _I(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yI(n,e,t){return{name:W_(n,e),fields:t.value.mapValue.fields}}function Vb(n,e,t){const r=Fl(n,e.name),i=Ci(e.updateTime),s=new Oi({mapValue:{fields:e.fields}}),l=pn.newFoundDocument(r,i,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function ig(n,e){let t;if(e instanceof Id)t={update:yI(n,e.key,e.value)};else if(e instanceof cf)t={delete:W_(n,e.key)};else if(e instanceof Uu)t={update:yI(n,e.key,e.data),updateMask:WA(e.fieldMask)};else{if(!(e instanceof df))return pt();t={verify:W_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof bd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wd)return{fieldPath:s.field.canonicalString(),increment:l.yt};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:gI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function Bb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Pn.updateTime(Ci(i.updateTime)):void 0!==i.exists?Pn.exists(i.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let d=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),d=new bd):"appendMissingElements"in l?d=new Vu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Bu(l.removeAllFromArray.values||[]):"increment"in l?d=new wd(s,l.increment):pt();const p=Cr.fromServerFormat(l.fieldPath);return new uf(p,d)}(n,i)):[];var i;if(e.update){const i=Fl(n,e.update.name),s=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new qs((e.updateMask.fieldPaths||[]).map(y=>Cr.fromServerFormat(y)));return new Uu(i,s,l,t,r)}return new Id(i,s,t,r)}if(e.delete){const i=Fl(n,e.delete);return new cf(i,t)}if(e.verify){const i=Fl(n,e.verify);return new df(i,t)}return pt()}function vI(n,e){return{documents:[mI(n,e.path)]}}function Z_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(E=>function(D){if("=="===D.op){if($C(D.value))return{unaryFilter:{field:mf(D.field),op:"IS_NAN"}};if(HC(D.value))return{unaryFilter:{field:mf(D.field),op:"IS_NULL"}}}else if("!="===D.op){if($C(D.value))return{unaryFilter:{field:mf(D.field),op:"IS_NOT_NAN"}};if(HC(D.value))return{unaryFilter:{field:mf(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(D.field),op:wI(D.op),value:D.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:mf((E=y).field),direction:zA(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.gt||sf(y)?y:{value:y});var y,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function bI(n){let e=Lb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=Td(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Lu(Dd((D=E).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,sf(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new Pl((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Pl(E.values||[],!E.before)}(t.endAt)),Cb(e,i,l,s,d,"F",p,y)}function Td(n){return n?void 0!==n.unaryFilter?[EI(n)]:void 0!==n.fieldFilter?[qA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Td(e)).reduce((e,t)=>e.concat(t)):pt():[]}function zA(n){return UA[n]}function wI(n){return hI[n]}function mf(n){return{fieldPath:n.canonicalString()}}function Dd(n){return Cr.fromServerFormat(n.fieldPath)}function qA(n){return $r.create(Dd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function EI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Dd(n.unaryFilter.field);return $r.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Dd(n.unaryFilter.field);return $r.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Dd(n.unaryFilter.field);return $r.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Dd(n.unaryFilter.field);return $r.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function WA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function as(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ub(e)),e=CI(n.get(t),e);return Ub(e)}function CI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Ub(n){return n+"\x01\x01"}function Va(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&pt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:pt()}s=l+2}return new an(r)}const II=["userId","batchId"];function Y_(n,e){return[n,as(e)]}function Q_(n,e,t){return[n,as(e),t]}const ZA={},TI=["prefixPath","collectionGroup","readTime","documentId"],KA=["prefixPath","collectionGroup","documentId"],YA=["collectionGroup","readTime","prefixPath","documentId"],QA=["canonicalId","targetId"],XA=["targetId","path"],JA=["path","targetId"],ex=["collectionId","parent"],tx=["indexId","uid"],nx=["uid","sequenceNumber"],DI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SI=["indexId","uid","orderedDocumentKey"],rx=["userId","collectionPath","documentId"],ix=["userId","collectionPath","largestBatchId"],AI=["userId","collectionGroup","largestBatchId"],xI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sx=[...xI,"documentOverlays"],MI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],X_=MI,jb=[...X_,"indexConfiguration","indexState","indexEntries"];class J_ extends SA{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ei(n,e){const t=rt(n);return Wo.M(t.ie,e)}class Hb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&JO(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lI();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(i.key)?null:d;const p=Ed(l,d);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(t,r)=>kb(t,r))&&qo(this.baseMutations,e.baseMutations,(t,r)=>kb(t,r))}}class $b{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=VA;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new $b(e,t,r,i)}}class sg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $u{constructor(e,t,r,i,s=Vt.min(),l=Vt.min(),d=Jr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new $u(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gb{constructor(e){this.re=e}}function zb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ey(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:W_(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:gf(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gu(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Gu(e.version)}}var i,s;return r}function ey(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _f(n){const e=new tr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function Sd(n,e){const t=(e.baseMutations||[]).map(s=>Bb(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>Bb(n.re,s)),i=tr.fromMillis(e.localWriteTimeMs);return new Hb(e.batchId,i,t,r)}function Ll(n){const e=_f(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_f(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=os(vd(Lb(i.documents[0])))):r=os(bI(n.query)),new $u(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Jr.fromBase64String(n.resumeToken))}function RI(n,e){const t=Gu(e.snapshotVersion),r=Gu(e.lastLimboFreeSnapshotVersion);let i;i=N_(e.target)?vI(n.re,e.target):Z_(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zu(n){const e=bI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?H_(e,e.limit,"L"):e}function Ad(n,e){return new sg(e.largestBatchId,Bb(n.re,e.overlayMutation))}function kI(n,e){const t=e.path.lastSegment();return[n,as(e.path.popLast()),t]}function ax(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gu(r.readTime),documentKey:as(r.documentKey.path),largestBatchId:r.largestBatchId}}class OI{getBundleMetadata(e,t){return PI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:_f(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return PI(e).put({bundleId:(r=t).id,createTime:Gu(Ci(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return NI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:zu(i.bundledQuery),readTime:_f(i.readTime)};var i})}saveNamedQuery(e,t){return NI(e).put({name:(r=t).name,readTime:Gu(Ci(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PI(n){return ei(n,"bundles")}function NI(n){return ei(n,"namedQueries")}class ty{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ty(e,t.uid||"")}getOverlay(e,t){return og(e).get(kI(this.userId,t)).next(r=>r?Ad(this.It,r):null)}getOverlays(e,t){const r=Yo();return ue.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const d=new sg(t,l);i.push(this.ue(e,d))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(as(l.getCollectionPath())));const s=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(og(e).Y("collectionPathOverlayIndex",d))}),ue.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Yo(),s=as(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return og(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=Ad(this.It,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Yo();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return og(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,E)=>{const D=Ad(this.It,y);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):E.done()}).next(()=>s)}ue(e,t){return og(e).put(function(r,i,s){const[l,d,p]=kI(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ig(r.re,s.mutation)}}(this.It,this.userId,t))}}function og(n){return ei(n,"documentOverlays")}class qu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Tr(e.integerValue));else if("doubleValue"in e){const r=Tr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),k_(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ku(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?vb(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):pt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Je.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function FI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ny(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=FI(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}qu.Te=new qu;class ry{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=ny(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=ny(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ag{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class lx{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class yf{constructor(){this.Be=new ry,this.Le=new ag(this.Be),this.Ue=new lx(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Wu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wu(this.indexId,this.documentKey,this.arrayValue,r)}}function xd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=LI(n.arrayValue,e.arrayValue),0!==t?t:(t=LI(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function LI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ux{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=db(e);if(void 0!==t&&!this.ze(t))return!1;const r=fd(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class qb{constructor(){this.Ye=new Wb}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Co.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Co.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class Wb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(an.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(an.comparator)).toArray()}}const Zb=new Uint8Array(0);class cx{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Wb,this.Ze=new Nl(r=>Fu(r),(r,i)=>Qp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:as(i)};return VI(e).put(s)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[NC(t),""],!1,!0);return VI(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Va(l.parent))}return r})}addFieldIndex(e,t){const r=lg(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Ua(e);return s.next(d=>{l.put(ax(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=lg(e),i=Ua(e),s=Ba(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ba(e);let i=!0;const s=new Map;return ue.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),s.set(l,d)})).next(()=>{if(i){let l=Yt();const d=[];return ue.forEach(s,(p,y)=>{var E;Be("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ge=>`${Ge.fieldPath}:${Ge.kind}`).join(",")}`} to execute ${Fu(t)}`);const D=function(Ge,We){const Ct=db(We);if(void 0===Ct)return null;for(const Dt of F_(Ge,Ct.fieldPath))switch(Dt.op){case"array-contains-any":return Dt.value.arrayValue.values||[];case"array-contains":return[Dt.value]}return null}(y,p),M=function(Ge,We){const Ct=new Map;for(const Dt of fd(We))for(const dn of F_(Ge,Dt.fieldPath))switch(dn.op){case"==":case"in":Ct.set(Dt.fieldPath.canonicalString(),dn.value);break;case"not-in":case"!=":return Ct.set(Dt.fieldPath.canonicalString(),dn.value),Array.from(Ct.values())}return null}(y,p),P=function(Ge,We){const Ct=[];let Dt=!0;for(const dn of fd(We)){const gi=0===dn.kind?WC(Ge,dn.fieldPath,Ge.startAt):L_(Ge,dn.fieldPath,Ge.startAt);Ct.push(gi.value),Dt&&(Dt=gi.inclusive)}return new Pl(Ct,Dt)}(y,p),B=function(Ge,We){const Ct=[];let Dt=!0;for(const dn of fd(We)){const gi=0===dn.kind?L_(Ge,dn.fieldPath,Ge.endAt):WC(Ge,dn.fieldPath,Ge.endAt);Ct.push(gi.value),Dt&&(Dt=gi.inclusive)}return new Pl(Ct,Dt)}(y,p),X=this.nn(p,y,P),ne=this.nn(p,y,B),je=this.sn(p,y,M),Ye=this.rn(p.indexId,D,X,P.inclusive,ne,B.inclusive,je);return ue.forEach(Ye,Ge=>r.J(Ge,t.limit).next(We=>{We.forEach(Ct=>{const Dt=Je.fromSegments(Ct.documentKey);l.has(Dt)||(l=l.add(Dt),d.push(Dt))})}))}).next(()=>d)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,l,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const M=t?this.on(t[D/y]):Zb,P=this.un(e,M,r[D%y],i),B=this.cn(e,M,s[D%y],l),X=d.map(ne=>this.un(e,M,ne,!0));E.push(...this.createRange(P,B,X))}return E}un(e,t,r,i){const s=new Wu(e,Je.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new Wu(e,Je.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new ux(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const d of s)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(l){let d=new jn(Cr.comparator),p=!1;for(const y of l.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:d=d.add(E.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new yf;for(const i of fd(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.qe(i.kind);qu.Te.ce(s,l)}return r.$e()}on(e){const t=new yf;return qu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new yf;return qu.Te.ce(Nu(this.databaseId,t),r.qe(function(i){const s=fd(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new yf);let s=0;for(const l of fd(e)){const d=r[s++];for(const p of i)if(this.ln(t,l.fieldPath)&&Fa(d))i=this.fn(i,l,d);else{const y=p.qe(l.kind);qu.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new yf;p.seed(d.$e()),qu.Te.ce(l,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof $r&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lg(e),i=Ua(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return ue.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(y,E){const D=E?new tf(E.sequenceNumber,new Co(_f(E.readTime),new Je(Va(E.documentKey)),E.largestBatchId)):tf.empty(),M=y.fields.map(([P,B])=>new qp(Cr.fromServerFormat(P),B));return new I_(y.indexId,y.collectionGroup,M,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lg(e),s=Ua(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ue.forEach(d,p=>s.put(ax(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ue.forEach(d,p=>this.wn(e,i,p).next(y=>{const E=this.mn(s,p);return y.isEqual(E)?ue.resolve():this.gn(e,s,p,y,E)}))))})}yn(e,t,r,i){return Ba(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Ba(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ba(e);let s=new jn(xd);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{s=s.add(new Wu(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(e,t){let r=new jn(xd);const i=this.an(t,e);if(null==i)return r;const s=db(t);if(null!=s){const l=e.data.field(s.fieldPath);if(Fa(l))for(const d of l.arrayValue.values||[])r=r.add(new Wu(t.indexId,e.key,this.on(d),i))}else r=r.add(new Wu(t.indexId,e.key,Zb,i));return r}gn(e,t,r,i,s){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,y,E,D){const M=d.getIterator(),P=p.getIterator();let B=md(M),X=md(P);for(;B||X;){let ne=!1,je=!1;if(B&&X){const Ye=y(B,X);Ye<0?je=!0:Ye>0&&(ne=!0)}else null!=B?je=!0:ne=!0;ne?(E(X),X=md(P)):je?(D(B),B=md(M)):(B=md(M),X=md(P))}}(i,s,xd,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),ue.waitFor(l)}_n(e){let t=1;return Ua(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>xd(l,d)).filter((l,d,p)=>!d||0!==xd(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=xd(l,e),p=xd(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(l),i.push(l.Ke());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2)s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Zb,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Zb,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dx)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||pt())).next(dx)}}function VI(n){return ei(n,"collectionParents")}function Ba(n){return ei(n,"indexEntries")}function lg(n){return ei(n,"indexConfiguration")}function Ua(n){return ei(n,"indexState")}function dx(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Wp(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Co(e.readTime,e.documentKey,t)}const Kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:l},(E,D,M)=>(d++,M.delete()));s.push(p.next(()=>{Lt(1===d)}));const y=[];for(const E of t.mutations){const D=Q_(e,E.key.path,t.batchId);s.push(i.delete(D)),y.push(E.key)}return ue.waitFor(s).next(()=>y)}function ug(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(41943040,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class Yb{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Yb(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ja(e).Z({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Md(e),l=ja(e);return l.add({}).next(d=>{Lt("number"==typeof d);const p=new Hb(d,t,r,i),y=function(M,P,B){const X=B.baseMutations.map(je=>ig(M.re,je)),ne=B.mutations.map(je=>ig(M.re,je));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:X,mutations:ne}}(this.It,this.userId,p),E=[];let D=new jn((M,P)=>zt(M.canonicalString(),P.canonicalString()));for(const M of i){const P=Q_(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),E.push(l.put(y)),E.push(s.put(P,ZA))}return D.forEach(M=>{E.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),ue.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return ja(e).get(t).next(r=>r?(Lt(r.userId===this.userId),Sd(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ja(e).Z({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(Lt(d.batchId>=r),s=Sd(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ja(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ja(e).W("userMutationsIndex",t).next(r=>r.map(i=>Sd(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Y_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Md(e).Z({range:i},(l,d,p)=>{const[y,E,D]=l,M=Va(E);if(y===this.userId&&t.path.isEqual(M))return ja(e).get(D).next(P=>{if(!P)throw pt();Lt(P.userId===this.userId),s.push(Sd(this.It,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(zt);const i=[];return t.forEach(s=>{const l=Y_(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=Md(e).Z({range:d},(y,E,D)=>{const[M,P,B]=y,X=Va(P);M===this.userId&&s.path.isEqual(X)?r=r.add(B):D.done()});i.push(p)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Y_(this.userId,r),l=IDBKeyRange.lowerBound(s);let d=new jn(zt);return Md(e).Z({range:l},(p,y,E)=>{const[D,M,P]=p,B=Va(M);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(d=d.add(P)):E.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ja(e).get(s).next(l=>{if(null===l)throw pt();Lt(l.userId===this.userId),r.push(Sd(this.It,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hx(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Md(e).Z({range:r},(s,l,d)=>{if(s[0]===this.userId){const p=Va(s[1]);i.push(p)}else d.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return Qb(e,this.userId,t)}Rn(e){return BI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qb(n,e,t){const r=Y_(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return Md(n).Z({range:s,X:!0},(d,p,y)=>{const[E,D,M]=d;E===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function ja(n){return ei(n,"mutations")}function Md(n){return ei(n,"documentMutations")}function BI(n){return ei(n,"mutationQueues")}class Rd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rd(0)}static vn(){return new Rd(-1)}}class fx{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Rd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Vt.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vf(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return vf(e).Z((l,d)=>{const p=Ll(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ue.waitFor(s)).next(()=>i)}forEachTarget(e,t){return vf(e).Z((r,i)=>{const s=Ll(i);t(s)})}Vn(e){return UI(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Sn(e,t){return UI(e).put("targetGlobalKey",t)}Dn(e,t){return vf(e).put(RI(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return vf(e).Z({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const y=Ll(d);Qp(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Zu(e);return t.forEach(l=>{const d=as(l.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zu(e);return ue.forEach(t,s=>{const l=as(s.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Zu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zu(e);let s=Yt();return i.Z({range:r,X:!0},(l,d,p)=>{const y=Va(l[1]),E=new Je(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=as(t.path),i=IDBKeyRange.bound([r],[NC(r)],!1,!0);let s=0;return Zu(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}se(e,t){return vf(e).get(t).next(r=>r?Ll(r):null)}}function vf(n){return ei(n,"targets")}function UI(n){return ei(n,"targetGlobal")}function Zu(n){return ei(n,"targetDocuments")}function jI([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class px{constructor(e){this.xn=e,this.buffer=new jn(jI),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){kl(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Io(r)}yield t.Fn(3e5)}))}}class cg{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Hi.at);const r=new px(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Kb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kb):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,l,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),E_()<=bo.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class HI{constructor(e,t){this.db=e,this.garbageCollector=new cg(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return dg(e,r)}removeReference(e,t,r){return dg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dg(e,t)}Gn(e,t){return function(r,i){let s=!1;return BI(r).tt(l=>Qb(r,l,i).next(d=>(d&&(s=!0),ue.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(l,d)=>{if(d<=t){const p=this.Gn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Vt.min()),Zu(e).delete([0,as(l.path)])))});i.push(p)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dg(e,t)}Kn(e,t){const r=Zu(e);let i,s=Hi.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(s!==Hi.at&&t(new Je(Va(i)),s),s=y,i=p):s=Hi.at}).next(()=>{s!==Hi.at&&t(new Je(Va(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dg(n,e){return Zu(n).put((r=n.currentSequenceNumber,{targetId:0,path:as(e.path),sequenceNumber:r}));var r}class Xb{constructor(){this.changes=new Nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $I{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ku(e).put(r)}removeEntry(e,t,r){return Ku(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ey(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=pn.newInvalidDocument(t);return Ku(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hg(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return Ku(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hg(t))},(i,s)=>{r={document:this.jn(t,s),size:ug(s)}}).next(()=>r)}getEntries(e,t){let r=ws();return this.zn(e,t,(i,s)=>{const l=this.jn(i,s);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=ws(),i=new Ir(Je.comparator);return this.zn(e,t,(s,l)=>{const d=this.jn(s,l);r=r.insert(s,d),i=i.insert(s,ug(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new jn(WI);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(hg(i.first()),hg(i.last())),l=i.getIterator();let d=l.getNext();return Ku(e).Z({index:"documentKeyIndex",range:s},(p,y,E)=>{const D=Je.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&WI(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?E.j(hg(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ey(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ku(e).W(IDBKeyRange.bound(i,s,!0)).next(l=>{let d=ws();for(const p of l){const y=this.jn(Je.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=ws();const l=qI(t,r),d=qI(t,Co.max());return Ku(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,E)=>{const D=this.jn(Je.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new GI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zI(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Qn(e,t){return zI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function ox(n,e){let t;if(e.document)t=Vb(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=_f(e.noDocument.readTime);t=pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=Je.fromSegments(e.unknownDocument.path),i=_f(e.unknownDocument.version);t=pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return pn.newInvalidDocument(e)}}function Jb(n){return new $I(n)}class GI extends Xb{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Nl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((s,l)=>zt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=zb(this.Yn.It,l);i=i.add(s.path.popLast()),r+=ug(p)-d.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=zb(this.Yn.It,l.convertToNoDocument(Vt.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,l)=>{this.Xn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function zI(n){return ei(n,"remoteDocumentGlobal")}function Ku(n){return ei(n,"remoteDocumentsV14")}function hg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qI(n,e){const t=e.documentKey.path.toArray();return[n,ey(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=zt(t[s],r[s]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class mx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bf{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Cd(r.mutation,i,qs.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Yo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=hf();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let s=ws();const l=Jp(),d=Jp();return t.forEach((p,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Uu)?s=s.insert(y.key,y):void 0!==E&&(l.set(y.key,E.mutation.getFieldMask()),Cd(E.mutation,y,E.mutation.getFieldMask(),tr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,E)=>l.set(y,E)),t.forEach((y,E)=>{var D;return d.set(y,new mx(E,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Jp();let i=new Ir((l,d)=>l-d),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=r.get(p)||qs.empty();E=d.applyToLocalView(y,E),r.set(p,E);const D=(i.get(d.batchId)||Yt()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,D=lI();E.forEach(M=>{if(!s.has(M)){const P=Ed(t.get(M),r.get(M));null!==P&&D.set(M,P),s=s.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Tb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ue.resolve(Yo());let d=-1,p=s;return l.next(y=>ue.forEach(y,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(E)?ue.resolve():this.getBaseDocument(e,E,D).next(M=>{p=p.insert(E,M)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Yt())).next(E=>({batchId:d,changes:Pb(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=hf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=hf();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,d=>{const p=(y=t,E=d.child(i),new La(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((d,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,pn.newInvalidDocument(y)))});let l=hf();return i.forEach((d,p)=>{const y=s.get(d);void 0!==y&&Cd(y.mutation,p,qs.empty(),tr.now()),Sb(t,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(pn.newInvalidDocument(t))}}class _x{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ci(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:zu(r.bundledQuery),readTime:Ci(r.readTime)}),ue.resolve();var r}}class e0{constructor(){this.overlays=new Ir(Je.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yo();return ue.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Yo(),s=t.length+1,l=new Je(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ir((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=Yo(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=Yo(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=i)););return ue.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new sg(t,r));let s=this.es.get(t);void 0===s&&(s=Yt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class Do{constructor(){this.ns=new jn(Ii.ss),this.rs=new jn(Ii.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ii(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ii(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Je(new an([])),r=new Ii(t,e),i=new Ii(t,e+1),s=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),s.push(l.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Je(new an([])),r=new Ii(t,e),i=new Ii(t,e+1);let s=Yt();return this.rs.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Ii(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ii{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Je.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Je.comparator(e.key,t.key)}}class iy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new jn(Ii.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const l=new Hb(s,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new Ii(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ii(t,0),i=new Ii(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);s.push(d)}),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(zt);return t.forEach(i=>{const s=new Ii(i,0),l=new Ii(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,l],d=>{r=r.add(d._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Je.isDocumentKey(s)||(s=s.child(""));const l=new Ii(new Je(s),0);let d=new jn(zt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p._s)),!0)},l),ue.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const s=new Ii(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ii(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fg{constructor(e){this.Es=e,this.docs=new Ir(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pn.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=ws();const s=new Je(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||Wp(T_(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yx(this)}getSize(e){return ue.resolve(this.size)}}class yx extends Xb{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vx{constructor(e){this.persistence=e,this.Rs=new Nl(t=>Fu(t),Qp),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Do,this.targetCount=0,this.vs=Rd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ue.waitFor(s).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class ZI{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Hi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vx(this),this.indexManager=new qb,this.remoteDocumentCache=new fg(r=>this.referenceDelegate.xs(r)),this.It=new Gb(t),this.Ns=new _x(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new iy(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new sy(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class sy extends SA{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.Fs=new Do,this.$s=null}static Bs(e){return new kd(e)}get Ls(){if(this.$s)return this.$s;throw pt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Je.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class bx{constructor(e){this.It=e}$(e,t,r,i){const s=new nf("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0}),d.createObjectStore("documentMutations"),KI(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),KI(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0});const E=p.store("mutations"),D=y.map(M=>E.put(M));return ue.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(s))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(s))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(s))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:rx});p.createIndex("collectionPathOverlayIndex",ix,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",AI,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:TI});p.createIndex("documentKeyIndex",KA),p.createIndex("collectionGroupIndex",YA)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,s))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:tx}).createIndex("sequenceNumberIndex",nx,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:DI}).createIndex("documentKeyIndex",SI,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ug(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>ue.forEach(d,p=>{Lt(p.userId===s.userId);const y=Sd(this.It,p);return hx(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((l,d)=>{const p=new an(l),y=[0,as(p)];s.push(t.get(y).next(E=>E?ue.resolve():t.put({targetId:0,path:as(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:ex});const r=t.store("collectionParents"),i=new Wb,s=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:as(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const p=new an(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,p],y)=>{const E=Va(d);return s(E.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Ll(i),l=RI(this.It,s);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(y=l,y.document?new Je(an.fromString(y.document.name).popFirst(5)):y.noDocument?Je.fromSegments(y.noDocument.path):y.unknownDocument?Je.fromSegments(y.unknownDocument.path):pt()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(E))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Jb(this.It),s=new ZI(kd.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(p=>{var y;let E=null!==(y=d.get(p.userId))&&void 0!==y?y:Yt();Sd(this.It,p).keys().forEach(D=>E=E.add(D)),d.set(p.userId,E)}),ue.forEach(d,(p,y)=>{const E=new fi(y),D=ty.oe(this.It,E),M=s.getIndexManager(E),P=Yb.oe(E,this.It,M,s.referenceDelegate);return new bf(i,P,D,M).recalculateAndSaveOverlaysForDocumentKeys(new J_(t,Hi.at),p).next()})})}}function KI(n){n.createObjectStore("targetDocuments",{keyPath:XA}).createIndex("documentTargetsIndex",JA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QA,{unique:!0}),n.createObjectStore("targetGlobal")}const oy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ay{constructor(e,t,r,i,s,l,d,p,y,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=l,this.document=d,this.Js=y,this.Ys=E,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!ay.C())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HI(this,i),this.ii=t+"main",this.It=new Gb(p),this.ri=new Wo(this.ii,this.Xs,new bx(this.It)),this.Cs=new fx(this.referenceDelegate,this.It),this.remoteDocumentCache=Jb(this.It),this.Ns=new OI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,oy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Hi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(kl(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Od(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return pg(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ei(r,"clientMetadata");return i.W().next(s=>{const l=e.Ii(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return ue.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Od(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,oy);return!1}}return!(!this.networkEnabled||!this.inForeground)||pg(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new J_(t,Hi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>pg(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Yb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cx(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ty.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Xs)?jb:14===l?X_:13===l?MI:12===l?sx:11===l?xI:void pt();var l;let d;return this.ri.runTransaction(e,i,s,p=>(d=new J_(p,this.Ss?this.Ss.next():Hi.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ge.FAILED_PRECONDITION,FC);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return Od(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,oy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Od(e).put("owner",t)}static C(){return Wo.C()}_i(e){const t=Od(e);return t.get("owner").next(r=>this.mi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Od(n){return ei(n,"owner")}function pg(n){return ei(n,"clientMetadata")}function t0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class n0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n0(e,t.fromCache,r,i)}}class wx{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(Ib(t))return ue.resolve(null);let r=os(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=H_(t,null,"F"),r=os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=Yt(...s);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,d);return this.$i(t,y,l,p.readTime)?this.ki(e,H_(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return Ib(t)||i.isEqual(Vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const l=this.Fi(t,s);return this.$i(t,l,r,i)?this.Mi(e,t):(E_()<=bo.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Db(t)),this.Bi(e,l,t,hb(i,-1)))})}Fi(e,t){let r=new jn(JC(e));return t.forEach((i,s)=>{Sb(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return E_()<=bo.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Db(t)),this.Ni.getDocumentsMatchingQuery(e,t,Co.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class r0{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Ir(zt),this.qi=new Nl(s=>Fu(s),Qp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function ly(n,e,t,r){return new r0(n,e,t,r)}function s0(n,e){return gg.apply(this,arguments)}function gg(){return gg=(0,we.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],d=[];let p=Yt();for(const y of i){l.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:d}))})})}),gg.apply(this,arguments)}function o0(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,y){const E=p.batch,D=E.keys();let M=ue.resolve();return D.forEach(P=>{M=M.next(()=>y.getEntry(d,P)).next(B=>{const X=p.docVersions.get(P);Lt(null!==X),B.version.compareTo(X)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(d,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Yt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YI(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ex(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((E,D)=>{const M=i.get(D);if(!M)return;d.push(t.Cs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(s,E.addedDocuments,D)));let P=M.withSequenceNumber(s.currentSequenceNumber);var B,X,ne;e.targetMismatches.has(D)?P=P.withResumeToken(Jr.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(D,P),X=P,ne=E,(0===(B=M).resumeToken.approximateByteSize()||X.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,P))});let p=ws(),y=Yt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(QI(s,l,e.documentUpdates).next(E=>{p=E.Wi,y=E.zi})),!r.isEqual(Vt.min())){const E=t.Cs.getLastRemoteSnapshotVersion(s).next(D=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(E)}return ue.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ui=i,s))}function QI(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=ws();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Vt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Be("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function Cx(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pd(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new $u(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Yu(n,e,t){return uy.apply(this,arguments)}function uy(){return uy=(0,we.Z)(function*(n,e,t){const r=rt(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!kl(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),uy.apply(this,arguments)}function mg(n,e,t){const r=rt(n);let i=Vt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,p,y){const E=rt(d),D=E.qi.get(y);return void 0!==D?ue.resolve(E.Ui.get(D)):E.Cs.getTargetData(p,y)}(r,l,os(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Vt.min(),t?s:Yt())).next(d=>(XI(r,XC(e),d),{documents:d,Hi:s})))}function a0(n,e){const t=rt(n),r=rt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(l=>l?l.target:null))}function l0(n,e){const t=rt(n),r=t.Ki.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,hb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XI(t,e,i),i))}function XI(n,e,t){let r=n.Ki.get(e)||Vt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function cy(){return cy=(0,we.Z)(function*(n,e,t,r){const i=rt(n);let s=Yt(),l=ws();for(const y of t){const E=e.Ji(y.metadata.name);y.document&&(s=s.add(E));const D=e.Yi(y);D.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(E,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Pd(i,(y=r,os(vd(an.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>QI(y,d,l).next(E=>(d.apply(y),E)).next(E=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.Wi,E.zi)).next(()=>E.Wi)))}),cy.apply(this,arguments)}function Ix(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,we.Z)(function*(n,e,t=Yt()){const r=yield Pd(n,os(zu(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Ci(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(s,e);const d=r.withResumeToken(Jr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(s,d).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),dy.apply(this,arguments)}function eT(n,e){return`firestore_clients_${n}_${e}`}function $i(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qu(n,e){return`firestore_targets_${n}_${e}`}class hy{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Re(i.error.code,i.error.message))),l?new hy(e,t,i.state,s):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Re(r.error.code,r.error.message))),s?new _g(e,r.state,i):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=q_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=UC(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new u0(e,s):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Nd{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Nd(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class c0{constructor(){this.activeTargetIds=q_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yg{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ir(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=eT(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new c0),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(eT(e.persistenceKey,i));if(s){const l=u0.Zi(i,s);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Qu(this.persistenceKey,e));if(r){const i=_g.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qu(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let l=Hi.at;if(null!=s)try{const d=JSON.parse(s);Lt("number"==typeof d),l=d}catch(d){Hr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Hi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new hy(this.currentUser,e,t,r),s=$i(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=$i(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Qu(this.persistenceKey,e),s=new _g(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return u0.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return hy.Zi(new fi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return _g.Zi(i,t)}yr(e){return Nd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),l=[],d=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=q_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tT{constructor(){this.Lr=new c0,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new c0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nT{qr(e){}shutdown(){}}class rT{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class iT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const l=this.ho(e,t);Be("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,s),this.fo(e,l,d,r).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw Mu("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}_o(e,t,r,i,s,l){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${Tx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,l)=>{const d=new kC;d.setWithCredentials(!0),d.listenOnce(Xh.COMPLETE,()=>{var y;try{switch(d.getLastErrorCode()){case xu.NO_ERROR:const E=d.getResponseJson();Be("Connection","XHR received:",JSON.stringify(E)),s(E);break;case xu.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:const D=d.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",d.getResponseText()),D>0){let M=d.getResponseJson();Array.isArray(M)&&(M=M[0]);const P=null===(y=M)||void 0===y?void 0:y.error;if(P&&P.status&&P.message){const B=function(X){const ne=X.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(ne)>=0?ne:ge.UNKNOWN}(P.status);l(new Re(B,P.message))}else l(new Re(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yh(),l=Qh(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new RC({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");Be("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let E=!1,D=!1;const M=new d0({Hr:B=>{D?Be("Connection","Not sending because WebChannel is closed:",B):(E||(Be("Connection","Opening WebChannel transport."),y.open(),E=!0),Be("Connection","WebChannel sending:",B),y.send(B))},Jr:()=>y.close()}),P=(B,X,ne)=>{B.listen(X,je=>{try{ne(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return P(y,zp.EventType.OPEN,()=>{D||Be("Connection","WebChannel transport opened.")}),P(y,zp.EventType.CLOSE,()=>{D||(D=!0,Be("Connection","WebChannel transport closed"),M.io())}),P(y,zp.EventType.ERROR,B=>{D||(D=!0,Mu("Connection","WebChannel transport errored:",B),M.io(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),P(y,zp.EventType.MESSAGE,B=>{var X;if(!D){const ne=B.data[0];Lt(!!ne);const je=ne,Ye=je.error||(null===(X=je[0])||void 0===X?void 0:X.error);if(Ye){Be("Connection","WebChannel received error:",Ye);const Ge=Ye.status;let We=function(Dt){const dn=Dr[Dt];if(void 0!==dn)return FA(dn)}(Ge),Ct=Ye.message;void 0===We&&(We=ge.INTERNAL,Ct="Unknown error status: "+Ge+" with message "+Ye.message),D=!0,M.io(new Re(We,Ct)),y.close()}else Be("Connection","WebChannel received:",ne),M.ro(ne)}}),P(l,Jh.STAT_EVENT,B=>{B.stat===ab.PROXY?Be("Connection","Detected buffering proxy"):B.stat===ab.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function h0(){return"undefined"!=typeof window?window:null}function Fd(){return"undefined"!=typeof document?document:null}function Ld(n){return new fI(n,!0)}class sT{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class f0{constructor(e,t,r,i,s,l,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new sT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dx extends f0{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function HA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:pt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.gt?(Lt(void 0===y||"string"==typeof y),Jr.fromBase64String(y||"")):(Lt(void 0===y||y instanceof Uint8Array),Jr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const y=void 0===p.code?ge.UNKNOWN:FA(p.code);return new Re(y,p.message||"")}(l);t=new uI(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Fl(n,r.document.name),s=Ci(r.document.updateTime),l=new Oi({mapValue:{fields:r.document.fields}}),d=pn.newFoundDocument(i,s,l);t=new tg(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Fl(n,r.document),s=r.readTime?Ci(r.readTime):Vt.min(),l=pn.newNoDocument(i,s);t=new tg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Fl(n,r.document);t=new tg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,s=new NA(r.count||0);t=new Nb(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Vt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Vt.min():s.readTime?Ci(s.readTime):Vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Hu(this.It),t.addTarget=function(i,s){let l;const d=s.target;return l=N_(d)?{documents:vI(i,d)}:{query:Z_(i,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=pI(i,s.resumeToken):s.snapshotVersion.compareTo(Vt.min())>0&&(l.readTime=gf(i,s.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function GA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Hu(this.It),t.removeTarget=e,this.Bo(t)}}class oT extends f0{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function $A(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let s=Ci(r.updateTime?r.updateTime:i);return s.isEqual(Vt.min())&&(s=Ci(i)),new sI(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hu(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ig(this.It,r))};this.Bo(t)}}class fy extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ge.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection._o(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ge.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class g0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hr(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class m0{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{r.enqueueAndForget((0,we.Z)(function*(){var p;Ha(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,we.Z)(function*(y){const E=rt(y);E._u.add(4),yield wf(E),E.gu.set("Unknown"),E._u.delete(4),yield py(E)}),function(y){return p.apply(this,arguments)})(l))}))}),this.gu=new g0(r,i)}}function py(n){return _0.apply(this,arguments)}function _0(){return _0=(0,we.Z)(function*(n){if(Ha(n))for(const e of n.wu)yield e(!0)}),_0.apply(this,arguments)}function wf(n){return gy.apply(this,arguments)}function gy(){return gy=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),gy.apply(this,arguments)}function vg(n,e){const t=rt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),b0(t)?v0(t):Cg(t).ko()&&my(t,e))}function bg(n,e){const t=rt(n),r=Cg(t);t.du.delete(e),r.ko()&&y0(t,e),0===t.du.size&&(r.ko()?r.Fo():Ha(t)&&t.gu.set("Unknown"))}function my(n,e){n.yu.Mt(e.targetId),Cg(n).zo(e)}function y0(n,e){n.yu.Mt(e),Cg(n).Ho(e)}function v0(n){n.yu=new ng({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Cg(n).start(),n.gu.uu()}function b0(n){return Ha(n)&&!Cg(n).No()&&n.du.size>0}function Ha(n){return 0===rt(n)._u.size}function lT(n){n.yu=void 0}function uT(n){return _y.apply(this,arguments)}function _y(){return _y=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{my(n,e)})}),_y.apply(this,arguments)}function cT(n,e){return yy.apply(this,arguments)}function yy(){return yy=(0,we.Z)(function*(n,e){lT(n),b0(n)?(n.gu.hu(e),v0(n)):n.gu.set("Unknown")}),yy.apply(this,arguments)}function Sx(n,e,t){return w0.apply(this,arguments)}function w0(){return w0=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof uI&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,s){const l=s.cause;for(const d of s.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield E0(n,r)}else if(e instanceof tg?n.yu.Gt(e):e instanceof Nb?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Vt.min()))try{const r=yield YI(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.yu.te(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.du.get(p);y&&i.du.set(p,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(Jr.EMPTY_BYTE_STRING,p.snapshotVersion)),y0(i,d);const y=new $u(p.target,d,1,p.sequenceNumber);my(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield E0(n,r)}var r}),w0.apply(this,arguments)}function E0(n,e,t){return vy.apply(this,arguments)}function vy(){return vy=(0,we.Z)(function*(n,e,t){if(!kl(e))throw e;n._u.add(1),yield wf(n),n.gu.set("Offline"),t||(t=()=>YI(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield py(n)}))}),vy.apply(this,arguments)}function Ax(n,e){return e().catch(t=>E0(n,t,e))}function wg(n){return dT.apply(this,arguments)}function dT(){return dT=(0,we.Z)(function*(n){const e=rt(n),t=Vl(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;tP(e);)try{const i=yield Cx(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,nP(e,i)}catch(i){yield E0(e,i)}xx(e)&&Mx(e)}),dT.apply(this,arguments)}function tP(n){return Ha(n)&&n.fu.length<10}function nP(n,e){n.fu.push(e);const t=Vl(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function xx(n){return Ha(n)&&!Vl(n).No()&&n.fu.length>0}function Mx(n){Vl(n).start()}function rP(n){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,we.Z)(function*(n){Vl(n).eu()}),Ef.apply(this,arguments)}function iP(n){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,we.Z)(function*(n){const e=Vl(n);for(const t of n.fu)e.Xo(t.mutations)}),Eg.apply(this,arguments)}function Cf(n,e,t){return by.apply(this,arguments)}function by(){return by=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),i=$b.from(r,e,t);yield Ax(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wg(n)}),by.apply(this,arguments)}function Rx(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,we.Z)(function*(n,e){var t;e&&Vl(n).Yo&&(yield(t=(0,we.Z)(function*(r,i){if(Sr(s=i.code)&&s!==ge.ABORTED){const l=r.fu.shift();Vl(r).Mo(),yield Ax(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield wg(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),xx(n)&&Mx(n)}),C0.apply(this,arguments)}function wy(n,e){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,we.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Ha(t);t._u.add(3),yield wf(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield py(t)}),Ey.apply(this,arguments)}function Cy(n,e){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,we.Z)(function*(n,e){const t=rt(n);e?(t._u.delete(2),yield py(t)):e||(t._u.add(2),yield wf(t),t.gu.set("Unknown"))}),Iy.apply(this,arguments)}function Cg(n){return n.pu||(n.pu=function(e,t,r){const i=rt(e);return i.su(),new Dx(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:uT.bind(null,n),Zr:cT.bind(null,n),Wo:Sx.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Mo(),b0(n)?v0(n):n.gu.set("Unknown")):(yield n.pu.stop(),lT(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Vl(n){return n.Iu||(n.Iu=function(e,t,r){const i=rt(e);return i.su(),new oT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:rP.bind(null,n),Zr:Rx.bind(null,n),tu:iP.bind(null,n),Zo:Cf.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Mo(),yield wg(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class If{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,d=new If(e,t,l,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vd(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),kl(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Ig{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=hf(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new Ig(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ig)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ig;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kx{constructor(){this.Tu=new Ir(Je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):pt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Tg{constructor(e,t,r,i,s,l,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Tg(e,t,Ig.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ox{constructor(){this.Au=void 0,this.listeners=[]}}class I0{constructor(){this.queries=new Nl(e=>QC(e),Xp),this.onlineState="Unknown",this.Ru=new Set}}function T0(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Ox),i)try{s.Au=yield t.onListen(r)}catch(l){const d=Vd(l,`Initialization of query '${Db(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&S0(t)}),hT.apply(this,arguments)}function D0(n,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Dg.apply(this,arguments)}function Px(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&S0(t)}function Ws(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function S0(n){n.Ru.forEach(e=>{e.next()})}class Sg{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Tg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Tg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Nx{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class fT{constructor(e){this.It=e}Ji(e){return Fl(this.It,e)}Yi(e){return e.metadata.exists?Vb(this.It,e.document,!1):pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ci(e)}}class A0{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=an.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new fT(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Yt()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function JI(n,e,t,r){return cy.apply(this,arguments)}(e.localStore,new fT(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Ix(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function x0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class M0{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class R0{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=JC(e),this.Qu=new Ig(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new kx,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const M=i.get(E),P=Sb(this.query,D)?D:null,B=!!M&&this.mutatedKeys.has(M.key),X=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let ne=!1;M&&P?M.data.isEqual(P.data)?B!==X&&(r.track({type:3,doc:P}),ne=!0):this.Hu(M,P)||(r.track({type:2,doc:P}),ne=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(d=!0)):!M&&P?(r.track({type:0,doc:P}),ne=!0):M&&!P&&(r.track({type:1,doc:M}),ne=!0,(p||y)&&(d=!0)),ne&&(P?(l=l.add(P),s=X?s.add(E):s.delete(E)):(l=l.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Qu:l,zu:r,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,E)=>function(D,M){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return P(D)-P(M)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new Tg(this.query,e.Qu,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new kx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new pT(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new M0(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Tg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class gT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Fx{constructor(e){this.key=e,this.nc=!1}}class Lx{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Nl(d=>QC(d),Xp),this.rc=new Map,this.oc=new Set,this.uc=new Ir(Je.comparator),this.cc=new Map,this.ac=new Do,this.hc={},this.lc=new Map,this.fc=Rd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function k0(n,e){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,we.Z)(function*(n,e){const t=xy(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const l=yield Pd(t.localStore,os(e));t.isPrimaryClient&&vg(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield O0(t,e,r,"current"===d,l.resumeToken)}return i}),Zs.apply(this,arguments)}function O0(n,e,t,r,i){return mT.apply(this,arguments)}function mT(){return mT=(0,we.Z)(function*(n,e,t,r,i){n._c=(D,M,P)=>{return(B=(0,we.Z)(function*(X,ne,je,Ye){let Ge=ne.view.Wu(je);Ge.$i&&(Ge=yield mg(X.localStore,ne.query,!1).then(({documents:Dt})=>ne.view.Wu(Dt,Ge)));const We=Ye&&Ye.targetChanges.get(ne.targetId),Ct=ne.view.applyChanges(Ge,X.isPrimaryClient,We);return U0(X,ne.targetId,Ct.Xu),Ct.snapshot}),function(X,ne,je,Ye){return B.apply(this,arguments)})(n,D,M,P);var B};const s=yield mg(n.localStore,e,!0),l=new R0(e,s.Hi),d=l.Wu(s.documents),p=ff.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(d,n.isPrimaryClient,p);U0(n,t,y.Xu);const E=new gT(e,t,l);return n.ic.set(e,E),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),mT.apply(this,arguments)}function Vx(n,e){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,we.Z)(function*(n,e){const t=rt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!Xp(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Yu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bg(t.remoteStore,r.targetId),Ud(t,r.targetId)}).catch(Io))):(Ud(t,r.targetId),yield Yu(t.localStore,r.targetId,!0))}),Ty.apply(this,arguments)}function P0(){return P0=(0,we.Z)(function*(n,e,t){const r=My(n);try{const i=yield function(s,l){const d=rt(s),p=tr.now(),y=l.reduce((M,P)=>M.add(P.key),Yt());let E,D;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let P=ws(),B=Yt();return d.Gi.getEntries(M,y).next(X=>{P=X,P.forEach((ne,je)=>{je.isValidDocument()||(B=B.add(ne))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,P)).next(X=>{E=X;const ne=[];for(const je of l){const Ye=eP(je,E.get(je.key).overlayedDocument);null!=Ye&&ne.push(new Uu(je.key,Ye,zC(Ye.value.mapValue),Pn.exists(!0)))}return d.mutationQueue.addMutationBatch(M,p,ne,l)}).next(X=>{D=X;const ne=X.applyToLocalDocumentSet(E,B);return d.documentOverlayCache.saveOverlays(M,X.batchId,ne)})}).then(()=>({batchId:D.batchId,changes:Pb(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,d){let p=s.hc[s.currentUser.toKey()];p||(p=new Ir(zt)),p=p.insert(l,d),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield $a(r,i.changes),yield wg(r.remoteStore)}catch(i){const s=Vd(i,"Failed to persist write");t.reject(s)}}),P0.apply(this,arguments)}function N0(n,e){return F0.apply(this,arguments)}function F0(){return F0=(0,we.Z)(function*(n,e){const t=rt(n);try{const r=yield Ex(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.cc.get(s);l&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Lt(l.nc):i.removedDocuments.size>0&&(Lt(l.nc),l.nc=!1))}),yield $a(t,r,e)}catch(r){yield Io(r)}}),F0.apply(this,arguments)}function Ux(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(s,l){const d=rt(s);d.onlineState=l;let p=!1;d.queries.forEach((y,E)=>{for(const D of E.listeners)D.bu(l)&&(p=!0)}),p&&S0(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _T(n,e,t){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,we.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let l=new Ir(Je.comparator);l=l.insert(s,pn.newNoDocument(s,Vt.min()));const d=Yt().add(s),p=new ju(Vt.min(),new Map,new jn(zt),l,d);yield N0(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),bT(r)}else yield Yu(r.localStore,e,!1).then(()=>Ud(r,e,t)).catch(Io)}),Dy.apply(this,arguments)}function jx(n,e){return L0.apply(this,arguments)}function L0(){return L0=(0,we.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield o0(t.localStore,e);Ay(t,r,null),B0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $a(t,i)}catch(i){yield Io(i)}}),L0.apply(this,arguments)}function yT(n,e,t){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,we.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(s,l){const d=rt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,l).next(E=>(Lt(null!==E),y=E.keys(),d.mutationQueue.removeMutationBatch(p,E))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);Ay(r,e,t),B0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $a(r,i)}catch(i){yield Io(i)}}),Bd.apply(this,arguments)}function Sy(){return Sy=(0,we.Z)(function*(n,e){const t=rt(n);Ha(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=rt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Vd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Sy.apply(this,arguments)}function B0(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Ay(n,e,t){const r=rt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Ud(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||vT(n,r)})}function vT(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(bg(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),bT(n))}function U0(n,e,t){for(const r of t)r instanceof M0?(n.ac.addReference(r.key,e),sP(n,r)):r instanceof pT?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||vT(n,r.key)):pt()}function sP(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oc.add(r),bT(n))}function bT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Je(an.fromString(e)),r=n.fc.next();n.cc.set(r,new Fx(t)),n.uc=n.uc.insert(t,r),vg(n.remoteStore,new $u(os(vd(t.path)),r,2,Hi.at))}}function $a(n,e,t){return j0.apply(this,arguments)}function j0(){return j0=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],s=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{l.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,(null==y?void 0:y.fromCache)?"not-current":"current"),y){i.push(y);const E=n0.Ci(p.targetId,y);s.push(E)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,we.Z)(function*(p,y){const E=rt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ue.forEach(y,M=>ue.forEach(M.Si,P=>E.persistence.referenceDelegate.addReference(D,M.targetId,P)).next(()=>ue.forEach(M.Di,P=>E.persistence.referenceDelegate.removeReference(D,M.targetId,P)))))}catch(D){if(!kl(D))throw D;Be("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const M=D.targetId;if(!D.fromCache){const P=E.Ui.get(M),X=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.Ui=E.Ui.insert(M,X)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,s))}),j0.apply(this,arguments)}function Hx(n,e){return H0.apply(this,arguments)}function H0(){return H0=(0,we.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield s0(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $a(t,r.ji)}var i}),H0.apply(this,arguments)}function oP(n,e){const t=rt(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const s=t.rc.get(e);if(!s)return i;for(const l of s){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function aP(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,we.Z)(function*(n,e){const t=rt(n),r=yield mg(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&U0(t,e.targetId,i.Xu),i}),wT.apply(this,arguments)}function lP(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,we.Z)(function*(n,e){const t=rt(n);return l0(t.localStore,e).then(r=>$a(t,r))}),ET.apply(this,arguments)}function $x(n,e,t,r){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,we.Z)(function*(n,e,t,r){const i=rt(n),s=yield function(l,d){const p=rt(l),y=rt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.Tn(E,d).next(D=>D?p.localDocuments.getDocuments(E,D):ue.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield wg(i.remoteStore):"acknowledged"===t||"rejected"===t?(Ay(i,e,r||null),B0(i,e),d=e,rt(rt(i.localStore).mutationQueue).An(d)):pt(),yield $a(i,s)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Tf.apply(this,arguments)}function $0(){return $0=(0,we.Z)(function*(n,e){const t=rt(n);if(xy(t),My(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield G0(t,r.toArray());t.dc=!0,yield Cy(t.remoteStore,!0);for(const s of i)vg(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Ud(t,l),Yu(t.localStore,l,!0))),bg(t.remoteStore,l)}),yield i,yield G0(t,r),function(s){const l=rt(s);l.cc.forEach((d,p)=>{bg(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new Ir(Je.comparator)}(t),t.dc=!1,yield Cy(t.remoteStore,!1)}}),$0.apply(this,arguments)}function G0(n,e,t){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],s=[];for(const l of e){let d;const p=r.rc.get(l);if(p&&0!==p.length){d=yield Pd(r.localStore,os(p[0]));for(const y of p){const E=r.ic.get(y),D=yield aP(r,E);D.snapshot&&s.push(D.snapshot)}}else{const y=yield a0(r.localStore,l);d=yield Pd(r.localStore,y),yield O0(r,z0(y),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(s),i}),Bl.apply(this,arguments)}function z0(n){return Cb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function q0(n){const e=rt(n);return rt(rt(e.localStore).persistence).vi()}function W0(n,e,t,r){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,we.Z)(function*(n,e,t,r){const i=rt(n);if(i.dc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield l0(i.localStore,XC(s[0])),d=ju.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jr.EMPTY_BYTE_STRING);yield $a(i,l,d);break}case"rejected":yield Yu(i.localStore,e,!0),Ud(i,e,r);break;default:pt()}}),Z0.apply(this,arguments)}function K0(n,e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,we.Z)(function*(n,e,t){const r=xy(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const s=yield a0(r.localStore,i),l=yield Pd(r.localStore,s);yield O0(r,z0(s),l.targetId,!1,l.resumeToken),vg(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Yu(r.localStore,i,!1).then(()=>{bg(r.remoteStore,i),Ud(r,i)}).catch(Io))}}),Ag.apply(this,arguments)}function xy(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_T.bind(null,e),e.sc.Wo=Px.bind(null,e.eventManager),e.sc.wc=Ws.bind(null,e.eventManager),e}function My(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yT.bind(null,e),e}class zx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.It=Ld(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return ly(this.persistence,new wx,e.initialUser,this.It)}yc(e){return new ZI(kd.Bs,this.It)}gc(e){return new tT}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qx extends zx{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield My(r.Ac.syncEngine),yield wg(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return ly(this.persistence,new wx,e.initialUser,this.It)}Tc(e,t){return new gx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new LC(t,this.persistence);return new AA(e.asyncQueue,r)}yc(e){const t=t0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new ay(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h0(),Fd(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new tT}}class cP extends qx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof yg&&(r.sharedClientState.syncEngine={Fr:$x.bind(null,i),$r:W0.bind(null,i),Br:K0.bind(null,i),vi:q0.bind(null,i),Mr:lP.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,we.Z)(function*(l){yield function Gx(n,e){return $0.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}gc(e){const t=h0();if(!yg.C(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=t0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class CT{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Ux(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Hx.bind(null,r.syncEngine),yield Cy(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I0}createDatastore(e){const t=Ld(e.databaseInfo.databaseId),r=new iT(e.databaseInfo);return new fy(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>Ux(this.syncEngine,d,0),l=rT.C()?new rT:new nT,new m0(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,d,p,y){const E=new Lx(r,i,s,l,d,p);return y&&(E.dc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=rt(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield wf(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function IT(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wx(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y0(n){if(!Je.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TT(n){if(Je.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ry(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ry(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DT(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Q0=new Map;class X0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Wx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bA;switch(t.type){case"gapi":return new ZO(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Q0.get(e);t&&(Be("ComponentProvider","Removing Datastore"),Q0.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Ks extends Pi{constructor(e,t,r){super(e,t,vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Je(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Zx(n,e,...t){if(n=(0,V.m9)(n),IT("collection","path",e),n instanceof Df){const r=an.fromString(e,...t);return TT(r),new Ks(n,null,r)}{if(!(n instanceof nr||n instanceof Ks))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return TT(r),new Ks(n.firestore,null,r)}}function jd(n,e,...t){if(n=(0,V.m9)(n),1===arguments.length&&(e=CA.R()),IT("doc","path",e),n instanceof Df){const r=an.fromString(e,...t);return Y0(r),new nr(n,null,new Je(r))}{if(!(n instanceof nr||n instanceof Ks))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return Y0(r),new nr(n.firestore,n instanceof Ks?n.converter:null,new Je(r))}}function xT(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),(n instanceof nr||n instanceof Ks)&&(e instanceof nr||e instanceof Ks)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function J0(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&Xp(n._query,e._query)&&n.converter===e.converter}function MT(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new pi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new Nx(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,we.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Qx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(s,l){const d=rt(s),p=Hu(d.It)+"/documents",y={documents:l.map(P=>W_(d.It,P))},E=yield d._o("BatchGetDocuments",p,y,l.length),D=new Map;E.forEach(P=>{const B=function rg(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=Fl(t,r.found.name),s=Ci(r.found.updateTime),l=new Oi({mapValue:{fields:r.found.fields}});return pn.newFoundDocument(i,s,l)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=Fl(t,r.missing),s=Ci(r.readTime);return pn.newNoDocument(i,s)}(n,e):pt()}(d.It,P);D.set(B.key.toString(),B)});const M=[];return l.forEach(P=>{const B=D.get(P.toString());Lt(!!B),M.push(B)}),M}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Je.fromPath(i);e.mutations.push(new df(s,e.precondition(s)))}),yield(r=(0,we.Z)(function*(i,s){const l=rt(i),d=Hu(l.It)+"/documents",p={writes:s.map(y=>ig(l.It,y))};yield l.ao("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vt.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Xx{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new sT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,we.Z)(function*(){const t=new Qx(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!sf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Sr(t)}return!1}}class Jx{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fi.UNAUTHENTICATED,this.clientId=CA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(d){Be("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RT(n,e){return ew.apply(this,arguments)}function ew(){return ew=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(s){r.isEqual(s)||(yield s0(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ew.apply(this,arguments)}function eM(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OT(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>wy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>wy(e.remoteStore,s)),n.onlineComponents=e}),kT.apply(this,arguments)}function OT(n){return PT.apply(this,arguments)}function PT(){return PT=(0,we.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield RT(n,new zx)),n.offlineComponents}),PT.apply(this,arguments)}function tw(n){return nw.apply(this,arguments)}function nw(){return nw=(0,we.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield eM(n,new CT)),n.onlineComponents}),nw.apply(this,arguments)}function tM(n){return OT(n).then(e=>e.persistence)}function rw(n){return OT(n).then(e=>e.localStore)}function NT(n){return tw(n).then(e=>e.remoteStore)}function FT(n){return tw(n).then(e=>e.syncEngine)}function a(n){return u.apply(this,arguments)}function u(){return u=(0,we.Z)(function*(n){const e=yield tw(n),t=e.eventManager;return t.onListen=k0.bind(null,e.syncEngine),t.onUnlisten=Vx.bind(null,e.syncEngine),t}),u.apply(this,arguments)}function b(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,d,p){const y=new ky({next:D=>{s.enqueueAndForget(()=>D0(i,E));const M=D.docs.has(l);!M&&D.fromCache?p.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&d&&"server"===d.source?p.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new Sg(vd(l.path),y,{includeMetadataChanges:!0,Nu:!0});return T0(i,E)}(yield a(n),n.asyncQueue,e,t,r)})),r.promise}function I(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,d,p){const y=new ky({next:D=>{s.enqueueAndForget(()=>D0(i,E)),D.fromCache&&"server"===d.source?p.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new Sg(l,y,{includeMetadataChanges:!0,Nu:!0});return T0(i,E)}(yield a(n),n.asyncQueue,e,t,r)})),r.promise}class Q{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new sT(this,"async_queue_retry"),this.Wc=()=>{const t=Fd();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Fd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Fd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new pi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!kl(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=If.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&pt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function te(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ie{constructor(){this._progressObserver={},this._taskCompletionResolver=new pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ne extends Df{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Q,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rn(this),this._firestoreClient.terminate()}}function it(n){return n._firestoreClient||rn(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rn(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new BC(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new Jx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Xu(n,e,t){const r=new pi;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield RT(n,t),yield eM(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;Mu("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function Oy(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Jr.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new So(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xg{constructor(e){this._methodName=e}}class VT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const QU=/^__.*__$/;class XU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Id(e,this.data,t,this.fieldTransforms)}}class fP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class BT{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new BT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return HT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(pP(this.sa)&&QU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class JU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Ld(e)}da(e,t,r,i=!1){return new BT({sa:e,methodName:t,fa:r,path:Cr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mg(n){const e=n._freezeSettings(),t=Ld(n._databaseId);return new JU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UT(n,e,t,r,i,s={}){const l=n.da(s.merge||s.mergeFields?2:0,e,t,i);sM("Data must be an object, but it was:",l,r);const d=_P(r,l);let p,y;if(s.merge)p=new qs(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const M=oM(e,D,t);if(!l.contains(M))throw new Re(ge.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);vP(E,M)||E.push(M)}p=new qs(E),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new XU(new Oi(d),p,y)}class cw extends xg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cw}}function gP(n,e,t){return new BT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class nM extends xg{_toFieldTransform(e){return new uf(e.path,new bd)}isEqual(e){return e instanceof nM}}class e2 extends xg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=gP(this,e,!0),r=this._a.map(s=>Rg(s,t)),i=new Vu(r);return new uf(e.path,i)}isEqual(e){return this===e}}class t2 extends xg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=gP(this,e,!0),r=this._a.map(s=>Rg(s,t)),i=new Bu(r);return new uf(e.path,i)}isEqual(e){return this===e}}class n2 extends xg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new wd(e.It,nI(e.It,this.wa));return new uf(e.path,t)}isEqual(e){return this===e}}function rM(n,e,t,r){const i=n.da(1,e,t);sM("Data must be an object, but it was:",i,r);const s=[],l=Oi.empty();Ru(r,(p,y)=>{const E=jT(e,p,t);y=(0,V.m9)(y);const D=i.ca(E);if(y instanceof cw)s.push(E);else{const M=Rg(y,D);null!=M&&(s.push(E),l.set(E,M))}});const d=new qs(s);return new fP(l,d,i.fieldTransforms)}function iM(n,e,t,r,i,s){const l=n.da(1,e,t),d=[oM(e,r,t)],p=[i];if(s.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(oM(e,s[M])),p.push(s[M+1]);const y=[],E=Oi.empty();for(let M=d.length-1;M>=0;--M)if(!vP(y,d[M])){const P=d[M];let B=p[M];B=(0,V.m9)(B);const X=l.ca(P);if(B instanceof cw)y.push(P);else{const ne=Rg(B,X);null!=ne&&(y.push(P),E.set(P,ne))}}const D=new qs(y);return new fP(E,D,l.fieldTransforms)}function mP(n,e,t,r=!1){return Rg(t,n.da(r?4:3,e))}function Rg(n,e){if(yP(n=(0,V.m9)(n)))return sM("Unsupported field value:",e,n),_P(n,e);if(n instanceof xg)return function(t,r){if(!pP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let d=Rg(l,r.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,V.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:gf(r.It,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gf(r.It,i)}}if(t instanceof VT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof So)return{bytesValue:pI(r.It,t._byteString)};if(t instanceof nr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Ry(t)}`)}(n,e)}function _P(n,e){const t={};return A_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(n,(r,i)=>{const s=Rg(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function yP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof VT||n instanceof So||n instanceof nr||n instanceof xg)}function sM(n,e,t){if(!yP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Ry(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function oM(n,e,t){if((e=(0,V.m9)(e))instanceof Hd)return e._internalPath;if("string"==typeof e)return jT(n,e);throw HT("Field path arguments must be of type string or ",n,!1,void 0,t)}const r2=new RegExp("[~\\*/\\[\\]]");function jT(n,e,t){if(e.search(r2)>=0)throw HT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hd(...e.split("."))._internalPath}catch(r){throw HT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function HT(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Re(ge.INVALID_ARGUMENT,d+n+p)}function vP(n,e){return n.some(t=>t.isEqual(e))}class dw{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new s2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($T("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class s2 extends dw{data(){return super.data()}}function $T(n,e){return"string"==typeof e?jT(n,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}function bP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hw{}function Sf(n,...e){for(const t of e)n=t._apply(n);return n}class o2 extends hw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mg(e.firestore),r=function(i,s,l,d,p,y,E){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){DP(E,y);const P=[];for(const B of E)P.push(TP(d,i,B));D={arrayValue:{values:P}}}else D=TP(d,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||DP(E,y),D=mP(l,"where",E,"in"===y||"not-in"===y);const M=$r.create(p,y,D);return function(P,B){if(B.dt()){const ne=j_(P);if(null!==ne&&!ne.isEqual(B.field))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ne.toString()}' and '${B.field.toString()}'`);const je=U_(P);null!==je&&SP(0,B.field,je)}const X=function(ne,je){for(const Ye of ne.filters)if(je.indexOf(Ye.op)>=0)return Ye.op;return null}(P,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==X)throw new Re(ge.INVALID_ARGUMENT,X===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${X.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Pi(e.firestore,e.converter,function(i,s){const l=i.filters.concat([s]);return new La(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class l2 extends hw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Lu(i,s);return function(d,p){if(null===U_(d)){const y=j_(d);null!==y&&SP(0,y,p.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Pi(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new La(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class wP extends hw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Pi(e.firestore,e.converter,H_(e._query,this.Ia,this.Ta))}}class EP extends hw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=IP(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(i=t,new La((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class CP extends hw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=IP(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(i=t,new La((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function IP(n,e,t,r){if(t[0]=(0,V.m9)(t[0]),t[0]instanceof dw)return function(i,s,l,d,p){if(!d)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of lf(i))if(E.field.isKeyField())y.push(Nu(s,d.key));else{const D=d.data.field(E.field);if(R_(D))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=E.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(D)}return new Pl(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mg(n.firestore);return function(s,l,d,p,y,E){const D=s.explicitOrderBy;if(y.length>D.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let P=0;P<y.length;P++){const B=y[P];if(D[P].field.isKeyField()){if("string"!=typeof B)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!Tb(s)&&-1!==B.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const X=s.path.child(an.fromString(B));if(!Je.isDocumentKey(X))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const ne=new Je(X);M.push(Nu(l,ne))}else{const X=mP(d,p,B);M.push(X)}}return new Pl(M,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TP(n,e,t){if("string"==typeof(t=(0,V.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tb(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Je.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(n,new Je(r))}if(t instanceof nr)return Nu(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ry(t)}.`)}function DP(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function SP(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class aM{convertValue(e,t="none"){switch(_d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return Ru(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new VT(Tr(e.latitude),Tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_b(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rf(e));default:return null}}convertTimestamp(e){const t=Na(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);Lt(K_(r));const i=new Ol(r.get(1),r.get(3)),s=new Je(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function GT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class m2 extends aM{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class kg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $d extends dw{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($T("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fw extends $d{data(e={}){return super.data(e)}}class Af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fw(this._firestore,this._userDataWriter,r.key,r,new kg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new fw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new fw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:_2(l.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function AP(n,e){return n instanceof $d&&e instanceof $d?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Af&&e instanceof Af&&n._firestore===e._firestore&&J0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xf extends aM{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function xP(n,e,t){n=hn(n,nr);const r=hn(n.firestore,Ne),i=GT(n.converter,e,t);return Py(r,[UT(Mg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pn.none())])}function MP(n,e,t,...r){n=hn(n,nr);const i=hn(n.firestore,Ne),s=Mg(i);let l;return l="string"==typeof(e=(0,V.m9)(e))||e instanceof Hd?iM(s,"updateDoc",n._key,e,t,r):rM(s,"updateDoc",n._key,e),Py(i,[l.toMutation(n._key,Pn.exists(!0))])}function RP(n,...e){var t,r,i;n=(0,V.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||te(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(te(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,E;if(n instanceof nr)y=hn(n.firestore,Ne),E=vd(n._key.path),p={next:D=>{e[l]&&e[l](lM(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=hn(n,Pi);y=hn(D.firestore,Ne),E=D._query;const M=new xf(y);p={next:P=>{e[l]&&e[l](new Af(y,M,D,P))},error:e[l+1],complete:e[l+2]},bP(n._query)}return function(D,M,P,B){const X=new ky(B),ne=new Sg(M,X,P);return D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return T0(yield a(D),ne)})),()=>{X.bc(),D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return D0(yield a(D),ne)}))}}(it(y),E,d,p)}function Py(n,e){return function(t,r){const i=new pi;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Bx(n,e,t){return P0.apply(this,arguments)}(yield FT(t),r,i)})),i.promise}(it(n),e)}function lM(n,e,t){const r=t.docs.get(e._key),i=new xf(n);return new $d(n,i,e._key,r,new kg(t.hasPendingWrites,t.fromCache),e.converter)}const S2={maxAttempts:5};class kP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mg(e)}set(e,t,r){this._verifyNotCommitted();const i=Mf(e,this._firestore),s=GT(i.converter,t,r),l=UT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Pn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof Hd?iM(this._dataReader,"WriteBatch.update",s._key,t,r,i):rM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mf(e,this._firestore);return this._mutations=this._mutations.concat(new cf(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mf(n,e){if((n=(0,V.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class A2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mg(e)}get(e){const t=Mf(e,this._firestore),r=new m2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const s=i[0];if(s.isFoundDocument())return new dw(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new dw(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=Mf(e,this._firestore),s=GT(i.converter,t,r),l=UT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Mf(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof Hd?iM(this._dataReader,"Transaction.update",s._key,t,r,i):rM(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Mf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mf(e,this._firestore),r=new xf(this._firestore);return super.get(e).then(i=>new $d(this._firestore,r,t._key,i._document,new kg(!1,!1),t.converter))}}function uM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PP(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function NP(){if(!function VC(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){hd=is.SDK_VERSION,(0,is._registerComponent)(new js.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new Ne(new cb(t.getProvider("auth-internal")),new KO(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(d.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(lb,"3.7.3",n),(0,is.registerVersion)(lb,"3.7.3","esm2017")}();class pw{constructor(e){this._delegate=e}static fromBase64String(e){return NP(),new pw(So.fromBase64String(e))}static fromUint8Array(e){return PP(),new pw(So.fromUint8Array(e))}toBase64(){return NP(),this._delegate.toBase64()}toUint8Array(){return PP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cM(n){return function L2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class V2{enableIndexedDbPersistence(e,t){return function Nn(n,e){Oy(n=hn(n,Ne));const t=it(n),r=n._freezeSettings(),i=new CT;return Xu(t,i,new qx(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ys(n){Oy(n=hn(n,Ne));const e=it(n),t=n._freezeSettings(),r=new CT;return Xu(e,r,new cP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function iw(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Wo.C())return Promise.resolve();const i=r+"main";yield Wo.delete(i)}),function(r){return t.apply(this,arguments)})(t0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ol||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ST(n,e,t,r={}){var i;const s=(n=hn(n,Df))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Mu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=fi.MOCK_USER;else{l=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fi(p)}n._authCredentials=new ub(new vA(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function ow(n){return function c(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield tM(n),t=yield NT(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i._u.delete(0),py(i)}(t)}))}(it(n=hn(n,Ne)))}(this._delegate)}disableNetwork(){return function aw(n){return function f(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield tM(n),t=yield NT(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const s=rt(i);s._u.add(0),yield wf(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(it(n=hn(n,Ne)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Wx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sw(n){return function(e){const t=new pi;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function V0(n,e){return Sy.apply(this,arguments)}(yield FT(e),t)})),t.promise}(it(n=hn(n,Ne)))}(this._delegate)}onSnapshotsInSync(e){return function D2(n,e){return function x(n,e){const t=new ky(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield a(n),i=t,rt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield a(n),i=t,void rt(r).Ru.delete(i);var r,i}))}}(it(n=hn(n,Ne)),te(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ny(this,Zx(this._delegate,e))}catch(t){throw Qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,jd(this._delegate,e))}catch(t){throw Qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xs(this,function AT(n,e){if(n=hn(n,Df),IT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new La(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function x2(n,e,t){n=hn(n,Ne);const r=Object.assign(Object.assign({},S2),t);return function(i){if(i.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const d=new pi;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const p=yield function o(n){return tw(n).then(e=>e.datastore)}(i);new Xx(i.asyncQueue,p,l,s,d).run()})),d.promise}(it(n),i=>e(new A2(n,i)),r)}(this._delegate,t=>e(new LP(this,t)))}batch(){return it(this._delegate),new VP(new kP(this._delegate,e=>Py(this._delegate,e)))}loadBundle(e){return function lw(n,e){const t=it(n=hn(n,Ne)),r=new Ie;return function O(n,e,t,r){const i=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return MT(p,y);if(p instanceof ArrayBuffer)return MT(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new dP(p,l);var p}(t,Ld(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function uP(n,e,t){const r=rt(n);var i;(i=(0,we.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(M,P){const B=rt(M),X=Ci(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ne=>B.Ns.getBundleMetadata(ne,P.id)).then(ne=>!!ne&&ne.createTime.compareTo(X)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(x0(p));const y=new A0(p,s.localStore,l.It);let E=yield l.mc();for(;E;){const M=yield y.Fu(E);M&&d._updateProgress(M),E=yield l.mc()}const D=yield y.complete();return yield $a(s,D.Lu,void 0),yield function(M,P){const B=rt(M);return B.persistence.runTransaction("Save bundle","readwrite",X=>B.Ns.saveBundleMetadata(X,P))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return Mu("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var M}),function(s,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield FT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uw(n,e){return function U(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield rw(n),e)}))}(it(n=hn(n,Ne)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xs(this,t):null)}}class zT extends aM{constructor(e){super(),this.firestore=e}convertBytes(e){return new pw(new So(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class LP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}get(e){const t=Pg(e);return this._delegate.get(t).then(r=>new gw(this._firestore,new $d(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Pg(e);return r?(uM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pg(e);return this._delegate.delete(t),this}}class VP{constructor(e){this._delegate=e}set(e,t,r){const i=Pg(e);return r?(uM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Og{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Og.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Og(e,new zT(e),t),i.set(t,s)),s}}Og.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new nr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Ga(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ny(this.firestore,Zx(this._delegate,e))}catch(t){throw Qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,V.m9)(e))instanceof nr&&xT(this._delegate,e)}set(e,t){t=uM("DocumentReference.set",t);try{return t?xP(this._delegate,e,t):xP(this._delegate,e)}catch(r){throw Qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?MP(this._delegate,e):MP(this._delegate,e,t,...r)}catch(i){throw Qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function I2(n){return Py(hn(n.firestore,Ne),[new cf(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=BP(e),r=UP(e,i=>new gw(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return RP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function v2(n){n=hn(n,nr);const e=hn(n.firestore,Ne),t=it(e),r=new xf(e);return function m(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const d=yield function(p,y){const E=rt(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,y))}(i,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Vd(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield rw(n),e,t);var r})),t.promise}(t,n._key).then(i=>new $d(e,r,n._key,i,new kg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function b2(n){n=hn(n,nr);const e=hn(n.firestore,Ne);return b(it(e),n._key,{source:"server"}).then(t=>lM(e,n,t))}(this._delegate):function y2(n){n=hn(n,nr);const e=hn(n.firestore,Ne);return b(it(e),n._key).then(t=>lM(e,n,t))}(this._delegate),t.then(r=>new gw(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function Qs(n,e,t){return n.message=n.message.replace(e,t),n}function BP(n){for(const e of n)if("object"==typeof e&&!cM(e))return e;return{}}function UP(n,e){var t,r;let i;return i=cM(n[0])?n[0]:cM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return AP(this._delegate,e._delegate)}}class mw extends gw{data(e){const t=this._delegate.data(e);return function OC(n,e){n||pt()}(void 0!==t),t}}class Xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}where(e,t,r){try{return new Xs(this.firestore,Sf(this._delegate,function a2(n,e,t){const r=e,i=$T("where",n);return new o2(i,r,t)}(e,t,r)))}catch(i){throw Qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xs(this.firestore,Sf(this._delegate,function u2(n,e="asc"){const t=e,r=$T("orderBy",n);return new l2(r,t)}(e,t)))}catch(r){throw Qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xs(this.firestore,Sf(this._delegate,function c2(n){return DT("limit",n),new wP("limit",n,"F")}(e)))}catch(t){throw Qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xs(this.firestore,Sf(this._delegate,function d2(n){return DT("limitToLast",n),new wP("limitToLast",n,"L")}(e)))}catch(t){throw Qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xs(this.firestore,Sf(this._delegate,function h2(...n){return new EP("startAt",n,!0)}(...e)))}catch(t){throw Qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xs(this.firestore,Sf(this._delegate,function f2(...n){return new EP("startAfter",n,!1)}(...e)))}catch(t){throw Qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xs(this.firestore,Sf(this._delegate,function p2(...n){return new CP("endBefore",n,!1)}(...e)))}catch(t){throw Qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xs(this.firestore,Sf(this._delegate,function g2(...n){return new CP("endAt",n,!0)}(...e)))}catch(t){throw Qs(t,"endAt()","Query.endAt()")}}isEqual(e){return J0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function E2(n){n=hn(n,Pi);const e=hn(n.firestore,Ne),t=it(e),r=new xf(e);return function C(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const d=yield mg(i,s,!0),p=new R0(s,d.Hi),y=p.Wu(d.documents),E=p.applyChanges(y,!1);l.resolve(E.snapshot)}catch(d){const p=Vd(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield rw(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function C2(n){n=hn(n,Pi);const e=hn(n.firestore,Ne),t=it(e),r=new xf(e);return I(t,n._query,{source:"server"}).then(i=>new Af(e,r,n,i))}(this._delegate):function w2(n){n=hn(n,Pi);const e=hn(n.firestore,Ne),t=it(e),r=new xf(e);return bP(n._query),I(t,n._query).then(i=>new Af(e,r,n,i))}(this._delegate),t.then(r=>new dM(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BP(e),r=UP(e,i=>new dM(this.firestore,new Af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return RP(this._delegate,t,r)}withConverter(e){return new Xs(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}class U2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new U2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mw(this._firestore,r))})}isEqual(e){return AP(this._delegate,e._delegate)}}class Ny extends Xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?jd(this._delegate):jd(this._delegate,e))}catch(t){throw Qs(t,"doc()","CollectionReference.doc()")}}add(e){return function T2(n,e){const t=hn(n.firestore,Ne),r=jd(n),i=GT(n.converter,e);return Py(t,[UT(Mg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return xT(this._delegate,e._delegate)}withConverter(e){return new Ny(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function Pg(n){return hn(n,nr)}class hM{constructor(...e){this._delegate=new Hd(...e)}static documentId(){return new hM(Cr.keyField().canonicalString())}isEqual(e){return(e=(0,V.m9)(e))instanceof Hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ng{constructor(e){this._delegate=e}static serverTimestamp(){const e=function R2(){return new nM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ng(e)}static delete(){const e=function M2(){return new cw("deleteField")}();return e._methodName="FieldValue.delete",new Ng(e)}static arrayUnion(...e){const t=function k2(...n){return new e2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ng(t)}static arrayRemove(...e){const t=function O2(...n){return new t2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ng(t)}static increment(e){const t=function P2(n){return new n2("increment",n)}(e);return t._methodName="FieldValue.increment",new Ng(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j2={Firestore:FP,GeoPoint:VT,Timestamp:tr,Blob:pw,Transaction:LP,WriteBatch:VP,DocumentReference:Ga,DocumentSnapshot:gw,Query:Xs,QueryDocumentSnapshot:mw,QuerySnapshot:dM,CollectionReference:Ny,FieldPath:hM,FieldValue:Ng,setLogLevel:function B2(n){!function yA(n){Rl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function $2(n){(function H2(n,e){n.INTERNAL.registerComponent(new js.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},j2)))})(n,(e,t)=>new FP(e,t,new V2)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Hs.Z);var Fg=L(6451),qT=L(5363),G2=L(6063);class z2 extends Bn.x{constructor(e=1/0,t=1/0,r=G2.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}var fM=L(3099);function jP(n,e,t){var r,i;let s,l=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,fM.B)({connector:()=>new z2(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function HP(n,e){return(0,ji.m)(e)?Zt(()=>n,e):Zt(()=>n)}var pM=L(9468);L(5867);const mM=new Map,GP={activated:!1,tokenObservers:[]},Y2={initialized:!1,enabled:!1};function ls(n){return mM.get(n)||Object.assign({},GP)}function ZT(){return Y2}class nj{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new V.BH,yield function rj(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new V.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Js=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qP(n){if(!ls(n).activated)throw Js.create("use-before-activation",{appName:n.name})}function vM(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,we.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const P=yield l.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,d)}catch(P){throw Js.create("fetch-network-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}if(200!==p.status)throw Js.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(P){throw Js.create("fetch-parse-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(E[1]),M=Date.now();return{token:y.token,expireTimeMillis:M+D,issuedAtTimeMillis:M}}),bM.apply(this,arguments)}function aj(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _w="firebase-app-check-store";let QT=null;function ZP(){return QT||(QT=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Js.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(_w,{keyPath:"compositeKey"})}}catch(r){e(Js.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),QT)}function wM(){return wM=(0,we.Z)(function*(n,e){const r=(yield ZP()).transaction(_w,"readwrite"),s=r.objectStore(_w).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var y;d(Js.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),wM.apply(this,arguments)}const yw=new bo.Yd("@firebase/app-check");function IM(n,e){return(0,V.hl)()?function dj(n,e){return function KP(n,e){return wM.apply(this,arguments)}(function QP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{yw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XP(){return ZT().enabled}function JP(){return DM.apply(this,arguments)}function DM(){return DM=(0,we.Z)(function*(){const n=ZT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),DM.apply(this,arguments)}const _j={error:"UNKNOWN_ERROR"};function yj(n){return V.US.encodeString(JSON.stringify(n),!1)}function XT(n){return SM.apply(this,arguments)}function SM(){return SM=(0,we.Z)(function*(n,e=!1){const t=n.app;qP(t);const r=ls(t);let s,i=r.token;if(i&&!Fy(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Fy(p)?i=p:yield IM(t,void 0))}if(!e&&i&&Fy(i))return{token:i.token};let d,l=!1;if(XP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vM(aj(t,yield JP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield IM(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ls(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?yw.warn(p.message):yw.error(p),s=p}return i?s?d=Fy(i)?{token:i.token,internalError:s}:nN(s):(d={token:i.token},r.token=i,yield IM(t,i)):d=nN(s),l&&tN(t,d),d}),SM.apply(this,arguments)}function xM(n,e){const t=ls(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eN(n){const{app:e}=n,t=ls(e);let r=t.tokenRefresher;r||(r=function vj(n){const{app:e}=n;return new nj((0,we.Z)(function*(){let r;if(r=ls(e).token?yield XT(n,!0):yield XT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ls(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tN(n,e){const t=ls(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Fy(n){return n.expireTimeMillis-Date.now()>0}function nN(n){return{token:yj(_j),error:n}}class bj{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ls(this.app);for(const t of e)xM(this.app,t.next);return Promise.resolve()}}const cN="app-check-internal";!function Pj(){(0,is._registerComponent)(new js.wA("app-check",n=>function wj(n,e){return new bj(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cN).initialize()})),(0,is._registerComponent)(new js.wA(cN,n=>function Ej(n){return{getToken:e=>XT(n,e),addTokenListener:e=>function AM(n,e,t,r){const{app:i}=n,s=ls(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Fy(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),eN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>eN(n))}(n,"INTERNAL",e),removeTokenListener:e=>xM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,is.registerVersion)("@firebase/app-check","0.5.17")}();class vw{constructor(){return(0,Dn.vb)("app-check")}}"undefined"!=typeof window&&window;var eD=L(127);const PM=new h.OlP("angularfire2.auth.use-emulator"),NM=new h.OlP("angularfire2.auth.settings"),FM=new h.OlP("angularfire2.auth.tenant-id"),LM=new h.OlP("angularfire2.auth.langugage-code"),VM=new h.OlP("angularfire2.auth.use-device-language"),BM=new h.OlP("angularfire.auth.persistence"),UM=(n,e,t,r,i,s,l,d)=>(0,di.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))p.settings[y]=E;return d&&p.setPersistence(d),p},[t,r,i,s,l,d]);let bw=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E,D,M,P){const B=new Bn.x,X=Xe(void 0).pipe((0,qT.Q)(l.outsideAngular),Zt(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,ht.U)(()=>(0,di.on)(t,s,r)),(0,ht.U)(ne=>UM(ne,s,d,y,E,D,p,M)),jP({bufferSize:1,refCount:!1}));if(hc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{X.pipe(Ns()).subscribe();const je=X.pipe(Zt(We=>We.getRedirectResult().then(Ct=>Ct,()=>null)),Dn.iC,jP({bufferSize:1,refCount:!1})),Ye=X.pipe(Zt(We=>new Wn.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>We.onAuthStateChanged(Dt=>Ct.next(Dt),Dt=>Ct.error(Dt),()=>Ct.complete()))})))),Ge=X.pipe(Zt(We=>new Wn.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>We.onIdTokenChanged(Dt=>Ct.next(Dt),Dt=>Ct.error(Dt),()=>Ct.complete()))}))));this.authState=je.pipe(HP(Ye),(0,pM.R)(l.outsideAngular),(0,qT.Q)(l.insideAngular)),this.user=je.pipe(HP(Ge),(0,pM.R)(l.outsideAngular),(0,qT.Q)(l.insideAngular)),this.idToken=this.user.pipe(Zt(We=>We?(0,In.D)(We.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(Zt(We=>We?(0,In.D)(We.getIdTokenResult()):Xe(null))),this.credential=(0,Fg.T)(je,B,this.authState.pipe(cr(We=>!We))).pipe((0,ht.U)(We=>(null==We?void 0:We.user)?We:null),(0,pM.R)(l.outsideAngular),(0,qT.Q)(l.insideAngular))}return(0,di.pX)(this,X,s,{spy:{apply:(ne,je,Ye)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&Ye.then(Ge=>B.next(Ge))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(di.Dh),h.LFG(di.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(PM,8),h.LFG(NM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(BM,8),h.LFG(vw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Uj=(()=>{class n{constructor(){eD.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[bw]}),n})();function hN(n,e){return function jj(n,e=Jc.z){return new Wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function jM(n,e){return hN(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function tD(n,e){return jM(n,e).pipe(li(void 0),$m(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(E=>E.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(E=>E.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function fN(n,e,t){return tD(n,t).pipe(Ai((r,i)=>function $j(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Gj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return HM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return HM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),xv(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function HM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(li(void 0),$m(),cr(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pN(e);return fN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new mN(this.ref.doc(e),this.afs)}}class mN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=vN(r,t);return new gN(i,s,this.afs)}snapshotChanges(){return function Hj(n,e){return hN(n,e).pipe(li(void 0),$m(),(0,ht.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(Dn.iC)}}class zj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?tD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),cr(t=>t.length>0),Dn.iC):tD(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pN(e);return fN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Dn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(Dn.iC)}}const _N=new h.OlP("angularfire2.enableFirestorePersistence"),yN=new h.OlP("angularfire2.firestore.persistenceSettings"),qj=new h.OlP("angularfire2.firestore.settings"),Wj=new h.OlP("angularfire2.firestore.use-emulator");function vN(n,e=(t=>t)){return{query:e(n),ref:n}}let bN=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E,D,M,P,B,X,ne,je,Ye){this.schedulers=p;const Ge=(0,di.on)(t,d,r),We=E;D&&UM(Ge,d,M,B,X,ne,P,je),[this.firestore,this.persistenceEnabled$]=(0,di.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const Ct=d.runOutsideAngular(()=>Ge.firestore());if(s&&Ct.settings(s),We&&Ct.useEmulator(...We),i&&!hc(l)){const Dt=()=>{try{return(0,In.D)(Ct.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(dn){return"undefined"!=typeof console&&console.warn(dn),Xe(!1)}};return[Ct,d.runOutsideAngular(Dt)]}return[Ct,Xe(!1)]},[s,We,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=vN(i,r),d=this.schedulers.ngZone.run(()=>s);return new gN(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new zj(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(di.Dh),h.LFG(di.xv,8),h.LFG(_N,8),h.LFG(qj,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(yN,8),h.LFG(Wj,8),h.LFG(bw,8),h.LFG(PM,8),h.LFG(NM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(BM,8),h.LFG(vw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zj=(()=>{class n{constructor(){eD.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:_N,useValue:!0},{provide:yN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[bN]}),n})(),Lg=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["home"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new Av.Q).then(t=>{this.router.navigate(["home"])})}FacebookAuth(){return this.AuthLogin(new Av.N).then(t=>{this.router.navigate(["home"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["home"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bN),h.LFG(bw),h.LFG(rs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","usu\xe1rio","required","",1,"formControl"],["userName",""],["type","password","placeholder","senha","required","",1,"formControl"],["userPassword",""],["type","button","value","Entrar",1,"btn","btnPrimary",3,"click"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h3"),h._uU(4,"Entrar"),h.qZA(),h.TgZ(5,"div",3),h._UZ(6,"input",4,5),h.qZA(),h.TgZ(8,"div",3),h._UZ(9,"input",6,7),h.qZA(),h.TgZ(11,"div",3),h.TgZ(12,"input",8),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(7),d=h.MAs(10);return r.authService.SignIn(l.value,d.value)}),h.qZA(),h.qZA(),h.TgZ(13,"div",3),h.TgZ(14,"button",9),h.NdJ("click",function(){return r.authService.GoogleAuth()}),h._UZ(15,"i",10),h._uU(16," Entar com Google "),h.qZA(),h.qZA(),h.TgZ(17,"div",11),h.TgZ(18,"span",12),h._uU(19,"esqueceu a senha?"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",13),h.TgZ(21,"span"),h._uU(22,"N\xe3o tem uma conta?"),h.TgZ(23,"span",14),h._uU(24," Inscrever-se"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}},directives:[wu],styles:[""]}),n})(),Yj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Endere\xe7o de email","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","senha","required","",1,"formControl"],["userPwd",""],["type","button","value","Inscrever-se",1,"btn","btnPrimary",3,"click"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h3"),h._uU(4,"Inscrever-se"),h.qZA(),h.TgZ(5,"div",3),h._UZ(6,"input",4,5),h.qZA(),h.TgZ(8,"div",3),h._UZ(9,"input",6,7),h.qZA(),h.TgZ(11,"div",3),h.TgZ(12,"input",8),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(7),d=h.MAs(10);return r.authService.SignUp(l.value,d.value)}),h.qZA(),h.qZA(),h.TgZ(13,"div",3),h.TgZ(14,"button",9),h.NdJ("click",function(){return r.authService.GoogleAuth()}),h._UZ(15,"i",10),h._uU(16," Continuar com Google "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"div",11),h.TgZ(18,"span"),h._uU(19,"j\xe1 tem uma conta? "),h.TgZ(20,"span",12),h._uU(21,"Entrar"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}},directives:[wu],styles:[""]}),n})(),Qj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Endere\xe7o de email","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Redefinir senha",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h3"),h._uU(4,"Redefinir senha "),h.qZA(),h.TgZ(5,"p",3),h._uU(6," Digite seu endere\xe7o de e-mail para solicitar uma redefini\xe7\xe3o de senha. "),h.qZA(),h.TgZ(7,"div",4),h._UZ(8,"input",5,6),h.qZA(),h.TgZ(10,"div",4),h.TgZ(11,"input",7),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(9);return r.authService.ForgotPassword(l.value)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(12,"div",8),h.TgZ(13,"span"),h._uU(14,"voltar ? "),h.TgZ(15,"span",9),h._uU(16,"Entrar"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}},directives:[wu],styles:[""]}),n})();function Xj(n,e){if(1&n&&(h.TgZ(0,"div",4),h.TgZ(1,"p",9),h._uU(2," We have sent a confirmation email to "),h.TgZ(3,"strong"),h._uU(4),h.qZA(),h._uU(5,". "),h.qZA(),h.TgZ(6,"p",9),h._uU(7," Please check your email and click on the link to verfiy your email address. "),h.qZA(),h.qZA()),2&n){const t=e.ngIf;h.xp6(4),h.Oqu(t.email)}}let Jj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h3"),h._uU(4,"Thank You for Registering"),h.qZA(),h.YNc(5,Xj,8,1,"div",3),h.TgZ(6,"div",4),h.TgZ(7,"button",5),h.NdJ("click",function(){return r.authService.SendVerificationMail()}),h._UZ(8,"i",6),h._uU(9," Resend Verification Email "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",7),h.TgZ(11,"span"),h._uU(12,"Go back to?"),h.TgZ(13,"span",8),h._uU(14," Sign in"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(5),h.Q6J("ngIf",r.authService.userData))},directives:[Fr,wu],styles:[""]}),n})(),wN=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lg),h.LFG(rs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eH=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function tH(){return(0,h.f3M)(se)}}),nH=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $M,EN=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function rH(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?nH.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eH,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ww=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();try{$M="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){$M=!1}let Ew,Vg,GM,Gd=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Qr(n){return n===Wl}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!$M)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cw(n){return function iH(){if(null==Ew&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ew=!0}))}finally{Ew=Ew||!1}return Ew}()?n:!!n.capture}function sH(){if(null==Vg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vg=!1,Vg;if("scrollBehavior"in document.documentElement.style)Vg=!0;else{const n=Element.prototype.scrollTo;Vg=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Vg}function Bg(n){return n.composedPath?n.composedPath()[0]:n.target}function zM(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function SN(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function AN(n,e=Jc.z){return(0,Rn.e)((t,r)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=l+n,E=e.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);d()}t.subscribe(new Un.Q(r,y=>{s=y,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}var ZM=L(5032);function Iw(n){return(0,Rn.e)((e,t)=>{(0,ai.Xf)(n).subscribe(new Un.Q(t,()=>t.complete(),ZM.Z)),!t.closed&&e.subscribe(t)})}function Tw(n){return null!=n&&"false"!=`${n}`}function xN(n){return Array.isArray(n)?n:[n]}function Ti(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Vy(n){return n instanceof h.SBq?n.nativeElement:n}class AH extends class SH{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Bn.x,this._typeaheadSubscription=Ui.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Bn.x,this.change=new Bn.x,e instanceof h.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ur.b)(t=>this._pressedLetters.push(t)),AN(e),cr(()=>this._pressedLetters.length>0),(0,ht.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,l=r[s];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||SN(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof h.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function KM(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function YM(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const PH=new h.OlP("cdk-input-modality-detector-options"),NH={ignoreKeys:[18,17,224,91,16]},By=Cw({passive:!0,capture:!0});let FH=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Bi(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Bg(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(KM(l)?"keyboard":"mouse"),this._mostRecentTarget=Bg(l))},this._onTouchstart=l=>{YM(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Bg(l))},this._options=Object.assign(Object.assign({},NH),s),this.modalityDetected=this._modality.pipe(function CH(n){return cr((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(xv()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,By),i.addEventListener("mousedown",this._onMousedown,By),i.addEventListener("touchstart",this._onTouchstart,By)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,By),document.removeEventListener("mousedown",this._onMousedown,By),document.removeEventListener("touchstart",this._onTouchstart,By))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gd),h.LFG(h.R0b),h.LFG(se),h.LFG(PH,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VH=new h.OlP("cdk-focus-monitor-default-options"),rD=Cw({passive:!0,capture:!0});let QM=(()=>{class n{constructor(t,r,i,s,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Bn.x,this._rootNodeFocusAndBlurListener=d=>{const p=Bg(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let E=p;E;E=E.parentElement)y.call(this,d,E)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,r=!1){const i=Vy(t);if(!this._platform.isBrowser||1!==i.nodeType)return Xe(null);const s=function aH(n){if(function oH(){if(null==GM){const n="undefined"!=typeof document?document.head:null;GM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return GM}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const d={checkChildren:r,subject:new Bn.x,rootNode:s};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=Vy(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Vy(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Bg(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,rD),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,rD)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Iw(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rD),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rD),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Gd),h.LFG(FH),h.LFG(se,8),h.LFG(VH,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PN="cdk-high-contrast-black-on-white",NN="cdk-high-contrast-white-on-black",XM="cdk-high-contrast-active";let BH=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(XM),t.remove(PN),t.remove(NN),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(XM),t.add(PN)):2===r&&(t.add(XM),t.add(NN))}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gd),h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FN{}const zd="*";function JM(n,e){return{type:7,name:n,definitions:e,options:{}}}function iD(n,e=null){return{type:4,styles:e,timings:n}}function LN(n,e=null){return{type:2,steps:n,options:e}}function qd(n){return{type:6,styles:n,offset:null}}function eR(n,e,t){return{type:0,name:n,styles:e,options:t}}function sD(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function VN(n){Promise.resolve(null).then(n)}class Uy{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){VN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class BN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?VN(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function UN(){return"undefined"!=typeof window&&void 0!==window.document}function nR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Rf(n){switch(n.length){case 0:return new Uy;case 1:return n[0];default:return new BN(n)}}function jN(n,e,t,r,i={},s={}){const l=[],d=[];let p=-1,y=null;if(r.forEach(E=>{const D=E.offset,M=D==p,P=M&&y||{};Object.keys(E).forEach(B=>{let X=B,ne=E[B];if("offset"!==B)switch(X=e.normalizePropertyName(X,l),ne){case"!":ne=i[B];break;case zd:ne=s[B];break;default:ne=e.normalizeStyleValue(B,X,ne,l)}P[X]=ne}),M||d.push(P),y=P,p=D}),l.length){const E="\n - ";throw new Error(`Unable to animate due to the following errors:${E}${l.join(E)}`)}return d}function rR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&iR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&iR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&iR(t,"destroy",n)))}}function iR(n,e,t){const r=t.totalTime,s=sR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function sR(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function Qo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function HN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let oR=(n,e)=>!1,$N=(n,e,t)=>[];(nR()||"undefined"!=typeof Element)&&(oR=UN()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),$N=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ug=null,GN=!1;function aR(n){Ug||(Ug=function HH(){return"undefined"!=typeof document?document.body:null}()||{},GN=!!Ug.style&&"WebkitAppearance"in Ug.style);let e=!0;return Ug.style&&!function jH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ug.style,!e&&GN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ug.style)),e}const lR=oR,uR=$N;function zN(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let qN=(()=>{class n{validateStyleProperty(t){return aR(t)}matchesElement(t,r){return!1}containsElement(t,r){return lR(t,r)}query(t,r,i){return uR(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,d=[],p){return new Uy(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),cR=(()=>{class n{}return n.NOOP=new qN,n})();const dR="ng-enter",oD="ng-leave",aD="ng-trigger",lD=".ng-trigger",ZN="ng-animating",hR=".ng-animating";function jg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fR(parseFloat(e[1]),e[2])}function fR(n,e){return"s"===e?1e3*n:n}function uD(n,e,t){return n.hasOwnProperty("duration")?n:function zH(n,e,t){let i,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=fR(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=fR(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),d=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),d=!0),d&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:l}}(n,e,t)}function jy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function kf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else jy(n,t);return t}function YN(n,e,t){return t?e+":"+t+";":""}function QN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=YN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=YN(0,ZH(t),n.style[t]));n.setAttribute("style",e)}function Ju(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=gR(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),nR()&&QN(n))}function Hg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=gR(t);n.style[r]=""}),nR()&&QN(n))}function Dw(n){return Array.isArray(n)?1==n.length?n[0]:LN(n):n}const pR=new RegExp("{{\\s*(.+?)\\s*}}","g");function XN(n){let e=[];if("string"==typeof n){let t;for(;t=pR.exec(n);)e.push(t[1]);pR.lastIndex=0}return e}function cD(n,e,t){const r=n.toString(),i=r.replace(pR,(s,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(`Please provide a value for the animation param ${l}`),d=""),d.toString()});return i==r?n:i}function dD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const WH=/-+([a-z0-9])/g;function gR(n){return n.replace(WH,(...e)=>e[1].toUpperCase())}function ZH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function JN(n,e){return 0===n||0===e}function eF(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],l=[];if(r.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=t[d]}),l.length)for(var i=1;i<e.length;i++){let d=e[i];l.forEach(function(p){d[p]=mR(n,p)})}}return e}function Xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function mR(n,e){return window.getComputedStyle(n)[e]}function KH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function YH(n,e,t){if(":"==n[0]){const p=function QH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],l=r[3];e.push(tF(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(tF(l,i))}(r,t,e)):t.push(n),t}const fD=new Set(["true","1"]),pD=new Set(["false","0"]);function tF(n,e){const t=fD.has(n)||pD.has(n),r=fD.has(e)||pD.has(e);return(i,s)=>{let l="*"==n||n==i,d="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?fD.has(n):pD.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?fD.has(e):pD.has(e)),l&&d}}const XH=new RegExp("s*:selfs*,?","g");function _R(n,e,t){return new JH(n).build(e,t)}class JH{constructor(e){this._driver=e}build(e,t){const r=new n$(t);return this._resetContextStyleTimingState(r),Xo(this,Dw(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};if(r.styles.forEach(d=>{if(gD(d)){const p=d;Object.keys(p).forEach(y=>{XN(p[y]).forEach(E=>{l.hasOwnProperty(E)||s.add(E)})})}}),s.size){const d=dD(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${d.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Xo(this,Dw(e.animation),t);return{type:1,matchers:KH(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$g(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Xo(this,r,t)),options:$g(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const d=Xo(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:$g(e.options)}}visitAnimate(e,t){const r=function i$(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return yR(uD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=yR(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||uD(r,e),yR(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:qd({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=qd(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==zd?r.push(l):t.errors.push(`The provided style string value ${l} is not allowed.`):r.push(l)}):r.push(e.styles);let i=!1,s=null;return r.forEach(l=>{if(gD(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return void t.errors.push(`The provided animation property "${d}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let E=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${d}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),E=!1),s=y.startTime),E&&(p[d]={startTime:s,endTime:i}),t.options&&function qH(n,e,t){const r=e.params||{},i=XN(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const l=[];let d=!1,p=!1,y=0;const E=e.steps.map(je=>{const Ye=this._makeStyleAst(je,t);let Ge=null!=Ye.offset?Ye.offset:function r$(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(gD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(gD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ye.styles),We=0;return null!=Ge&&(s++,We=Ye.offset=Ge),p=p||We<0||We>1,d=d||We<y,y=We,l.push(We),Ye});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),d&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let M=0;s>0&&s<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(M=1/(D-1));const P=D-1,B=t.currentTime,X=t.currentAnimateTimings,ne=X.duration;return E.forEach((je,Ye)=>{const Ge=M>0?Ye==P?1:M*Ye:l[Ye],We=Ge*ne;t.currentTime=B+X.delay+We,X.duration=We,this._validateStyleAst(je,t),je.offset=Ge,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:Xo(this,Dw(e.animation),t),options:$g(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$g(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$g(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function e$(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(XH,"")),n=n.replace(/@\*/g,lD).replace(/@\w+/g,t=>lD+"-"+t.substr(1)).replace(/:animating/g,hR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Qo(t.collectedStyles,t.currentQuerySelector,{});const d=Xo(this,Dw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:$g(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:uD(e.timings,t.errors,!0);return{type:12,animation:Xo(this,Dw(e.animation),t),timings:r,options:null}}}class n${constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function gD(n){return!Array.isArray(n)&&"object"==typeof n}function $g(n){return n?(n=jy(n)).params&&(n.params=function t$(n){return n?jy(n):null}(n.params)):n={},n}function yR(n,e,t){return{duration:n,delay:e,easing:t}}function vR(n,e,t,r,i,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:d}}class mD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const a$=new RegExp(":enter","g"),u$=new RegExp(":leave","g");function bR(n,e,t,r,i,s={},l={},d,p,y=[]){return(new c$).buildKeyframes(n,e,t,r,i,s,l,d,p,y)}class c${buildKeyframes(e,t,r,i,s,l,d,p,y,E=[]){y=y||new mD;const D=new wR(e,t,y,i,s,E,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Xo(this,r,D);const M=D.timelines.filter(P=>P.containsAnimation());if(Object.keys(d).length){let P;for(let B=M.length-1;B>=0;B--){const X=M[B];if(X.element===t){P=X;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,D.errors,p)}return M.length?M.map(P=>P.buildKeyframes()):[vR(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?jg(r.duration):null,d=null!=r.delay?jg(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=_D);const l=jg(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Xo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?jg(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Xo(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return uD(t.params?cD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?jg(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=_D);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,E)=>{t.currentQueryIndex=E;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),Xo(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const D=E.currentTime;Xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const _D={};class wR{constructor(e,t,r,i,s,l,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_D,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new yD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=jg(r.duration)),null!=r.delay&&(i.delay=jg(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=cD(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new wR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=_D,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new d$(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(a$,"."+this._enterClassName)).replace(u$,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&l.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),d}}class yD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new yD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||zd,this._currentKeyframe[t]=zd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},l=function h$(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=zd})):kf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=cD(l[d],s,r);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:zd),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=kf(d,!0);Object.keys(y).forEach(E=>{const D=y[E];"!"==D?e.add(E):D==zd&&t.add(E)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?dD(e.values()):[],l=t.size?dD(t.values()):[];if(r){const d=i[0],p=jy(d);d.offset=0,p.offset=1,i=[d,p]}return vR(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class d$ extends yD{constructor(e,t,r,i,s,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,d=t/l,p=kf(e[0],!1);p.offset=0,s.push(p);const y=kf(e[0],!1);y.offset=iF(d),s.push(y);const E=e.length-1;for(let D=1;D<=E;D++){let M=kf(e[D],!1);M.offset=iF((t+M.offset*r)/l),s.push(M)}r=l,t=0,i="",e=s}return vR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function iF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ER{}class f$ extends ER{normalizePropertyName(e,t){return gR(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(p$[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return l+s}}const p$=(()=>function g$(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function sF(n,e,t,r,i,s,l,d,p,y,E,D,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:D,errors:M}}const CR={};class oF{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function m$(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],l=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):l}build(e,t,r,i,s,l,d,p,y,E){const D=[],M=this.ast.options&&this.ast.options.params||CR,B=this.buildStyles(r,d&&d.params||CR,D),X=p&&p.params||CR,ne=this.buildStyles(i,X,D),je=new Set,Ye=new Map,Ge=new Map,We="void"===i,Ct={params:Object.assign(Object.assign({},M),X)},Dt=E?[]:bR(e,t,this.ast.animation,s,l,B,ne,Ct,y,D);let dn=0;if(Dt.forEach(na=>{dn=Math.max(na.duration+na.delay,dn)}),D.length)return sF(t,this._triggerName,r,i,We,B,ne,[],[],Ye,Ge,dn,D);Dt.forEach(na=>{const Qd=na.element,$U=Qo(Ye,Qd,{});na.preStyleProps.forEach(sm=>$U[sm]=!0);const yE=Qo(Ge,Qd,{});na.postStyleProps.forEach(sm=>yE[sm]=!0),Qd!==t&&je.add(Qd)});const gi=dD(je.values());return sF(t,this._triggerName,r,i,We,B,ne,Dt,gi,Ye,Ge,dn)}}class _${constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=jy(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(i[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=cD(p,i,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),r[y]=p})}}),r}}class v${constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new _$(i.style,i.options&&i.options.params||{},r)}),aF(this.states,"true","1"),aF(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new oF(e,i,this.states))}),this.fallbackTransition=function b$(n,e,t){return new oF(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function aF(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const w$=new mD;class E${constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=_R(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=jN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let l;const d=new Map;if(s?(l=bR(this._driver,t,s,dR,oD,{},{},r,w$,i),l.forEach(E=>{const D=Qo(d,E.element,{});E.postStyleProps.forEach(M=>D[M]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),l=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);d.forEach((E,D)=>{Object.keys(E).forEach(M=>{E[M]=this._driver.computeStyle(D,M,zd)})});const y=Rf(l.map(E=>{const D=d.get(E.element);return this._buildPlayer(E,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=sR(t,"","","");return rR(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lF="ng-animate-queued",IR="ng-animate-disabled",S$=[],uF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},A$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},za="__ng_removed";class TR{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function k$(n){return null!=n?n:null}(r?e.value:e),r){const s=jy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Sw="void",DR=new TR(Sw);class x${constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function O$(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const s=Qo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const d=Qo(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(qa(e,aD),qa(e,aD+"-"+t),d[t]=DR),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new SR(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(qa(e,aD),qa(e,aD+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new TR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=DR),y.value!==Sw&&p.value===y.value){if(!function F$(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const X=[],ne=s.matchStyles(p.value,p.params,X),je=s.matchStyles(y.value,y.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Hg(e,ne),Ju(e,je)})}return}const M=Qo(this._engine.playersByElement,e,[]);M.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let P=s.matchTransition(p.value,y.value,e,y.params),B=!1;if(!P){if(!i)return;P=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:y,player:l,isFallbackTransition:B}),B||(qa(e,lF),l.onStart(()=>{Hy(e,lF)})),l.onDone(()=>{let X=this.players.indexOf(l);X>=0&&this.players.splice(X,1);const ne=this._engine.playersByElement.get(e);if(ne){let je=ne.indexOf(l);je>=0&&ne.splice(je,1)}}),this.players.push(l),M.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,lD,!0);r.forEach(i=>{if(i[za])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,Sw,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Rf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers[l].fallbackTransition,y=r[l]||DR,E=new TR(Sw),D=new SR(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[za];(!s||s===uF)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){qa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==r.triggerName){const p=sR(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,rR(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class M${constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new x$(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const l=r[i[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(vD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!vD(t))return;const s=t[za];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qa(e,IR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hy(e,IR))}removeNode(e,t,r,i){if(vD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[za]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return vD(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,lD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,hR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Rf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[za];if(r&&r.setForRemoval){if(e[za]=uF,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(IR))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)qa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Rf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new mD,i=[],s=new Map,l=[],d=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(wt=>{E.add(wt);const kt=this.driver.query(wt,".ng-animate-queued",!0);for(let jt=0;jt<kt.length;jt++)E.add(kt[jt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),P=hF(M,this.collectedEnterElements),B=new Map;let X=0;P.forEach((wt,kt)=>{const jt=dR+X++;B.set(kt,jt),wt.forEach(Sn=>qa(Sn,jt))});const ne=[],je=new Set,Ye=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const kt=this.collectedLeaveElements[wt],jt=kt[za];jt&&jt.setForRemoval&&(ne.push(kt),je.add(kt),jt.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(Sn=>je.add(Sn)):Ye.add(kt))}const Ge=new Map,We=hF(M,Array.from(je));We.forEach((wt,kt)=>{const jt=oD+X++;Ge.set(kt,jt),wt.forEach(Sn=>qa(Sn,jt))}),e.push(()=>{P.forEach((wt,kt)=>{const jt=B.get(kt);wt.forEach(Sn=>Hy(Sn,jt))}),We.forEach((wt,kt)=>{const jt=Ge.get(kt);wt.forEach(Sn=>Hy(Sn,jt))}),ne.forEach(wt=>{this.processLeaveNode(wt)})});const Ct=[],Dt=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(jt=>{const Sn=jt.player,qi=jt.element;if(Ct.push(Sn),this.collectedEnterElements.length){const io=qi[za];if(io&&io.setForMove){if(io.previousTriggersValues&&io.previousTriggersValues.has(jt.triggerName)){const om=io.previousTriggersValues.get(jt.triggerName),Yf=this.statesByElement.get(jt.element);Yf&&Yf[jt.triggerName]&&(Yf[jt.triggerName].value=om)}return void Sn.destroy()}}const lc=!D||!this.driver.containsElement(D,qi),ra=Ge.get(qi),Kf=B.get(qi),qr=this._buildInstruction(jt,r,Kf,ra,lc);if(qr.errors&&qr.errors.length)return void Dt.push(qr);if(lc)return Sn.onStart(()=>Hg(qi,qr.fromStyles)),Sn.onDestroy(()=>Ju(qi,qr.toStyles)),void i.push(Sn);if(jt.isFallbackTransition)return Sn.onStart(()=>Hg(qi,qr.fromStyles)),Sn.onDestroy(()=>Ju(qi,qr.toStyles)),void i.push(Sn);const qU=[];qr.timelines.forEach(io=>{io.stretchStartingKeyframe=!0,this.disabledNodes.has(io.element)||qU.push(io)}),qr.timelines=qU,r.append(qi,qr.timelines),l.push({instruction:qr,player:Sn,element:qi}),qr.queriedElements.forEach(io=>Qo(d,io,[]).push(Sn)),qr.preStyleProps.forEach((io,om)=>{const Yf=Object.keys(io);if(Yf.length){let am=p.get(om);am||p.set(om,am=new Set),Yf.forEach(NO=>am.add(NO))}}),qr.postStyleProps.forEach((io,om)=>{const Yf=Object.keys(io);let am=y.get(om);am||y.set(om,am=new Set),Yf.forEach(NO=>am.add(NO))})});if(Dt.length){const wt=[];Dt.forEach(kt=>{wt.push(`@${kt.triggerName} has failed due to:\n`),kt.errors.forEach(jt=>wt.push(`- ${jt}\n`))}),Ct.forEach(kt=>kt.destroy()),this.reportError(wt)}const dn=new Map,gi=new Map;l.forEach(wt=>{const kt=wt.element;r.has(kt)&&(gi.set(kt,kt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,dn))}),i.forEach(wt=>{const kt=wt.element;this._getPreviousPlayers(kt,!1,wt.namespaceId,wt.triggerName,null).forEach(Sn=>{Qo(dn,kt,[]).push(Sn),Sn.destroy()})});const na=ne.filter(wt=>pF(wt,p,y)),Qd=new Map;dF(Qd,this.driver,Ye,y,zd).forEach(wt=>{pF(wt,p,y)&&na.push(wt)});const yE=new Map;P.forEach((wt,kt)=>{dF(yE,this.driver,new Set(wt),p,"!")}),na.forEach(wt=>{const kt=Qd.get(wt),jt=yE.get(wt);Qd.set(wt,Object.assign(Object.assign({},kt),jt))});const sm=[],GU=[],zU={};l.forEach(wt=>{const{element:kt,player:jt,instruction:Sn}=wt;if(r.has(kt)){if(E.has(kt))return jt.onDestroy(()=>Ju(kt,Sn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(Sn.totalTime),void i.push(jt);let qi=zU;if(gi.size>1){let ra=kt;const Kf=[];for(;ra=ra.parentNode;){const qr=gi.get(ra);if(qr){qi=qr;break}Kf.push(ra)}Kf.forEach(qr=>gi.set(qr,qi))}const lc=this._buildAnimation(jt.namespaceId,Sn,dn,s,yE,Qd);if(jt.setRealPlayer(lc),qi===zU)sm.push(jt);else{const ra=this.playersByElement.get(qi);ra&&ra.length&&(jt.parentPlayer=Rf(ra)),i.push(jt)}}else Hg(kt,Sn.fromStyles),jt.onDestroy(()=>Ju(kt,Sn.toStyles)),GU.push(jt),E.has(kt)&&i.push(jt)}),GU.forEach(wt=>{const kt=s.get(wt.element);if(kt&&kt.length){const jt=Rf(kt);wt.setRealPlayer(jt)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<ne.length;wt++){const kt=ne[wt],jt=kt[za];if(Hy(kt,oD),jt&&jt.hasAnimation)continue;let Sn=[];if(d.size){let lc=d.get(kt);lc&&lc.length&&Sn.push(...lc);let ra=this.driver.query(kt,hR,!0);for(let Kf=0;Kf<ra.length;Kf++){let qr=d.get(ra[Kf]);qr&&qr.length&&Sn.push(...qr)}}const qi=Sn.filter(lc=>!lc.destroyed);qi.length?P$(this,kt,qi):this.processLeaveNode(kt)}return ne.length=0,sm.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const kt=this.players.indexOf(wt);this.players.splice(kt,1)}),wt.play()}),sm}elementContainsData(e,t){let r=!1;const i=t[za];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==Sw;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,E=y!==s,D=Qo(r,y,[]);this._getPreviousPlayers(y,E,l,d,t.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),D.push(P)})}Hg(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const d=t.triggerName,p=t.element,y=[],E=new Set,D=new Set,M=t.timelines.map(B=>{const X=B.element;E.add(X);const ne=X[za];if(ne&&ne.removedBeforeQueried)return new Uy(B.duration,B.delay);const je=X!==p,Ye=function N$(n){const e=[];return fF(n,e),e}((r.get(X)||S$).map(dn=>dn.getRealPlayer())).filter(dn=>!!dn.element&&dn.element===X),Ge=s.get(X),We=l.get(X),Ct=jN(0,this._normalizer,0,B.keyframes,Ge,We),Dt=this._buildPlayer(B,Ct,Ye);if(B.subTimeline&&i&&D.add(X),je){const dn=new SR(e,d,X);dn.setRealPlayer(Dt),y.push(dn)}return Dt});y.forEach(B=>{Qo(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function R$(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>qa(B,ZN));const P=Rf(M);return P.onDestroy(()=>{E.forEach(B=>Hy(B,ZN)),Ju(p,t.toStyles)}),D.forEach(B=>{Qo(i,B,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Uy(e.duration,e.delay)}}class SR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Uy,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>rR(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function vD(n){return n&&1===n.nodeType}function cF(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function dF(n,e,t,r,i){const s=[];t.forEach(p=>s.push(cF(p)));const l=[];r.forEach((p,y)=>{const E={};p.forEach(D=>{const M=E[D]=e.computeStyle(y,D,i);(!M||0==M.length)&&(y[za]=A$,l.push(y))}),n.set(y,E)});let d=0;return t.forEach(p=>cF(p,s[d++])),l}function hF(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:l(y),s.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function qa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Hy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function P$(n,e,t){Rf(t).onDone(()=>n.processLeaveNode(e))}function fF(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof BN?fF(r.players,e):e.push(r)}}function pF(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class bD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new M$(e,t,r),this._timelineEngine=new E$(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const p=[],y=_R(this._driver,s,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);d=function y$(n,e,t){return new v$(n,e,t)}(i,y,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=HN(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,d]=HN(r);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function gF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=AR(e[0]),e.length>1&&(r=AR(e[e.length-1]))):e&&(t=AR(e)),t||r?new L$(n,t,r):null}let L$=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ju(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ju(this._element,this._initialStyles),this._endStyles&&(Ju(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hg(this._element,this._endStyles),this._endStyles=null),Ju(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function AR(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];V$(i)&&(e=e||{},e[i]=n[i])}return e}function V$(n){return"display"===n||"position"===n}const mF="animation",_F="animationend";class j${constructor(e,t,r,i,s,l,d){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=l,this._onDoneFn=d,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function H$(n,e){const t=MR(n,"").trim();let r=0;t.length&&(r=function G$(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),wD(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),bF(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){yF(this._element,this._name,"paused")}resume(){yF(this._element,this._name,"running")}setPosition(e){const t=vF(this._element,this._name);this._position=e*this._duration,wD(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),bF(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function $$(n,e){const r=MR(n,"").split(","),i=xR(r,e);i>=0&&(r.splice(i,1),wD(n,"",r.join(",")))}(this._element,this._name))}}function yF(n,e,t){wD(n,"PlayState",t,vF(n,e))}function vF(n,e){const t=MR(n,"");return t.indexOf(",")>0?xR(t.split(","),e):xR([t],e)}function xR(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function bF(n,e,t){t?n.removeEventListener(_F,e):n.addEventListener(_F,e)}function wD(n,e,t,r){const i=mF+e;if(null!=r){const s=n.style[i];if(s.length){const l=s.split(",");l[r]=t,t=l.join(",")}}n.style[i]=t}function MR(n,e){return n.style[mF+e]||""}class wF{constructor(e,t,r,i,s,l,d,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=d,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=l||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new j$(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:mR(this.element,r))})}this.currentSnapshot=e}}class W$ extends Uy{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=zN(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class CF{constructor(){this._count=0}validateStyleProperty(e){return aR(e)}matchesElement(e,t){return!1}containsElement(e,t){return lR(e,t)}query(e,t,r){return uR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(d=>zN(d));let i=`@keyframes ${t} {\n`,s="";r.forEach(d=>{s=" ";const p=parseFloat(d.offset);i+=`${s}${100*p}% {\n`,s+=" ",Object.keys(d).forEach(y=>{const E=d[y];switch(y){case"offset":return;case"easing":return void(E&&(i+=`${s}animation-timing-function: ${E};\n`));default:return void(i+=`${s}${y}: ${E};\n`)}}),i+=`${s}}\n`}),i+="}\n";const l=document.createElement("style");return l.textContent=i,l}animate(e,t,r,i,s,l=[],d){const p=l.filter(ne=>ne instanceof wF),y={};JN(r,i)&&p.forEach(ne=>{let je=ne.currentSnapshot;Object.keys(je).forEach(Ye=>y[Ye]=je[Ye])});const E=function Y$(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=eF(e,t,y));if(0==r)return new W$(e,E);const D="gen_css_kf_"+this._count++,M=this.buildKeyframeElement(e,D,t);(function K$(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(M);const B=gF(e,t),X=new wF(e,t,D,r,i,s,E,B);return X.onDestroy(()=>function Q$(n){n.parentNode.removeChild(n)}(M)),X}}class TF{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:mR(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class X${constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(DF().toString()),this._cssKeyframesDriver=new CF}validateStyleProperty(e){return aR(e)}matchesElement(e,t){return!1}containsElement(e,t){return lR(e,t)}query(e,t,r){return uR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,l=[],d){if(!d&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,l);const E={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(E.easing=s);const D={},M=l.filter(B=>B instanceof TF);JN(r,i)&&M.forEach(B=>{let X=B.currentSnapshot;Object.keys(X).forEach(ne=>D[ne]=X[ne])});const P=gF(e,t=eF(e,t=t.map(B=>kf(B,!1)),D));return new TF(e,t,E,P)}}function DF(){return UN()&&Element.prototype.animate||{}}let eG=(()=>{class n extends FN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?LN(t):t;return SF(this._renderer,null,r,"register",[i]),new tG(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class tG extends class UH{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new nG(this._id,e,t||{},this._renderer)}}class nG{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return SF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function SF(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const AF="@.disabled";let rG=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new xF("",s,this.engine),this._rendererCache.set(s,E)),E}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(l,d,t,E.name,E)};return r.data.animation.forEach(p),new iG(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(bD),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class xF{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==AF?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class iG extends xF{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==AF?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function sG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function oG(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let aG=(()=>{class n extends bD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(cR),h.LFG(ER))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const CD=new h.OlP("AnimationModuleType"),MF=[{provide:FN,useClass:eG},{provide:ER,useFactory:function uG(){return new f$}},{provide:bD,useClass:aG},{provide:h.FYo,useFactory:function cG(n,e,t){return new rG(n,e,t)},deps:[oi,bD,h.R0b]}],RF=[{provide:cR,useFactory:function lG(){return function J$(){return"function"==typeof DF()}()?new X$:new CF}},{provide:CD,useValue:"BrowserAnimations"},...MF],dG=[{provide:cR,useClass:qN},{provide:CD,useValue:"NoopAnimations"},...MF];let hG=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?dG:RF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:RF,imports:[dh]}),n})();const pG=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function fG(){return!0}});let Ul=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!zM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(BH),h.LFG(pG,8),h.LFG(se))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ww],ww]}),n})();function OF(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Tw(e)}}}function PF(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function NF(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Tw(e)}}}let mG=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _G{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const FF={enterDuration:225,exitDuration:150},RR=Cw({passive:!0}),LF=["mousedown","touchstart"],VF=["mouseup","mouseleave","touchend","touchcancel"];class vG{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Vy(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},FF),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function wG(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,p=t-i.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-l+"px",E.style.top=p-l+"px",E.style.height=2*l+"px",E.style.width=2*l+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E),function bG(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const D=new _G(this,E,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const M=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!M||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},FF),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Vy(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(LF))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(VF),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=KM(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!YM(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,RR)})})}_removeTriggerEvents(){this._triggerElement&&(LF.forEach(e=>{this._triggerElement.removeEventListener(e,this,RR)}),this._pointerUpEventsRegistered&&VF.forEach(e=>{this._triggerElement.removeEventListener(e,this,RR)}))}}const EG=new h.OlP("mat-ripple-global-options");let kR=(()=>{class n{constructor(t,r,i,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new vG(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(Gd),h.Y36(EG,8),h.Y36(CD,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&h.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),BF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ul],Ul]}),n})();function UF(...n){const e=(0,Ps.jO)(n),{args:t,keys:r}=ym(n),i=new Wn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,y=l;for(let E=0;E<l;E++){let D=!1;(0,ai.Xf)(t[E]).subscribe(new Un.Q(s,M=>{D||(D=!0,y--),d[E]=M},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?ma(r,d):d),s.complete())}))}});return e?i.pipe(pl(e)):i}class IG{}class Of{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Of?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Of;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Of?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class TG{encodeKey(e){return jF(e)}encodeValue(e){return jF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SG=/%(\d[a-f0-9])/gi,AG={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function jF(n){return encodeURIComponent(n).replace(SG,(e,t)=>{var r;return null!==(r=AG[t])&&void 0!==r?r:e})}function HF(n){return`${n}`}class Pf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TG,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DG(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(l)||[];p.push(d),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Pf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HF(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HF(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xG{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function $F(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function GF(n){return"undefined"!=typeof Blob&&n instanceof Blob}function zF(n){return"undefined"!=typeof FormData&&n instanceof FormData}class xw{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function MG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Of),this.context||(this.context=new xG),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new Pf,this.urlWithParams=t}serializeBody(){return null===this.body?null:$F(this.body)||GF(this.body)||zF(this.body)||function RG(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Pf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zF(this.body)?null:GF(this.body)?this.body.type||null:$F(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,P)=>M.set(P,e.setHeaders[P]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((M,P)=>M.set(P,e.setParams[P]),E)),new xw(r,i,l,{params:E,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:d})}}var us=(()=>((us=us||{})[us.Sent=0]="Sent",us[us.UploadProgress=1]="UploadProgress",us[us.ResponseHeader=2]="ResponseHeader",us[us.DownloadProgress=3]="DownloadProgress",us[us.Response=4]="Response",us[us.User=5]="User",us))();class OR extends class kG{constructor(e,t=200,r="OK"){this.headers=e.headers||new Of,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=us.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new OR({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function PR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let WF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof xw)s=t;else{let p,y;p=i.headers instanceof Of?i.headers:new Of(i.headers),i.params&&(y=i.params instanceof Pf?i.params:new Pf({fromObject:i.params})),s=new xw(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Xe(s).pipe(bn(p=>this.handler.handle(p)));if(t instanceof xw||"events"===i.observe)return l;const d=l.pipe(cr(p=>p instanceof OR));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,ht.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,ht.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Pf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,PR(i,r))}post(t,r,i={}){return this.request("POST",t,PR(i,r))}put(t,r,i={}){return this.request("PUT",t,PR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(IG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const PG=["*"];let ID;function Mw(n){var e;return(null===(e=function NG(){if(void 0===ID&&(ID=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(ID=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ID}())||void 0===e?void 0:e.createHTML(n))||n}function ZF(n){return Error(`Unable to find icon with the name "${n}"`)}function KF(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function YF(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Gg{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let TD=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Gg(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const l=this._sanitizer.sanitize(h.q3G.HTML,i);if(!l)throw YF(i);const d=Mw(l);return this._addSvgIconConfig(t,r,new Gg("",d,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Gg(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(h.q3G.HTML,r);if(!s)throw YF(r);const l=Mw(s);return this._addSvgIconSetConfig(t,new Gg("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,t);if(!r)throw KF(t);const i=this._cachedIconsByUrl.get(r);return i?Xe(DD(i)):this._loadSvgIconFromConfig(new Gg(t,null)).pipe((0,Ur.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,ht.U)(s=>DD(s)))}getNamedSvgIcon(t,r=""){const i=QF(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):function CG(n,e){const t=(0,ji.m)(n)?n:()=>n,r=i=>i.error(t());return new Wn.y(e?i=>e.schedule(r,0,i):r)}(ZF(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Xe(DD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ht.U)(r=>DD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Xe(i):UF(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(ui(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(h.q3G.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),Xe(null)})))).pipe((0,ht.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw ZF(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Ur.b)(r=>t.svgText=r),(0,ht.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Xe(null):this._fetchIcon(t).pipe((0,Ur.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const d=this._svgElementFromString(Mw("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Mw("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:l,value:d}=i[s];"id"!==l&&r.setAttribute(l,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,l=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function FG(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const d=this._sanitizer.sanitize(h.q3G.RESOURCE_URL,i);if(!d)throw KF(i);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe((0,ht.U)(E=>Mw(E)),vl(()=>this._inProgressUrlFetches.delete(d)),(0,fM.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(QF(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return VG(s)?new Gg(s.url,null,s.options):new Gg(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(WF,8),h.LFG(Sc),h.LFG(se,8),h.LFG(h.qLn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DD(n){return n.cloneNode(!0)}function QF(n,e){return n+":"+e}function VG(n){return!(!n.url||!n.options)}const BG=PF(class{constructor(n){this._elementRef=n}}),UG=new h.OlP("mat-icon-location",{providedIn:"root",factory:function jG(){const n=(0,h.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),XF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],HG=XF.map(n=>`[${n}]`).join(", "),$G=/^url\(['"]?#(.*?)['"]?\)$/;let JF=(()=>{class n extends BG{constructor(t,r,i,s,l){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=l,this._inline=!1,this._currentIconFetch=Ui.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Tw(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(HG),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)XF.forEach(l=>{const d=r[s],p=d.getAttribute(l),y=p?p.match($G):null;if(y){let E=i.get(d);E||(E=[],i.set(d,E)),E.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,Zn.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(TD),h.$8M("aria-hidden"),h.Y36(UG),h.Y36(h.qLn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(h.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),h.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[h.qOj],ngContentSelectors:PG,decls:1,vars:0,template:function(t,r){1&t&&(h.F$t(),h.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),GG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ul],Ul]}),n})();const zG=["mat-button",""],qG=["*"],ZG=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],KG=PF(OF(NF(class{constructor(n){this._elementRef=n}})));let YG=(()=>{class n extends KG{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of ZG)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(QM),h.Y36(CD,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&h.Gf(kR,5),2&t){let i;h.iGM(i=h.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(h.uIk("disabled",r.disabled||null),h.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[h.qOj],attrs:zG,ngContentSelectors:qG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"span",0),h.Hsn(1),h.qZA(),h._UZ(2,"span",1),h._UZ(3,"span",2)),2&t&&(h.xp6(2),h.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),h.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[kR],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),QG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[BF,Ul],Ul]}),n})();var e1=L(4408);let NR,XG=1;const SD={};function t1(n){return n in SD&&(delete SD[n],!0)}const JG={setImmediate(n){const e=XG++;return SD[e]=!0,NR||(NR=Promise.resolve()),NR.then(()=>t1(e)&&n()),e},clearImmediate(n){t1(n)}},{setImmediate:ez,clearImmediate:tz}=JG,AD={setImmediate(...n){const{delegate:e}=AD;return((null==e?void 0:e.setImmediate)||ez)(...n)},clearImmediate(n){const{delegate:e}=AD;return((null==e?void 0:e.clearImmediate)||tz)(n)},delegate:void 0};var n1=L(7565);const FR=new class rz extends n1.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class nz extends e1.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=AD.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(AD.clearImmediate(t),e._scheduled=void 0)}});function r1(n,e){return e?t=>po(e.pipe((0,Zn.q)(1),function iz(){return(0,Rn.e)((n,e)=>{n.subscribe(new Un.Q(e,ZM.Z))})}()),t.pipe(r1(n))):(0,kn.z)((t,r)=>n(t,r).pipe((0,Zn.q)(1),function sz(n){return(0,ht.U)(()=>n)}(t)))}var oz=L(3532);function s1(n=0,e,t=Jc.P){let r=-1;return null!=e&&((0,oz.K)(e)?t=e:r=e),new Wn.y(i=>{let s=function az(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function o1(n,e=Jc.z){const t=s1(n,e);return r1(()=>t)}class LR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lz extends LR{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class a1 extends LR{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class uz extends LR{constructor(e){super(),this.element=e instanceof h.SBq?e.nativeElement:e}}class dz extends class cz{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof lz?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof a1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof uz?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||h.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let hz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();var fz=L(1144);const pz=["addListener","removeListener"],gz=["addEventListener","removeEventListener"],mz=["on","off"];function VR(n,e,t,r){if((0,ji.m)(t)&&(r=t,t=void 0),r)return VR(n,e,t).pipe(pl(r));const[i,s]=function vz(n){return(0,ji.m)(n.addEventListener)&&(0,ji.m)(n.removeEventListener)}(n)?gz.map(l=>d=>n[l](e,d,t)):function _z(n){return(0,ji.m)(n.addListener)&&(0,ji.m)(n.removeListener)}(n)?pz.map(l1(n,e)):function yz(n){return(0,ji.m)(n.on)&&(0,ji.m)(n.off)}(n)?mz.map(l1(n,e)):[];if(!i&&(0,fz.z)(n))return(0,kn.z)(l=>VR(l,e,t))((0,ai.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Wn.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return i(d),()=>s(d)})}function l1(n,e){return t=>r=>n[t](e,r)}const Rw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Rw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Ui.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Rw;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Rw;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class wz extends n1.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class bz extends e1.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Rw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(Rw.cancelAnimationFrame(t),e._scheduled=void 0)}});function u1(n,e=Jc.P){return function Cz(n){return(0,Rn.e)((e,t)=>{let r=!1,i=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe(new Un.Q(t,y=>{r=!0,i=y,s||(0,ai.Xf)(n(y)).subscribe(s=new Un.Q(t,d,p))},()=>{l=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>s1(n,e))}let Tz=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Bn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Wn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(u1(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Xe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(cr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Vy(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>VR(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Gd),h.LFG(se,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c1=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Bn.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(u1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gd),h.LFG(h.R0b),h.LFG(se,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ww,BR],ww,BR]}),n})();const h1=sH();class Sz{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ti(-this._previousScrollPosition.left),e.style.top=Ti(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",l=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),h1&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),h1&&(r.scrollBehavior=s,i.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Az{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class f1{enable(){}disable(){}attach(){}}function UR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function p1(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class xz{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();UR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Mz=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new f1,this.close=l=>new Az(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new Sz(this._viewportRuler,this._document),this.reposition=l=>new xz(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tz),h.LFG(c1),h.LFG(h.R0b),h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class g1{constructor(e){if(this.scrollStrategy=new f1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Rz{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class kz{constructor(e,t,r,i,s,l,d,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new Bn.x,this._attachments=new Bn.x,this._detachments=new Bn.x,this._locationChanges=Ui.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new Bn.x,this._outsidePointerEvents=new Bn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Zn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ti(this._config.width),e.height=Ti(this._config.height),e.minWidth=Ti(this._config.minWidth),e.minHeight=Ti(this._config.minHeight),e.maxWidth=Ti(this._config.maxWidth),e.maxHeight=Ti(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=xN(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Iw((0,Fg.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let m1=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||zM()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),zM()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(Gd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _1="cdk-overlay-connected-position-bounding-box",Oz=/([A-Za-z%]+)$/;class Pz{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Bn.x,this._resizeSubscription=Ui.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(_1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,i,d),y=this._getOverlayPoint(p,t,d),E=this._getOverlayFit(y,t,r,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(E,y,r)?s.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<E.visibleArea)&&(l={overlayFit:E,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(s.length){let d=null,p=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&zg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(_1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;i="start"==r.originX?l:d}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=v1(t);let{x:l,y:d}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(l+=p),y&&(d+=y);let M=0-d,P=d+s.height-r.height,B=this._subtractOverflows(s.width,0-l,l+s.width-r.width),X=this._subtractOverflows(s.height,M,P),ne=B*X;return{visibleArea:ne,isCompletelyWithinViewport:s.width*s.height===ne,fitsInViewportVertically:X===s.height,fitsInViewportHorizontally:B==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,l=y1(this._overlayRef.getConfig().minHeight),d=y1(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=l&&l<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=v1(t),s=this._viewportRect,l=Math.max(e.x+i.width-s.width,0),d=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let E=0,D=0;return E=i.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-r.left-e.x:0,D=i.height<=s.height?p||-d:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:E,y:D},{x:e.x+E,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Rz(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,l,d,E,D,M;if("top"===t.overlayY)l=e.y,s=r.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=r.height-e.y+2*this._viewportMargin,s=r.height-d+this._viewportMargin;else{const P=Math.min(r.bottom-e.y+r.top,e.y),B=this._lastBoundingBoxSize.height;s=2*P,l=e.y-P,s>B&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-B/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)M=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,E=r.right-e.x;else{const P=Math.min(r.right-e.x+r.left,e.x),B=this._lastBoundingBoxSize.width;E=2*P,D=e.x-P,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-B/2)}return{top:l,left:D,bottom:d,right:M,width:E,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;i.height=Ti(r.height),i.top=Ti(r.top),i.bottom=Ti(r.bottom),i.width=Ti(r.width),i.left=Ti(r.left),i.right=Ti(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ti(s)),l&&(i.maxWidth=Ti(l))}this._lastBoundingBoxSize=r,zg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){zg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){zg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();zg(r,this._getExactOverlayY(t,e,E)),zg(r,this._getExactOverlayX(t,e,E))}else r.position="static";let d="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),r.transform=d.trim(),l.maxHeight&&(i?r.maxHeight=Ti(l.maxHeight):s&&(r.maxHeight="")),l.maxWidth&&(i?r.maxWidth=Ti(l.maxWidth):s&&(r.maxWidth="")),zg(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ti(s.y),i}_getExactOverlayX(e,t,r){let l,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ti(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:p1(e,r),isOriginOutsideView:UR(e,r),isOverlayClipped:p1(t,r),isOverlayOutsideView:UR(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&xN(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof h.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function zg(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function y1(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Oz);return t&&"px"!==t?null:parseFloat(e)}return n||null}function v1(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const b1="cdk-global-overlay-wrapper";class Nz{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(b1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:l,maxHeight:d}=r,p=!("100%"!==i&&"100vw"!==i||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(b1),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Fz=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new Nz}flexibleConnectedTo(t){return new Pz(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(c1),h.LFG(se),h.LFG(Gd),h.LFG(m1))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w1=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lz=(()=>{class n extends w1{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(i)):d.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vz=(()=>{class n extends w1{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Bg(s)},this._clickListener=s=>{const l=Bg(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(l)||E.overlayElement.contains(d))break;const D=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(se),h.LFG(Gd),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bz=0,xD=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E,D,M){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=y,this._directionality=E,this._location=D,this._outsideClickDispatcher=M}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),l=new g1(t);return l.direction=l.direction||this._directionality.value,new kz(s,r,i,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Bz++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(h.z2F)),new dz(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mz),h.LFG(m1),h.LFG(h._Vd),h.LFG(Fz),h.LFG(Lz),h.LFG(h.zs3),h.LFG(h.R0b),h.LFG(se),h.LFG(EN),h.LFG(ot),h.LFG(Vz))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Hz={provide:new h.OlP("cdk-connected-overlay-scroll-strategy"),deps:[xD],useFactory:function jz(n){return()=>n.scrollStrategies.reposition()}};let $z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xD,Hz],imports:[[ww,hz,d1],d1]}),n})();const Gz=["mat-menu-item",""];function zz(n,e){1&n&&(h.O4$(),h.TgZ(0,"svg",2),h._UZ(1,"polygon",3),h.qZA())}const E1=["*"];function qz(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",0),h.NdJ("keydown",function(i){return h.CHM(t),h.oxw()._handleKeydown(i)})("click",function(){return h.CHM(t),h.oxw().closed.emit("click")})("@transformMenu.start",function(i){return h.CHM(t),h.oxw()._onAnimationStart(i)})("@transformMenu.done",function(i){return h.CHM(t),h.oxw()._onAnimationDone(i)}),h.TgZ(1,"div",1),h.Hsn(2),h.qZA(),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),h.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const MD={transformMenu:JM("transformMenu",[eR("void",qd({opacity:0,transform:"scale(0.8)"})),sD("void => enter",iD("120ms cubic-bezier(0, 0, 0.2, 1)",qd({opacity:1,transform:"scale(1)"}))),sD("* => void",iD("100ms 25ms linear",qd({opacity:0})))]),fadeInItems:JM("fadeInItems",[eR("showing",qd({opacity:1})),sD("void => *",[qd({opacity:0}),iD("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Wz=new h.OlP("MatMenuContent"),jR=new h.OlP("MAT_MENU_PANEL"),Zz=NF(OF(class{}));let HR=(()=>{class n extends Zz{constructor(t,r,i,s,l){var d;super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this._hovered=new Bn.x,this._focused=new Bn.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(d=null==s?void 0:s.addItem)||void 0===d||d.call(s,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),i=r.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(se),h.Y36(QM),h.Y36(jR,8),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(h.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),h.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[h.qOj],attrs:Gz,ngContentSelectors:E1,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(h.F$t(),h.Hsn(0),h._UZ(1,"div",0),h.YNc(2,zz,2,0,"svg",1)),2&t&&(h.xp6(1),h.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),h.xp6(1),h.Q6J("ngIf",r._triggersSubmenu))},directives:[kR,Fr],encapsulation:2,changeDetection:0}),n})();const C1=new h.OlP("mat-menu-default-options",{providedIn:"root",factory:function Kz(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Yz=0,kw=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new h.n_E,this._tabSubscription=Ui.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Bn.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new h.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+Yz++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Tw(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Tw(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new AH(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(li(this._directDescendantItems),Zt(t=>(0,Fg.T)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const i=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=i.activeItem)||void 0===r?void 0:r._hasFocus())){const s=t.toArray(),l=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[l]&&!s[l].disabled?i.setActiveItem(l):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(li(this._directDescendantItems),Zt(r=>(0,Fg.T)(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:SN(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe((0,Zn.q)(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){var i;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===r,s["mat-menu-below"]="below"===r,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(li(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(C1),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,Wz,5),h.Suo(i,HR,5),h.Suo(i,HR,4)),2&t){let s;h.iGM(s=h.CRH())&&(r.lazyContent=s.first),h.iGM(s=h.CRH())&&(r._allItems=s),h.iGM(s=h.CRH())&&(r.items=s)}},viewQuery:function(t,r){if(1&t&&h.Gf(h.Rgc,5),2&t){let i;h.iGM(i=h.CRH())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),Qz=(()=>{class n extends kw{constructor(t,r,i,s){super(t,r,i,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(C1),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&h.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[h._Bn([{provide:jR,useExisting:n}]),h.qOj],ngContentSelectors:E1,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,qz,3,6,"ng-template"))},directives:[so],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[MD.transformMenu,MD.fadeInItems]},changeDetection:0}),n})();const I1=new h.OlP("mat-menu-scroll-strategy"),Jz={provide:I1,deps:[xD],useFactory:function Xz(n){return()=>n.scrollStrategies.reposition()}},D1=Cw({passive:!0});let eq=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=d,this._dir=p,this._focusMonitor=y,this._ngZone=E,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Ui.w0.EMPTY,this._hoverSubscription=Ui.w0.EMPTY,this._menuCloseSubscription=Ui.w0.EMPTY,this._handleTouchStart=D=>{YM(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new h.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new h.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof kw?l:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,D1),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,D1),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),i=r.positionStrategy;this._setPosition(i),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof kw&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Iw(this.menu.close)).subscribe(()=>{i.withLockedPosition(!1).reapplyLastPosition(),i.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof kw?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(cr(i=>"void"===i.toState),(0,Zn.q)(1),Iw(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new g1({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const i="start"===r.connectionPair.overlayX?"after":"before",s="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(i,s)):this.menu.setPositionClasses(i,s)})}_setPosition(t){let[r,i]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,l]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[d,p]=[s,l],[y,E]=[r,i],D=0;this.triggersSubmenu()?(E=r="before"===this.menu.xPosition?"start":"end",i=y="end"===r?"start":"end",D="bottom"===s?8:-8):this.menu.overlapTrigger||(d="top"===s?"bottom":"top",p="top"===l?"bottom":"top"),t.withPositions([{originX:r,originY:d,overlayX:y,overlayY:s,offsetY:D},{originX:i,originY:d,overlayX:E,overlayY:s,offsetY:D},{originX:r,originY:p,overlayX:y,overlayY:l,offsetY:-D},{originX:i,originY:p,overlayX:E,overlayY:l,offsetY:-D}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:Xe(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(cr(l=>l!==this._menuItemInstance),cr(()=>this._menuOpen)):Xe();return(0,Fg.T)(t,i,s,r)}_handleMousedown(t){KM(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(cr(t=>t===this._menuItemInstance&&!t.disabled),o1(0,FR)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof kw&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Zn.q)(1),o1(0,FR),Iw(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new a1(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xD),h.Y36(h.SBq),h.Y36(h.s_b),h.Y36(I1),h.Y36(jR,8),h.Y36(HR,10),h.Y36(EN,8),h.Y36(QM),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),2&t&&h.uIk("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),tq=(()=>{class n extends eq{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[h.qOj]}),n})(),nq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Jz],imports:[[Fi,Ul,BF,$z],BR,Ul]}),n})();function rq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",11),h._UZ(1,"img",12),h.TgZ(2,"div",13),h.TgZ(3,"div",14),h._uU(4," Ol\xe1: "),h.TgZ(5,"strong"),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"span",15),h._uU(8),h.qZA(),h.qZA(),h.TgZ(9,"button",16),h.NdJ("click",function(){return h.CHM(t),h.oxw().authService.SignOut()}),h._UZ(10,"i",17),h._uU(11,"Log out"),h.qZA(),h.qZA()}if(2&n){const t=e.ngIf;h.xp6(1),h.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",h.LSH),h.s9C("alt",t.displayName),h.xp6(5),h.Oqu(t.displayName?t.displayName:"User"),h.xp6(2),h.Oqu(t.email)}}const iq=function(){return["/chat"]};let sq=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:30,vars:4,consts:[[1,"container-home"],[2,"display","flex"],[2,"border-radius","20px 0px 0px 20px"],[1,"pesquisar"],["mat-raised-button","",3,"routerLink"],["mat-raised-button","",3,"matMenuTriggerFor"],["menuTrigger",""],["menu","matMenu"],["style","height:350px;width: 270px;","class","perfil",4,"ngIf"],[1,"descricao",2,"display","flex","flex-wrap","wrap"],[1,"text-center","p-3",2,"display","flex","flex-direction","column"],[1,"perfil",2,"height","350px","width","270px"],[1,"mr-5","img-thumbnail","rounded-circle",2,"height","5rem",3,"src","alt"],[2,"text-align","center","display","flex","flex-direction","column"],[2,"font-size","20px"],[2,"font-size","15px"],["mat-raised-button","",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"section"),h.TgZ(2,"h2"),h._uU(3,"Me ajuda ae"),h.qZA(),h.TgZ(4,"div",1),h._UZ(5,"input",2),h.TgZ(6,"button",3),h.TgZ(7,"mat-icon"),h._uU(8,"search"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(9,"nav"),h.TgZ(10,"ul"),h.TgZ(11,"li"),h.TgZ(12,"button",4),h._uU(13,"Chat"),h.qZA(),h.qZA(),h.TgZ(14,"li"),h.TgZ(15,"button",5,6),h._uU(17,"Perfil"),h.qZA(),h.qZA(),h.TgZ(18,"mat-menu",null,7),h.YNc(20,rq,12,4,"div",8),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(21,"div",9),h.TgZ(22,"h3"),h._uU(23," O intuito do projeto incentivar cada vez mais os alunos com as atividades escolares,e com isso foi desenvolvido esse sistema no qual ajudaria a realizar-los "),h.qZA(),h.qZA(),h.TgZ(24,"footer"),h.TgZ(25,"div",10),h.TgZ(26,"p"),h._uU(27,"\xa9 2022 Copyright"),h.qZA(),h.TgZ(28,"p"),h._uU(29,"Desenvolvedores: Alan Gabriel Kuiawa e Maria Eduarda Guedes"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const i=h.MAs(19);h.xp6(12),h.Q6J("routerLink",h.DdM(3,iq)),h.xp6(3),h.Q6J("matMenuTriggerFor",i),h.xp6(5),h.Q6J("ngIf",r.authService.userData)}},directives:[JF,YG,wu,tq,Qz,Fr],styles:["body[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;font-size:1.2rem}li[_ngcontent-%COMP%]{list-style:none;margin:10px}ul[_ngcontent-%COMP%]{display:flex;justify-content:end}.botao[_ngcontent-%COMP%]{display:flex;justify-content:end;margin:15px}section[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{background-color:#159a9c;height:10%;display:flex;align-items:center;justify-content:space-between;padding:5px}.pesquisa_input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}input[_ngcontent-%COMP%]{width:40rem;border-radius:5px;height:2rem;box-shadow:0 0;border:0 none;outline:0}.pesquisar[_ngcontent-%COMP%]{border-radius:0 20px 20px 0;background-color:gold;display:flex;align-items:center;justify-content:center}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{box-shadow:0 0;border:0 none;outline:0}.search[_ngcontent-%COMP%]{background-color:#ff0;align-items:center;padding-left:650px;height:30px;width:8px}.descricao[_ngcontent-%COMP%]{background-color:#2cb0b3;display:flex;align-items:center;flex-grow:1}h3[_ngcontent-%COMP%]{font-family:Source Sans Pro,sans-serif;font-size:35px;font-weight:700}.container-home[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;min-height:100%}footer[_ngcontent-%COMP%]{background:#159A9C;margin-top:auto;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;padding:1rem 5rem}.perfil[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:space-between;padding:4rem 0}@media (max-width: 767px){input[_ngcontent-%COMP%]{width:5rem}#chat[_ngcontent-%COMP%]{height:82vh}}"]}),n})();class S1{constructor(){this.text=""}}const A1="@firebase/database",x1="0.13.10";let $R="";function M1(n){$R=n}class lq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,V.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,V.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class uq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,V.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const R1=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lq(e)}}catch(e){}return new uq},qg=R1("localStorage"),GR=R1("sessionStorage"),$y=new bo.Yd("@firebase/database"),k1=function(){let n=1;return function(){return n++}}(),O1=function(n){const e=(0,V.dS)(n),t=new V.gQ;t.update(e);const r=t.digest();return V.US.encodeByteArray(r)},Ow=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ow.apply(null,r):e+="object"==typeof r?(0,V.Wl)(r):r,e+=" "}return e};let Wg=null,P1=!0;const N1=function(n,e){(0,V.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($y.logLevel=bo.in.VERBOSE,Wg=$y.log.bind($y),e&&GR.set("logging_enabled",!0)):"function"==typeof n?Wg=n:(Wg=null,GR.remove("logging_enabled"))},Gi=function(...n){if(!0===P1&&(P1=!1,null===Wg&&!0===GR.get("logging_enabled")&&N1(!0)),Wg){const e=Ow.apply(null,n);Wg(e)}},Pw=function(n){return function(...e){Gi(n,...e)}},zR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ow(...n);$y.error(e)},ec=function(...n){const e=`FIREBASE FATAL ERROR: ${Ow(...n)}`;throw $y.error(e),new Error(e)},Cs=function(...n){const e="FIREBASE WARNING: "+Ow(...n);$y.warn(e)},RD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Wd="[MIN_NAME]",tc="[MAX_NAME]",Zg=function(n,e){if(n===e)return 0;if(n===Wd||e===tc)return-1;if(e===Wd||n===tc)return 1;{const t=kD(n),r=kD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},hq=function(n,e){return n===e?0:n<e?-1:1},Nw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(e))},qR=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,V.Wl)(e[r]),t+=":",t+=qR(n[e[r]]);return t+="}",t},F1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const L1=function(n){(0,V.hu)(!RD(n),"Invalid JSON number");const r=1023;let i,s,l,d,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const E=y.join("");let D="";for(p=0;p<64;p+=8){let M=parseInt(E.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},mq=new RegExp("^-?(0*)\\d{1,10}$"),V1=-2147483648,WR=2147483647,kD=function(n){if(mq.test(n)){const e=Number(n);if(e>=V1&&e<=WR)return e}return null},Gy=function(n){try{n()}catch(e){setTimeout(()=>{throw Cs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Fw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class yq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Cs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cs(e)}}let Lw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q1="websocket",W1="long_polling";class KR{constructor(e,t,r,i,s=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Z1(n,e,t){let r;if((0,V.hu)("string"==typeof e,"typeof type must == string"),(0,V.hu)("object"==typeof t,"typeof params must == object"),e===q1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==W1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function bq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return zi(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class wq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,V.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,V.p$)(this.counters_)}}const YR={},QR={};function XR(n){const e=n.toString();return YR[e]||(YR[e]=new wq),YR[e]}class Cq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Nf{constructor(e,t,r,i,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pw(e),this.stats_=XR(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Z1(t,W1,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JR((...s)=>{const[l,d,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nf.forceAllow_=!0}static forceDisallow(){Nf.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Nf.forceAllow_&&(Nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,V.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,V.h$)(t),i=F1(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,V.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=k1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Gi("frame writing exception"),d.stack&&Gi(d.stack),Gi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,V.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let PD=null;"undefined"!=typeof MozWebSocket?PD=MozWebSocket:"undefined"!=typeof WebSocket&&(PD=WebSocket);let zy=(()=>{class n{constructor(t,r,i,s,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pw(this.connId),this.stats_=XR(r),this.connURL=n.connectionURL_(r,d,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const d={v:"5"};return!(0,V.Yr)()&&"undefined"!=typeof location&&location.hostname&&$1.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),l&&(d.p=l),Z1(t,q1,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qg.set("previous_websocket_failure",!0);try{let i;if((0,V.Yr)()){i={headers:{"User-Agent":`Firebase/5/${$R}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new PD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==PD&&!n.forceDisallow_}static previouslyFailed(){return qg.isInMemoryStorage||!0===qg.get("previous_websocket_failure")}markConnectionHealthy(){qg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,V.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=F1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),tL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Nf,zy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zy&&zy.isAvailable();let i=r&&!zy.previouslyFailed();if(t.webSocketOnly&&(r||Cs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zy];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class lL{constructor(e,t,r,i,s,l,d,p,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pw("c:"+this.id+":"),this.transportManager_=new tL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Nw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?zR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Cs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class uL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class cL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,V.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,V.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ND extends cL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ND}getInitialEvent(e){return(0,V.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fn(){return new Gn("")}function un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ff(n){return n.pieces_.length-n.pieceNum_}function rr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function tk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Vw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function eo(n,e){const t=un(n),r=un(e);if(null===t)return e;if(t===r)return eo(rr(n),rr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function zq(n,e){const t=Vw(n,0),r=Vw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Zg(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function nk(n,e){if(Ff(n)!==Ff(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Wa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ff(n)>Ff(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class qq{constructor(e,t){this.errorPrefix_=t,this.parts_=Vw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);pL(this)}}function pL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kg(n))}function Kg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class rk extends cL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new rk}getInitialEvent(e){return(0,V.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bw=1e3;let LD,Yg=(()=>{class n extends uL{constructor(t,r,i,s,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Pw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ND.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,V.Wl)(l)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new V.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,V.r3)(t,"w")){const i=(0,V.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Cs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,V.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,V.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,V.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):zR("Unrecognized action received from server: "+(0,V.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};t.realtime_={close:E,sendRequest:function(P){(0,V.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?Gi("getToken() completed but was canceled"):(Gi("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=B&&B.token,y=new lL(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,X=>{Cs(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&Cs(P),E())}}})()}interrupt(t){Gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>qR(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+$R.replace(/\./g,"-")]=1,(0,V.uI)()?t["framework.cordova"]=1:(0,V.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ND.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class FD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn(Wd,e),i=new fn(Wd,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class _L extends FD{static get __EMPTY_NODE(){return LD}static set __EMPTY_NODE(e){LD=e}compare(e,t){return Zg(e.name,t.name)}isDefinedOn(e){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(tc,LD)}makePost(e,t){return(0,V.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,LD)}toString(){return".key"}}const nc=new _L;class VD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let sk,jl=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Ao.EMPTY_NODE,this.right=null!=l?l:Ao.EMPTY_NODE}copy(t,r,i,s,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ao.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ao.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ao{constructor(e,t=Ao.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ao(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,jl.BLACK,null,null))}remove(e){return new Ao(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VD(this.root_,null,this.comparator_,!0,e)}}function e3(n,e){return Zg(n.name,e.name)}function ik(n,e){return Zg(n,e)}Ao.EMPTY_NODE=new class Jq{copy(e,t,r,i,s){return this}insert(e,t,r){return new jl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yL=function(n){return"number"==typeof n?"number:"+L1(n):"string:"+n},vL=function(n){if(n.isLeafNode()){const e=n.val();(0,V.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,V.r3)(e,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===sk||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===sk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bL,wL,EL,qy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vL(this.priorityNode_)}static set __childrenNodeConstructor(t){bL=t}static get __childrenNodeConstructor(){return bL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return cn(t)?this:".priority"===un(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=un(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===Ff(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?L1(this.value_):this.value_,this.lazyHash_=O1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(s>=0,"Unknown leaf type: "+r),(0,V.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const fr=new class s3 extends FD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Zg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(tc,new qy("[PRIORITY-POST]",EL))}makePost(e,t){const r=wL(e);return new fn(t,new qy("[PRIORITY-POST]",r))}toString(){return".priority"}},o3=Math.log(2);class a3{constructor(e){this.count=parseInt(Math.log(e+1)/o3,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const BD=function(n,e,t,r){n.sort(e);const i=function(p,y){const E=y-p;let D,M;if(0===E)return null;if(1===E)return D=n[p],M=t?t(D):D,new jl(M,D.node,jl.BLACK,null,null);{const P=parseInt(E/2,10)+p,B=i(p,P),X=i(P+1,y);return D=n[P],M=t?t(D):D,new jl(M,D.node,jl.BLACK,B,X)}},d=function(p){let y=null,E=null,D=n.length;const M=function(B,X){const ne=D-B,je=D;D-=B;const Ye=i(ne+1,je),Ge=n[ne],We=t?t(Ge):Ge;P(new jl(We,Ge.node,X,null,Ye))},P=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<p.count;++B){const X=p.nextBitIsOne(),ne=Math.pow(2,p.count-(B+1));X?M(ne,jl.BLACK):(M(ne,jl.BLACK),M(ne,jl.RED))}return E}(new a3(n.length));return new Ao(r||e,d)};let ok;const Wy={};class Zd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,V.hu)(Wy&&fr,"ChildrenNode.ts has not been loaded"),ok=ok||new Zd({".priority":Wy},{".priority":fr}),ok}get(e){const t=(0,V.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ao?t:null}hasIndex(e){return(0,V.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,V.hu)(e!==nc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(fn.Wrap);let d,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();d=i?BD(r,e.getCompare()):Wy;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const E=Object.assign({},this.indexes_);return E[p]=d,new Zd(E,y)}addToIndexes(e,t){const r=(0,V.UI)(this.indexes_,(i,s)=>{const l=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(l,"Missing index implementation for "+s),i===Wy){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(fn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),BD(d,l.getCompare())}return Wy}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new fn(e.name,d))),p.insert(e,e.node)}});return new Zd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,V.UI)(this.indexes_,i=>{if(i===Wy)return i;{const s=t.get(e.name);return s?i.remove(new fn(e.name,s)):i}});return new Zd(r,this.indexSet_)}}let Uw,Xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vL(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uw||(Uw=new n(new Ao(ik),null,Zd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Uw:r}}getChild(t){const r=un(t);return null===r?this:this.getImmediateChild(r).getChild(rr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?Uw:this.priorityNode_;return new n(s,d,l)}}updateChild(t,r){const i=un(t);if(null===i)return r;{(0,V.hu)(".priority"!==un(t)||1===Ff(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(rr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(fr,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yL(this.getPriority().val())+":"),this.forEachChild(fr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":O1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new fn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,fn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jw?-1:0}withIndex(t){if(t===nc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===nc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(fr),s=r.getIterator(fr);let l=i.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===nc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jw=new class l3 extends Xt{constructor(){super(new Ao(ik),Xt.EMPTY_NODE,Zd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}};function Gr(n,e=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,V.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qy(n,Gr(e));if(n instanceof Array){let t=Xt.EMPTY_NODE;return zi(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const s=Gr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Gr(e))}{const t=[];let r=!1;if(zi(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Gr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new fn(l,p)))}}),0===t.length)return Xt.EMPTY_NODE;const s=BD(t,e3,l=>l.name,ik);if(r){const l=BD(t,fr.getCompare());return new Xt(s,Gr(e),new Zd({".priority":l},{".priority":fr}))}return new Xt(s,Gr(e),Zd.Default)}}Object.defineProperties(fn,{MIN:{value:new fn(Wd,Xt.EMPTY_NODE)},MAX:{value:new fn(tc,jw)}}),_L.__EMPTY_NODE=Xt.EMPTY_NODE,qy.__childrenNodeConstructor=Xt,function t3(n){sk=n}(jw),function r3(n){EL=n}(jw),function n3(n){wL=n}(Gr);class ak extends FD{constructor(e){super(),this.indexPath_=e,(0,V.hu)(!cn(e)&&".priority"!==un(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Zg(e.name,t.name):s}makePost(e,t){const r=Gr(e),i=Xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,jw);return new fn(tc,e)}toString(){return Vw(this.indexPath_,0).join("/")}}const lk=new class c3 extends FD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=Gr(e);return new fn(t,r)}toString(){return".value"}},Zy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",d3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Zy.charAt(t%64),t=Math.floor(t/64);(0,V.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Zy.charAt(e[i]);return(0,V.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),TL=function(n){if(n===""+WR)return"-";const e=kD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return tc;const s=Zy.charAt(Zy.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},DL=function(n){if(n===""+V1)return Wd;const e=kD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+WR:(delete t[t.length-1],t.join("")):(t[t.length-1]=Zy.charAt(Zy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function SL(n){return{type:"value",snapshotNode:n}}function Ky(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Hw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function $w(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ck{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,V.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Hw(t,d)):(0,V.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Ky(t,r)):l.trackChildChange($w(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(fr,(i,s)=>{t.hasChild(i)||r.trackChildChange(Hw(i,s))}),t.isLeafNode()||t.forEachChild(fr,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange($w(i,s,l))}else r.trackChildChange(Ky(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Gw{constructor(e){this.indexedFilter_=new ck(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Gw.getStartPost_(e),this.endPost_=Gw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,l){return this.matches(new fn(t,r))||(r=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xt.EMPTY_NODE);const s=this;return t.forEachChild(fr,(l,d)=>{s.matches(new fn(l,d))||(i=i.updateImmediateChild(l,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class f3{constructor(e){this.rangedFilter_=new Gw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new fn(t,r))||(r=Xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Xt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Xt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(M,P)=>D(P,M)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const D=p.getNext();!E&&d(s,D)<=0&&(E=!0),E&&y<this.limit_&&d(D,l)<=0?y++:i=i.updateImmediateChild(D.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(M,P)=>D(P,M)}else l=this.index_.getCompare();const d=e;(0,V.hu)(d.numChildren()===this.limit_,"");const p=new fn(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||d.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const P=null==M?1:l(M,p);if(E&&!r.isEmpty()&&P>=0)return null!=s&&s.trackChildChange($w(t,r,D)),d.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(Hw(t,D));const X=d.updateImmediateChild(t,Xt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(Ky(M.name,M.node)),X.updateImmediateChild(M.name,M.node)):X}}return r.isEmpty()?e:E&&l(y,p)>=0?(null!=s&&(s.trackChildChange(Hw(y.name,y.node)),s.trackChildChange(Ky(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Xt.EMPTY_NODE)):e}}class UD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fr}copy(){const e=new UD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function hk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jD(n,e){const t=n.copy();return t.index_=e,t}function AL(n){const e={};if(n.isDefault())return e;let t;return n.index_===fr?t="$priority":n.index_===lk?t="$value":n.index_===nc?t="$key":((0,V.hu)(n.index_ instanceof ak,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,V.Wl)(t),n.startSet_&&(e.startAt=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,V.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,V.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function xL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==fr&&(e.i=n.index_.toString()),e}class HD extends uL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,V.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=HD.getListenId_(e,r),d={};this.listens_[l]=d;const p=AL(e._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let D=E;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,V.DV)(this.listens_,l)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=HD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=AL(e._queryParams),r=e._path.toString(),i=new V.BH;return this.restRequest_(r+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,V.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,V.cI)(d.responseText)}catch(y){Cs("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&Cs("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class v3{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $D(){return{value:null,children:new Map}}function Yy(n,e,t){if(cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=un(e);n.children.has(r)||n.children.set(r,$D()),Yy(n.children.get(r),e=rr(e),t)}}function fk(n,e){if(cn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(fr,(r,i)=>{Yy(n,new Gn(r),i)}),fk(n,e)}}if(n.children.size>0){const t=un(e);return e=rr(e),n.children.has(t)&&fk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function pk(n,e,t){null!==n.value?t(e,n.value):function b3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pk(i,new Gn(e.toString()+"/"+r),t)})}class w3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class I3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new w3(e);const r=1e4+2e4*Math.random();Fw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;zi(e,(i,s)=>{s>0&&(0,V.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Fw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Za=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Za||(Za={})),Za))();function _k(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class GD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new GD(Fn(),t,this.revert)}}return(0,V.hu)(un(this.path)===e,"operationForChild called for unrelated child."),new GD(rr(this.path),this.affectedTree,this.revert)}}class zw{constructor(e,t){this.source=e,this.path=t,this.type=Za.LISTEN_COMPLETE}operationForChild(e){return cn(this.path)?new zw(this.source,Fn()):new zw(this.source,rr(this.path))}}class Qg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Za.OVERWRITE}operationForChild(e){return cn(this.path)?new Qg(this.source,Fn(),this.snap.getImmediateChild(e)):new Qg(this.source,rr(this.path),this.snap)}}class Qy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Za.MERGE}operationForChild(e){if(cn(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Qg(this.source,Fn(),t.value):new Qy(this.source,Fn(),t)}return(0,V.hu)(un(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qy(this.source,rr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=un(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class T3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qw(n,e,t,r,i,s){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function A3(n,e,t){if(null==e.childName||null==t.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function S3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function zD(n,e){return{eventCache:n,serverCache:e}}function Ww(n,e,t,r){return zD(new Lf(e,t,r),n.serverCache)}function RL(n,e,t,r){return zD(n.eventCache,new Lf(e,t,r))}function qD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yk;class pr{constructor(e,t=(()=>(yk||(yk=new Ao(hq)),yk))()){this.value=e,this.children=t}static fromObject(e){let t=new pr(null);return zi(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Fn(),value:this.value};if(cn(e))return null;{const r=un(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(rr(e),t);return null!=s?{path:Pr(new Gn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const t=un(e),r=this.children.get(t);return null!==r?r.subtree(rr(e)):new pr(null)}}set(e,t){if(cn(e))return new pr(t,this.children);{const r=un(e),s=(this.children.get(r)||new pr(null)).set(rr(e),t),l=this.children.insert(r,s);return new pr(this.value,l)}}remove(e){if(cn(e))return this.children.isEmpty()?new pr(null):new pr(null,this.children);{const t=un(e),r=this.children.get(t);if(r){const i=r.remove(rr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new pr(null):new pr(this.value,s)}return this}}get(e){if(cn(e))return this.value;{const t=un(e),r=this.children.get(t);return r?r.get(rr(e)):null}}setTree(e,t){if(cn(e))return t;{const r=un(e),s=(this.children.get(r)||new pr(null)).setTree(rr(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new pr(this.value,l)}}fold(e){return this.fold_(Fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(cn(e))return null;{const s=un(e),l=this.children.get(s);return l?l.findOnPath_(rr(e),Pr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fn(),t)}foreachOnPath_(e,t,r){if(cn(e))return this;{this.value&&r(t,this.value);const i=un(e),s=this.children.get(i);return s?s.foreachOnPath_(rr(e),Pr(t,i),r):new pr(null)}}foreach(e){this.foreach_(Fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Hl{constructor(e){this.writeTree_=e}static empty(){return new Hl(new pr(null))}}function Zw(n,e,t){if(cn(e))return new Hl(new pr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=eo(i,e);return s=s.updateChild(l,t),new Hl(n.writeTree_.set(i,s))}{const i=new pr(t),s=n.writeTree_.setTree(e,i);return new Hl(s)}}}function vk(n,e,t){let r=n;return zi(t,(i,s)=>{r=Zw(r,Pr(e,i),s)}),r}function kL(n,e){if(cn(e))return Hl.empty();{const t=n.writeTree_.setTree(e,new pr(null));return new Hl(t)}}function bk(n,e){return null!=Jg(n,e)}function Jg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(eo(t.path,e)):null}function OL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(fr,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function Vf(n,e){if(cn(e))return n;{const t=Jg(n,e);return new Hl(null!=t?new pr(t):n.writeTree_.subtree(e))}}function wk(n){return n.writeTree_.isEmpty()}function Xy(n,e){return PL(Fn(),n.writeTree_,e)}function PL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=PL(Pr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Pr(n,".priority"),r)),t}}function WD(n,e){return BL(e,n)}function P3(n,e){if(n.snap)return Wa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Wa(Pr(n.path,t),e))return!0;return!1}function F3(n){return n.visible}function NL(n,e,t){let r=Hl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let d;if(s.snap)Wa(t,l)?(d=eo(t,l),r=Zw(r,d,s.snap)):Wa(l,t)&&(d=eo(l,t),r=Zw(r,Fn(),s.snap.getChild(d)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(Wa(t,l))d=eo(t,l),r=vk(r,d,s.children);else if(Wa(l,t))if(d=eo(l,t),cn(d))r=vk(r,Fn(),s.children);else{const p=(0,V.DV)(s.children,un(d));if(p){const y=p.getChild(rr(d));r=Zw(r,Fn(),y)}}}}}return r}function FL(n,e,t,r,i){if(r||i){const s=Vf(n.visibleWrites,e);return!i&&wk(s)?t:i||null!=t||bk(s,Fn())?Xy(NL(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Wa(y.path,e)||Wa(e,y.path))},e),t||Xt.EMPTY_NODE):null}{const s=Jg(n.visibleWrites,e);if(null!=s)return s;{const l=Vf(n.visibleWrites,e);return wk(l)?t:null!=t||bk(l,Fn())?Xy(l,t||Xt.EMPTY_NODE):null}}}function ZD(n,e,t,r){return FL(n.writeTree,n.treePath,e,t,r)}function Ek(n,e){return function L3(n,e,t){let r=Xt.EMPTY_NODE;const i=Jg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(fr,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=Vf(n.visibleWrites,e);return t.forEachChild(fr,(l,d)=>{const p=Xy(Vf(s,new Gn(l)),d);r=r.updateImmediateChild(l,p)}),OL(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return OL(Vf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function LL(n,e,t,r){return function V3(n,e,t,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Pr(e,t);if(bk(n.visibleWrites,s))return null;{const l=Vf(n.visibleWrites,s);return wk(l)?i.getChild(t):Xy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function KD(n,e){return function U3(n,e){return Jg(n.visibleWrites,e)}(n.writeTree,Pr(n.treePath,e))}function Ck(n,e,t){return function B3(n,e,t,r){const i=Pr(e,t),s=Jg(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Xy(Vf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function VL(n,e){return BL(Pr(n.treePath,e),n.writeTree)}function BL(n,e){return{treePath:n,writeTree:e}}class G3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,V.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,$w(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Hw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Ky(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,$w(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UL=new class z3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Ik{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Lf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ck(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xg(this.viewCache_),s=function $3(n,e,t,r,i,s){return function j3(n,e,t,r,i,s,l){let d;const p=Vf(n.visibleWrites,e),y=Jg(p,Fn());if(null!=y)d=y;else{if(null==t)return[];d=Xy(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const E=[],D=l.getCompare(),M=s?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let P=M.getNext();for(;P&&E.length<i;)0!==D(P,r)&&E.push(P),P=M.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function jL(n,e,t,r,i,s){const l=e.eventCache;if(null!=KD(r,t))return e;{let d,p;if(cn(t))if((0,V.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Xg(e),D=Ek(r,y instanceof Xt?y:Xt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=ZD(r,Xg(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=un(t);if(".priority"===y){(0,V.hu)(1===Ff(t),"Can't have a priority with additional path components");const E=l.getNode();p=e.serverCache.getNode();const D=LL(r,t,E,p);d=null!=D?n.filter.updatePriority(E,D):l.getNode()}else{const E=rr(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const M=LL(r,t,l.getNode(),p);D=null!=M?l.getNode().getImmediateChild(y).updateChild(E,M):l.getNode().getImmediateChild(y)}else D=Ck(r,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,E,i,s):l.getNode()}}return Ww(e,d,l.isFullyInitialized()||cn(t),n.filter.filtersNodes())}}function YD(n,e,t,r,i,s,l,d){const p=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if(cn(t))y=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,r);y=E.updateFullNode(p.getNode(),P,null)}else{const P=un(t);if(!p.isCompleteForPath(t)&&Ff(t)>1)return e;const B=rr(t),ne=p.getNode().getImmediateChild(P).updateChild(B,r);y=".priority"===P?E.updatePriority(p.getNode(),ne):E.updateChild(p.getNode(),P,ne,B,UL,null)}const D=RL(e,y,p.isFullyInitialized()||cn(t),E.filtersNodes());return jL(n,D,t,i,new Ik(i,D,s),d)}function Tk(n,e,t,r,i,s,l){const d=e.eventCache;let p,y;const E=new Ik(i,e,s);if(cn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=Ww(e,y,!0,n.filter.filtersNodes());else{const D=un(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=Ww(e,y,d.isFullyInitialized(),d.isFiltered());else{const M=rr(t),P=d.getNode().getImmediateChild(D);let B;if(cn(M))B=r;else{const X=E.getCompleteChild(D);B=null!=X?".priority"===tk(M)&&X.getChild(fL(M)).isEmpty()?X:X.updateChild(M,r):Xt.EMPTY_NODE}p=P.equals(B)?e:Ww(e,n.filter.updateChild(d.getNode(),D,B,M,E,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function HL(n,e){return n.eventCache.isCompleteForChild(e)}function $L(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Dk(n,e,t,r,i,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=cn(t)?r:new pr(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((D,M)=>{if(E.hasChild(D)){const B=$L(0,e.serverCache.getNode().getImmediateChild(D),M);p=YD(n,p,new Gn(D),B,i,s,l,d)}}),y.children.inorderTraversal((D,M)=>{const P=!e.serverCache.isCompleteForChild(D)&&null===M.value;if(!E.hasChild(D)&&!P){const X=$L(0,e.serverCache.getNode().getImmediateChild(D),M);p=YD(n,p,new Gn(D),X,i,s,l,d)}}),p}class eW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ck(r.getIndex()),s=function p3(n){return n.loadsAllData()?new ck(n.getIndex()):n.hasLimit()?new f3(n):new Gw(n)}(r);this.processor_=function q3(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,p=i.updateFullNode(Xt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(Xt.EMPTY_NODE,d.getNode(),null),E=new Lf(p,l.isFullyInitialized(),i.filtersNodes()),D=new Lf(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=zD(D,E),this.eventGenerator_=new T3(this.query_)}get query(){return this.query_}}function rW(n,e){const t=Xg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!cn(e)&&!t.getImmediateChild(un(e)).isEmpty())?t.getChild(e):null}function GL(n){return 0===n.eventRegistrations_.length}function zL(n,e,t){const r=[];if(t){(0,V.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function qL(n,e,t,r){e.type===Za.MERGE&&null!==e.source.queryId&&((0,V.hu)(Xg(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(qD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Z3(n,e,t,r,i){const s=new G3;let l,d;if(t.type===Za.OVERWRITE){const y=t;y.source.fromUser?l=Tk(n,e,y.path,y.snap,r,i,s):((0,V.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!cn(y.path),l=YD(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===Za.MERGE){const y=t;y.source.fromUser?l=function Y3(n,e,t,r,i,s,l){let d=e;return r.foreach((p,y)=>{const E=Pr(t,p);HL(e,un(E))&&(d=Tk(n,d,E,y,i,s,l))}),r.foreach((p,y)=>{const E=Pr(t,p);HL(e,un(E))||(d=Tk(n,d,E,y,i,s,l))}),d}(n,e,y.path,y.children,r,i,s):((0,V.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=Dk(n,e,y.path,y.children,r,i,d,s))}else if(t.type===Za.ACK_USER_WRITE){const y=t;l=y.revert?function J3(n,e,t,r,i,s){let l;if(null!=KD(r,t))return e;{const d=new Ik(r,e,i),p=e.eventCache.getNode();let y;if(cn(t)||".priority"===un(t)){let E;if(e.serverCache.isFullyInitialized())E=ZD(r,Xg(e));else{const D=e.serverCache.getNode();(0,V.hu)(D instanceof Xt,"serverChildren would be complete if leaf node"),E=Ek(r,D)}E=E,y=n.filter.updateFullNode(p,E,s)}else{const E=un(t);let D=Ck(r,E,e.serverCache);null==D&&e.serverCache.isCompleteForChild(E)&&(D=p.getImmediateChild(E)),y=null!=D?n.filter.updateChild(p,E,D,rr(t),d,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Xt.EMPTY_NODE,rr(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ZD(r,Xg(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=KD(r,Fn()),Ww(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function Q3(n,e,t,r,i,s,l){if(null!=KD(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(cn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return YD(n,e,t,p.getNode().getChild(t),i,s,d,l);if(cn(t)){let y=new pr(null);return p.getNode().forEachChild(nc,(E,D)=>{y=y.set(new Gn(E),D)}),Dk(n,e,t,y,i,s,d,l)}return e}{let y=new pr(null);return r.foreach((E,D)=>{const M=Pr(t,E);p.isCompleteForPath(M)&&(y=y.set(E,p.getNode().getChild(M)))}),Dk(n,e,t,y,i,s,d,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Za.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+t.type);l=function X3(n,e,t,r,i){const s=e.serverCache;return jL(n,RL(e,s.getNode(),s.isFullyInitialized()||cn(t),s.isFiltered()),t,r,UL,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function K3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=qD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(SL(qD(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function W3(n,e){(0,V.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,WL(n,s.changes,s.viewCache.eventCache.getNode(),null)}function WL(n,e,t,r){return function D3(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function h3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),qw(n,i,"child_removed",e,r,t),qw(n,i,"child_added",e,r,t),qw(n,i,"child_moved",s,r,t),qw(n,i,"child_changed",e,r,t),qw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let QD,JD;class ZL{constructor(){this.views=new Map}}function Sk(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),qL(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(qL(l,e,t,r));return s}}function KL(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=ZD(t,i?r:null),p=!1;d?p=!0:r instanceof Xt?(d=Ek(t,r),p=!1):(d=Xt.EMPTY_NODE,p=!1);const y=zD(new Lf(d,p,!1),new Lf(r,i,!1));return new eW(e,y)}return l}function YL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bf(n,e){let t=null;for(const r of n.views.values())t=t||rW(r,e);return t}function QL(n,e){return e._queryParams.loadsAllData()?XD(n):n.views.get(e._queryIdentifier)}function XL(n,e){return null!=QL(n,e)}function Uf(n){return null!=XD(n)}function XD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let fW=1;class JL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pr(null),this.pendingWriteTree_=function H3(){return{visibleWrites:Hl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ak(n,e,t,r,i){return function M3(n,e,t,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Zw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Jy(n,new Qg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function jf(n,e,t=!1){const r=function k3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function O3(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,V.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&P3(d,r.path)?i=!1:Wa(r.path,d.path)&&(s=!0)),l--}return!!i&&(s?(function N3(n){n.visibleWrites=NL(n.allWrites,F3,Fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=kL(n.visibleWrites,r.path):zi(r.children,p=>{n.visibleWrites=kL(n.visibleWrites,Pr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new pr(null);return null!=r.snap?s=s.set(Fn(),!0):zi(r.children,l=>{s=s.set(new Gn(l),!0)}),Jy(n,new GD(r.path,s,t))}return[]}function Kw(n,e,t){return Jy(n,new Qg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function eS(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let d=[];if(l&&("default"===e._queryIdentifier||XL(l,e))){const p=function cW(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const d=Uf(n);if("default"===i)for(const[p,y]of n.views.entries())l=l.concat(zL(y,t,r)),GL(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(l=l.concat(zL(p,t,r)),GL(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Uf(n)&&s.push(new(function aW(){return(0,V.hu)(QD,"Reference.ts has not been loaded"),QD}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function lW(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(d=p.events,!i){const E=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(M,P)=>Uf(P));if(E&&!D){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const P=function bW(n){return n.fold((e,t,r)=>{if(t&&Uf(t))return[XD(t)];{let i=[];return t&&(i=YL(t)),zi(r,(s,l)=>{i=i.concat(l)}),i}})}(M);for(let B=0;B<P.length;++B){const X=P[B],ne=X.query,je=rV(n,X);n.listenProvider_.startListening(Qw(ne),Yw(n,ne),je.hashFn,je.onComplete)}}}if(!D&&y.length>0&&!r)if(E){const M=null;n.listenProvider_.stopListening(Qw(e),M)}else y.forEach(M=>{const P=n.queryToTagMap.get(nS(M));n.listenProvider_.stopListening(Qw(M),P)})}!function wW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=nS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function eV(n,e,t,r){const i=Mk(n,r);if(null!=i){const s=Rk(i),l=s.path,d=s.queryId,p=eo(l,e);return kk(n,l,new Qg(_k(d),p,t))}return[]}function xk(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(M,P)=>{const B=eo(M,i);s=s||Bf(P,B),l=l||Uf(P)});let p,d=n.syncPointTree_.get(i);d?(l=l||Uf(d),s=s||Bf(d,Fn())):(d=new ZL,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?p=!0:(p=!1,s=Xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,B)=>{const X=Bf(B,Fn());X&&(s=s.updateImmediateChild(P,X))}));const y=XL(d,e);if(!y&&!e._queryParams.loadsAllData()){const M=nS(e);(0,V.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const P=function EW(){return fW++}();n.queryToTagMap.set(M,P),n.tagToQueryMap.set(P,M)}let D=function uW(n,e,t,r,i,s){const l=KL(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function iW(n,e){n.eventRegistrations_.push(e)}(l,t),function sW(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(fr,(s,l)=>{r.push(Ky(s,l))}),t.isFullyInitialized()&&r.push(SL(t.getNode())),WL(n,r,t.getNode(),e)}(l,t)}(d,e,t,WD(n.pendingWriteTree_,i),s,p);if(!y&&!l&&!r){const M=QL(d,e);D=D.concat(function CW(n,e,t){const r=e._path,i=Yw(n,e),s=rV(n,t),l=n.listenProvider_.startListening(Qw(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!Uf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,E,D)=>{if(!cn(y)&&E&&Uf(E))return[XD(E).query];{let M=[];return E&&(M=M.concat(YL(E).map(P=>P.query))),zi(D,(P,B)=>{M=M.concat(B)}),M}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(Qw(E),Yw(n,E))}}return l}(n,e,M))}return D}function tS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=Bf(d,eo(l,e));if(y)return y});return FL(i,e,s,t,!0)}function Jy(n,e){return tV(e,n.syncPointTree_,null,WD(n.pendingWriteTree_,Fn()))}function tV(n,e,t,r){if(cn(n.path))return nV(n,e,t,r);{const i=e.get(Fn());null==t&&null!=i&&(t=Bf(i,Fn()));let s=[];const l=un(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,E=VL(r,l);s=s.concat(tV(d,p,y,E))}return i&&(s=s.concat(Sk(i,n,r,t))),s}}function nV(n,e,t,r){const i=e.get(Fn());null==t&&null!=i&&(t=Bf(i,Fn()));let s=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=VL(r,l),E=n.operationForChild(l);E&&(s=s.concat(nV(E,d,p,y)))}),i&&(s=s.concat(Sk(i,n,r,t))),s}function rV(n,e){const t=e.query,r=Yw(n,t);return{hashFn:()=>(function tW(n){return n.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _W(n,e,t){const r=Mk(n,t);if(r){const i=Rk(r),s=i.path,l=i.queryId,d=eo(s,e);return kk(n,s,new zw(_k(l),d))}return[]}(n,t._path,r):function mW(n,e){return Jy(n,new zw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function gq(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return eS(n,t,null,s)}}}}function Yw(n,e){const t=nS(e);return n.queryToTagMap.get(t)}function nS(n){return n._path.toString()+"$"+n._queryIdentifier}function Mk(n,e){return n.tagToQueryMap.get(e)}function Rk(n){const e=n.indexOf("$");return(0,V.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function kk(n,e,t){const r=n.syncPointTree_.get(e);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),Sk(r,t,WD(n.pendingWriteTree_,e),null)}function Qw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function hW(){return(0,V.hu)(JD,"Reference.ts has not been loaded"),JD}())(n._repo,n._path):n}class Ok{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ok(t)}node(){return this.node_}}class Pk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Pr(this.path_,e);return new Pk(this.syncTree_,t)}node(){return tS(this.syncTree_,this.path_)}}const iV=function(n,e,t){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?TW(n[".sv"],e,t):"object"==typeof n[".sv"]?DW(n[".sv"],e):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},TW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},DW=function(n,e,t){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,V.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},sV=function(n,e,t,r){return Fk(e,new Pk(t,n),r)},Nk=function(n,e,t){return Fk(n,new Ok(e),t)};function Fk(n,e,t){const r=n.getPriority().val(),i=iV(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=iV(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new qy(d,Gr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new qy(i))),l.forEachChild(fr,(d,p)=>{const y=Fk(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class Lk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function rS(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=un(t);for(;null!==i;){const s=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new Lk(i,r,s),t=rr(t),i=un(t)}return r}function em(n){return n.node.value}function Vk(n,e){n.node.value=e,Bk(n)}function oV(n){return n.node.childCount>0}function iS(n,e){zi(n.node.children,(t,r)=>{e(new Lk(t,n,r))})}function aV(n,e,t,r){t&&!r&&e(n),iS(n,i=>{aV(i,e,!0,r)}),t&&r&&e(n)}function Xw(n){return new Gn(null===n.parent?n.name:Xw(n.parent)+"/"+n.name)}function Bk(n){null!==n.parent&&function xW(n,e,t){const r=function SW(n){return void 0===em(n)&&!oV(n)}(t),i=(0,V.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Bk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Bk(n))}(n.parent,n.name,n)}const MW=/[\[\].#$\/\u0000-\u001F\u007F]/,RW=/[\[\].#$\u0000-\u001F\u007F]/,Uk=10485760,sS=function(n){return"string"==typeof n&&0!==n.length&&!MW.test(n)},lV=function(n){return"string"==typeof n&&0!==n.length&&!RW.test(n)},Jw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!RD(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},rc=function(n,e,t,r){r&&void 0===e||eE((0,V.gK)(n,"value"),e,t)},eE=function(n,e,t){const r=t instanceof Gn?new qq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kg(r)+" with contents = "+e.toString());if(RD(e))throw new Error(n+"contains "+e.toString()+" "+Kg(r));if("string"==typeof e&&e.length>Uk/3&&(0,V.ug)(e)>Uk)throw new Error(n+"contains a string greater than "+Uk+" utf8 bytes "+Kg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(zi(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!sS(l)))throw new Error(n+" contains an invalid key ("+l+") "+Kg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Wq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,V.ug)(e),pL(n)})(r,l),eE(n,d,r),function Zq(n){const e=n.parts_.pop();n.byteLength_-=(0,V.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Kg(r)+" in addition to actual children.")}},uV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,V.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];zi(e,(l,d)=>{const p=new Gn(l);if(eE(i,d,Pr(t,p)),".priority"===tk(p)&&!Jw(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Vw(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!sS(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(zq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Wa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},jk=function(n,e,t){if(!t||void 0!==e){if(RD(e))throw new Error((0,V.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jw(e))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tE=function(n,e,t,r){if(!(r&&void 0===t||sS(t)))throw new Error((0,V.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},nE=function(n,e,t,r){if(!(r&&void 0===t||lV(t)))throw new Error((0,V.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ka=function(n,e){if(".info"===un(e))throw new Error(n+" failed = Can't modify data under /.info/")},cV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!sS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lV(n)}(t))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class NW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!nk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function dV(n,e,t){oS(n,t),hV(n,r=>nk(r,e))}function Jo(n,e,t){oS(n,t),hV(n,r=>Wa(r,e)||Wa(e,r))}function hV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(FW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function FW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Wg&&Gi("event: "+t.toString()),Gy(r)}}}const fV="repo_interrupt";class VW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$D(),this.transactionQueueTree_=new Lk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pV(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:pV(n)})}function gV(n,e,t,r,i){n.dataUpdateCount++;const s=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,V.UI)(t,y=>Gr(y));l=function yW(n,e,t,r){const i=Mk(n,r);if(i){const s=Rk(i),l=s.path,d=s.queryId,p=eo(l,e),y=pr.fromObject(t);return kk(n,l,new Qy(_k(d),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Gr(t);l=eV(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,V.UI)(t,y=>Gr(y));l=function gW(n,e,t){const r=pr.fromObject(t);return Jy(n,new Qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Gr(t);l=Kw(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=tv(n,s)),Jo(n.eventQueue_,d,l)}function mV(n,e){Hk(n,"connected",e),!1===e&&function $W(n){ev(n,"onDisconnectEvents");const e=rE(n),t=$D();pk(n.onDisconnect_,Fn(),(i,s)=>{const l=sV(i,s,n.serverSyncTree_,e);Yy(t,i,l)});let r=[];pk(t,Fn(),(i,s)=>{r=r.concat(Kw(n.serverSyncTree_,i,s));const l=qk(n,i);tv(n,l)}),n.onDisconnect_=$D(),Jo(n.eventQueue_,Fn(),r)}(n)}function Hk(n,e,t){const r=new Gn("/.info/"+e),i=Gr(t);n.infoData_.updateSnapshot(r,i);const s=Kw(n.infoSyncTree_,r,i);Jo(n.eventQueue_,r,s)}function aS(n){return n.nextWriteId_++}function $k(n,e,t,r,i){ev(n,"set",{path:e.toString(),value:t,priority:r});const s=rE(n),l=Gr(t,r),d=tS(n.serverSyncTree_,e),p=Nk(l,d,s),y=aS(n),E=Ak(n.serverSyncTree_,e,p,y,!0);oS(n.eventQueue_,E),n.server_.put(e.toString(),l.val(!0),(M,P)=>{const B="ok"===M;B||Cs("set at "+e+" failed: "+M);const X=jf(n.serverSyncTree_,y,!B);Jo(n.eventQueue_,e,X),Hf(0,i,M,P)});const D=qk(n,e);tv(n,D),Jo(n.eventQueue_,D,[])}function GW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&fk(n.onDisconnect_,e),Hf(0,t,r,i)})}function _V(n,e,t,r){const i=Gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&Yy(n.onDisconnect_,e,i),Hf(0,r,s,l)})}function Gk(n,e,t){let r;r=".info"===un(e._path)?eS(n.infoSyncTree_,e,t):eS(n.serverSyncTree_,e,t),dV(n.eventQueue_,e._path,r)}function yV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(fV)}function ev(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Gi(t,...e)}function Hf(n,e,t,r){e&&Gy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function zk(n,e,t){return tS(n.serverSyncTree_,e,t)||Xt.EMPTY_NODE}function lS(n,e=n.transactionQueueTree_){if(e||uS(n,e),em(e)){const t=bV(n,e);(0,V.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function YW(n,e,t){const r=t.map(y=>y.currentWriteId),i=zk(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,V.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=eo(e,E.path);s=s.updateChild(D,E.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{ev(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,E=E.concat(jf(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();uS(n,rS(n.transactionQueueTree_,e)),lS(n,n.transactionQueueTree_),Jo(n.eventQueue_,e,E);for(let M=0;M<D.length;M++)Gy(D[M])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Cs("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}tv(n,e)}},l)}(n,Xw(e),t)}else oV(e)&&iS(e,t=>{lS(n,t)})}function tv(n,e){const t=vV(n,e),r=Xw(t);return function QW(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=eo(t,p.path);let D,E=!1;if((0,V.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,D=p.abortReason,i=i.concat(jf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,D="maxretry",i=i.concat(jf(n.serverSyncTree_,p.currentWriteId,!0));else{const M=zk(n,p.path,l);p.currentInputSnapshot=M;const P=e[d].update(M.val());if(void 0!==P){eE("transaction failed: Data returned ",P,p.path);let B=Gr(P);"object"==typeof P&&null!=P&&(0,V.r3)(P,".priority")||(B=B.updatePriority(M.getPriority()));const ne=p.currentWriteId,je=rE(n),Ye=Nk(B,M,je);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=Ye,p.currentWriteId=aS(n),l.splice(l.indexOf(ne),1),i=i.concat(Ak(n.serverSyncTree_,p.path,Ye,p.currentWriteId,p.applyLocally)),i=i.concat(jf(n.serverSyncTree_,ne,!0))}else E=!0,D="nodata",i=i.concat(jf(n.serverSyncTree_,p.currentWriteId,!0))}Jo(n.eventQueue_,t,i),i=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}uS(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Gy(r[d]);lS(n,n.transactionQueueTree_)}(n,bV(n,t),r),r}function vV(n,e){let t,r=n.transactionQueueTree_;for(t=un(e);null!==t&&void 0===em(r);)r=rS(r,t),t=un(e=rr(e));return r}function bV(n,e){const t=[];return wV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function wV(n,e,t){const r=em(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);iS(e,i=>{wV(n,i,t)})}function uS(n,e){const t=em(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Vk(e,t.length>0?t:void 0)}iS(e,r=>{uS(n,r)})}function qk(n,e){const t=Xw(vV(n,e)),r=rS(n.transactionQueueTree_,e);return function AW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Wk(n,i)}),Wk(n,r),aV(r,i=>{Wk(n,i)}),t}function Wk(n,e){const t=em(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,V.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,V.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(jf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Vk(e,void 0):t.length=s+1,Jo(n.eventQueue_,Xw(e),i);for(let l=0;l<r.length;l++)Gy(r[l])}}const Zk=function(n,e){const t=e6(n),r=t.namespace;return"firebase.com"===t.domain&&ec(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ec("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Cs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new KR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},e6=function(n){let e="",t="",r="",i="",s="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(E,D)),E<D&&(i=function XW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(E,D)));const M=function JW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=r}"ns"in M&&(s=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:s}};class EV{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class CV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Kk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new V.BH;return GW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ka("OnDisconnect.remove",this._path);const e=new V.BH;return _V(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ka("OnDisconnect.set",this._path),rc("OnDisconnect.set",e,this._path,!1);const t=new V.BH;return _V(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ka("OnDisconnect.setWithPriority",this._path),rc("OnDisconnect.setWithPriority",e,this._path,!1),jk("OnDisconnect.setWithPriority",t,!1);const r=new V.BH;return function zW(n,e,t,r,i){const s=Gr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&Yy(n.onDisconnect_,e,s),Hf(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ka("OnDisconnect.update",this._path),uV("OnDisconnect.update",e,this._path,!1);const t=new V.BH;return function qW(n,e,t,r){if((0,V.xb)(t))return Gi("onDisconnect().update() called with empty data.  Don't do anything."),void Hf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&zi(t,(l,d)=>{const p=Gr(d);Yy(n.onDisconnect_,Pr(e,l),p)}),Hf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class xo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:tk(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const e=xL(this._queryParams),t=qR(e);return"{}"===t?"default":t}get _queryObject(){return xL(this._queryParams)}isEqual(e){if(!((e=(0,V.m9)(e))instanceof xo))return!1;const t=this._repo===e._repo,r=nk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function cS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $f(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===nc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Wd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==tc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===fr){if(null!=e&&!Jw(e)||null!=t&&!Jw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof ak||n.getIndex()===lk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends xo{constructor(e,t){super(e,t,new UD,!1)}get parent(){const e=fL(this._path);return null===e?null:new Ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class tm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=nm(this.ref,e);return new tm(this._node.getChild(t),r,fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new tm(i,nm(this.ref,r),fr)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TV(n,e){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==e?nm(n._root,e):n._root}function DV(n,e){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const t=Zk(e,n._repo.repoInfo_.nodeAdmin);cV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ec("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TV(n,t.path.toString())}function nm(n,e){return null===un((n=(0,V.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nE("child","path",t,!1)):nE("child","path",e,!1),new Ya(n._repo,Pr(n._path,e));var t}function Yk(n,e){n=(0,V.m9)(n),Ka("set",n._path),rc("set",e,n._path,!1);const t=new V.BH;return $k(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function s6(n,e){uV("update",e,n._path,!1);const t=new V.BH;return function HW(n,e,t,r){ev(n,"update",{path:e.toString(),value:t});let i=!0;const s=rE(n),l={};if(zi(t,(d,p)=>{i=!1,l[d]=sV(Pr(e,d),Gr(p),n.serverSyncTree_,s)}),i)Gi("update() called with empty data.  Don't do anything."),Hf(0,r,"ok",void 0);else{const d=aS(n),p=function pW(n,e,t,r){!function R3(n,e,t,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=vk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=pr.fromObject(t);return Jy(n,new Qy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);oS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,E)=>{const D="ok"===y;D||Cs("update at "+e+" failed: "+y);const M=jf(n.serverSyncTree_,d,!D),P=M.length>0?tv(n,e):e;Jo(n.eventQueue_,P,M),Hf(0,r,y,E)}),zi(t,y=>{const E=qk(n,Pr(e,y));tv(n,E)}),Jo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function o6(n){n=(0,V.m9)(n);const e=new Kk(()=>{}),t=new iE(e);return function jW(n,e,t){const r=function vW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const D=eo(y,t);r=r||Bf(E,D)});let i=n.syncPointTree_.get(t);i?r=r||Bf(i,Fn()):(i=new ZL,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new Lf(r,!0,!1):null;return function nW(n){return qD(n.viewCache_)}(KL(i,e,WD(n.pendingWriteTree_,e._path),s?l.getNode():Xt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Gr(i).withIndex(e._queryParams.getIndex());let l;if(xk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Kw(n.serverSyncTree_,e._path,s);else{const d=Yw(n.serverSyncTree_,e);l=eV(n.serverSyncTree_,e._path,s,d)}return Jo(n.eventQueue_,e._path,l),eS(n.serverSyncTree_,e,t,null,!0),s},i=>(ev(n,"get for query "+(0,V.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new tm(r,new Ya(n._repo,n._path),n._queryParams.getIndex()))}class iE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new EV("value",this,new tm(e.snapshotNode,new Ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CV(this,e,t):null}matches(e){return e instanceof iE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CV(this,e,t):null}createEvent(e,t){(0,V.hu)(null!=e.childName,"Child events should have a childName.");const r=nm(new Ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new EV(e.type,this,new tm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function sE(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(E,D)=>{Gk(n._repo,n,d),p(E,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new Kk(t,s||void 0),d="value"===e?new iE(l):new hS(e,l);return function WW(n,e,t){let r;r=".info"===un(e._path)?xk(n.infoSyncTree_,e,t):xk(n.serverSyncTree_,e,t),dV(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>Gk(n._repo,n,d)}function Qk(n,e,t,r){return sE(n,"value",e,t,r)}function SV(n,e,t,r){return sE(n,"child_added",e,t,r)}function AV(n,e,t,r){return sE(n,"child_changed",e,t,r)}function xV(n,e,t,r){return sE(n,"child_moved",e,t,r)}function MV(n,e,t,r){return sE(n,"child_removed",e,t,r)}function RV(n,e,t){let r=null;const i=t?new Kk(t):null;"value"===e?r=new iE(i):e&&(r=new hS(e,i)),Gk(n._repo,n,r)}class $l{}class kV extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("endAt",this._value,e._path,!0);const t=hk(e._queryParams,this._value,this._key);if(dS(t),$f(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class l6 extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("endBefore",this._value,e._path,!1);const t=function y3(n,e,t){let r,i;return n.index_===nc?("string"==typeof e&&(e=DL(e)),i=hk(n,e,t)):(r=null==t?Wd:DL(t),i=hk(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(dS(t),$f(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class OV extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("startAt",this._value,e._path,!0);const t=dk(e._queryParams,this._value,this._key);if(dS(t),$f(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class d6 extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("startAfter",this._value,e._path,!1);const t=function _3(n,e,t){let r;if(n.index_===nc)"string"==typeof e&&(e=TL(e)),r=dk(n,e,t);else{let i;i=null==t?tc:TL(t),r=dk(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(dS(t),$f(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class f6 extends $l{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xo(e._repo,e._path,function g3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class g6 extends $l{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xo(e._repo,e._path,function m3(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class _6 extends $l{constructor(e){super(),this._path=e}_apply(e){cS(e,"orderByChild");const t=new Gn(this._path);if(cn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ak(t),i=jD(e._queryParams,r);return $f(i),new xo(e._repo,e._path,i,!0)}}class v6 extends $l{_apply(e){cS(e,"orderByKey");const t=jD(e._queryParams,nc);return $f(t),new xo(e._repo,e._path,t,!0)}}class w6 extends $l{_apply(e){cS(e,"orderByPriority");const t=jD(e._queryParams,fr);return $f(t),new xo(e._repo,e._path,t,!0)}}class C6 extends $l{_apply(e){cS(e,"orderByValue");const t=jD(e._queryParams,lk);return $f(t),new xo(e._repo,e._path,t,!0)}}class T6 extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(rc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kV(this._value,this._key)._apply(new OV(this._value,this._key)._apply(e))}}function Gl(n,...e){let t=(0,V.m9)(n);for(const r of e)t=r._apply(t);return t}(function oW(n){(0,V.hu)(!QD,"__referenceConstructor has already been defined"),QD=n})(Ya),function dW(n){(0,V.hu)(!JD,"__referenceConstructor has already been defined"),JD=n}(Ya);const Xk={};function NV(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ec("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=Zk(s,i),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,l=Zk(s,i),d=l.repoInfo):p=!l.repoInfo.secure;const E=i&&p?new Lw(Lw.OWNER):new vq(n.name,n.options,e);cV("Invalid Firebase Database URL",l),cn(l.path)||ec("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function M6(n,e,t,r){let i=Xk[e.name];i||(i={},Xk[e.name]=i);let s=i[n.toURLString()];return s&&ec("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new VW(n,false,t,r),i[n.toURLString()]=s,s}(d,n,E,new yq(n.name,t));return new k6(D,n)}class k6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function BW(n,e,t){if(n.stats_=XR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HD(n.repoInfo_,(r,i,s,l)=>{gV(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Yg(n.repoInfo_,e,(r,i,s,l)=>{gV(n,r,i,s,l)},r=>{mV(n,r)},r=>{!function UW(n,e){zi(e,(t,r)=>{Hk(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Eq(n,e){const t=n.toString();return QR[t]||(QR[t]=e()),QR[t]}(n.repoInfo_,()=>new I3(n.stats_,n.server_)),n.infoData_=new v3,n.infoSyncTree_=new JL({startListening:(r,i,s,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=Kw(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),Hk(n,"connected",!1),n.serverSyncTree_=new JL({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(d,p)=>{const y=l(d,p);Jo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,Fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function x6(n,e){const t=Xk[e];(!t||t[n.key]!==n)&&ec(`Database ${e}(${n.repoInfo_}) has already been deleted.`),yV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ec("Cannot call "+e+" on a deleted database.")}}function FV(){tL.IS_TRANSPORT_INITIALIZED&&Cs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function O6(){FV(),Nf.forceDisallow()}function P6(){FV(),zy.forceDisallow(),Nf.forceAllow()}function L6(n,e){N1(n,e)}const B6={".sv":"timestamp"};class H6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Yg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Yg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function V6(n){M1(is.SDK_VERSION),(0,is._registerComponent)(new js.wA("database",(e,{instanceIdentifier:t})=>NV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(A1,x1,n),(0,is.registerVersion)(A1,x1,"esm2017")}();const q6=new bo.Yd("@firebase/database-compat"),VV=function(n){q6.warn("FIREBASE WARNING: "+n)};class K6{constructor(e){this._delegate=e}cancel(e){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,VV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Y6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),nE("DataSnapshot.child","path",e,!1),new Gf(this._database,this._delegate.child(e))}hasChild(e){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),nE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Gf(this._database,t)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new ea(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class cs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",t,!1);const l=cs.getCancelAndContextArgs_("Query.on",r,i),d=(y,E)=>{t.call(l.context,new Gf(this.database,y),E)};d.userCallback=t,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return Qk(this._delegate,d,p),t;case"child_added":return SV(this._delegate,d,p),t;case"child_removed":return MV(this._delegate,d,p),t;case"child_changed":return AV(this._delegate,d,p),t;case"child_moved":return xV(this._delegate,d,p),t;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,V.Wj)("Query.off","callback",t,!0),(0,V.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,RV(this._delegate,e,i)}else RV(this._delegate,e)}get(){return o6(this._delegate).then(e=>new Gf(this.database,e))}once(e,t,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",t,!0);const s=cs.getCancelAndContextArgs_("Query.once",r,i),l=new V.BH,d=(y,E)=>{const D=new Gf(this.database,y);t&&t.call(s.context,D,E),l.resolve(D)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":Qk(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":SV(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":MV(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":AV(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":xV(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new cs(this.database,Gl(this._delegate,function p6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new f6(n)}(e)))}limitToLast(e){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new cs(this.database,Gl(this._delegate,function m6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new g6(n)}(e)))}orderByChild(e){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new cs(this.database,Gl(this._delegate,function y6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nE("orderByChild","path",n,!1),new _6(n)}(e)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new cs(this.database,Gl(this._delegate,function b6(){return new v6}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new cs(this.database,Gl(this._delegate,function E6(){return new w6}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new cs(this.database,Gl(this._delegate,function I6(){return new C6}()))}startAt(e=null,t){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new cs(this.database,Gl(this._delegate,function c6(n=null,e){return tE("startAt","key",e,!0),new OV(n,e)}(e,t)))}startAfter(e=null,t){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new cs(this.database,Gl(this._delegate,function h6(n,e){return tE("startAfter","key",e,!0),new d6(n,e)}(e,t)))}endAt(e=null,t){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new cs(this.database,Gl(this._delegate,function a6(n,e){return tE("endAt","key",e,!0),new kV(n,e)}(e,t)))}endBefore(e=null,t){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new cs(this.database,Gl(this._delegate,function u6(n,e){return tE("endBefore","key",e,!0),new l6(n,e)}(e,t)))}equalTo(e,t){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new cs(this.database,Gl(this._delegate,function D6(n,e){return tE("equalTo","key",e,!0),new T6(n,e)}(e,t)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof cs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,V.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,V.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ea(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class ea extends cs{constructor(e,t){super(e,new xo(t._repo,t._path,new UD,!1)),this.database=e,this._delegate=t}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ea(this.database,nm(this._delegate,e))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ea(this.database,e):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new ea(this.database,this._delegate.root)}set(e,t){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",t,!0);const r=Yk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,VV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ka("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",t,!0);const r=s6(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function i6(n,e,t){if(Ka("setWithPriority",n._path),rc("setWithPriority",e,n._path,!1),jk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return $k(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",e,!0);const t=function n6(n){return Ka("remove",n._path),Yk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,V.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function $6(n,e,t){var r;if(n=(0,V.m9)(n),Ka("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new V.BH,d=Qk(n,()=>{});return function KW(n,e,t,r,i,s){ev(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:k1(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=zk(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{eE("transaction failed: Data returned ",p,l.path),l.status=0;const y=rS(n.transactionQueueTree_,e),E=em(y)||[];let D;E.push(l),Vk(y,E),"object"==typeof p&&null!==p&&(0,V.r3)(p,".priority")?(D=(0,V.DV)(p,".priority"),(0,V.hu)(Jw(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(tS(n.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();const M=rE(n),P=Gr(p,D),B=Nk(P,d,M);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=B,l.currentWriteId=aS(n);const X=Ak(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);Jo(n.eventQueue_,e,X),lS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,E)=>{let D=null;p?s.reject(p):(D=new tm(E,new Ya(n._repo,n._path),fr),s.resolve(new H6(y,D)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new Y6(s.committed,new Gf(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",t,!0);const r=function r6(n,e){n=(0,V.m9)(n),Ka("setPriority",n._path),jk("setPriority",e,!1);const t=new V.BH;return $k(n._repo,Pr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",t,!0);const r=function t6(n,e){n=(0,V.m9)(n),Ka("push",n._path),rc("push",e,n._path,!0);const t=pV(n._repo),r=d3(t),i=nm(n,r),s=nm(n,r);let l;return l=null!=e?Yk(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ea(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new ea(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ka("Reference.onDisconnect",this._delegate._path),new K6(new IV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class oE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:O6,forceLongPolling:P6}}useEmulator(e,t,r={}){!function LV(n,e,t,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ec("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ec('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Lw(Lw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);s=new Lw(l)}!function A6(n,e,t,r){n.repoInfo_=new KR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,V.Dv)("database.ref",0,1,arguments.length),e instanceof ea){const t=DV(this._delegate,e.toString());return new ea(this,t)}{const t=TV(this._delegate,e);return new ea(this,t)}}refFromURL(e){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=DV(this._delegate,e);return new ea(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function N6(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),yV(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function F6(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function ZW(n){n.persistentConnection_&&n.persistentConnection_.resume(fV)}(n._repo)}(this._delegate)}}oE.ServerValue={TIMESTAMP:function U6(){return B6}(),increment:n=>function j6(n){return{".sv":{increment:n}}}(n)};var X6=Object.freeze({__proto__:null,initStandalone:function Q6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){M1(t);const l=new js.zt("auth-internal",new js.H0("database-standalone"));return l.setComponent(new js.wA("auth-internal",()=>r,"PRIVATE")),{instance:new oE(NV(n,l,void 0,e,s),n),namespace:i}}});const J6=oE.ServerValue;function BV(n){return null==n}function UV(n){return"function"==typeof n.set}function jV(n,e){return UV(e)?e:n.ref(e)}function HV(n,e){if(function tZ(n){return"string"==typeof n}(n))return e.stringCase();if(UV(n))return e.firebaseCase();if(function nZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function aE(n,e,t="on",r=Jc.z){return new Wn.y(i=>{let s=null;return s=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ht.U)(i=>{const{snapshot:s,prevKey:l}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,fM.B)())}function $V(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function sZ(n,e){const{payload:t,prevKey:r,key:i}=e,s=$V(n,i),l=function iZ(n,e){if(BV(e))return 0;{const t=$V(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function GV(n){return(BV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function zV(n,e,t){return function rZ(n,e,t){return aE(n,"value","once",t).pipe(Zt(r=>{const i=[Xe(r)];return e.forEach(s=>i.push(aE(n,s,"on",t))),(0,Fg.T)(...i).pipe(Ai(sZ,[]))}),xv())}(n,e=GV(e),t)}function qV(n,e,t){const r=(e=GV(e)).map(i=>aE(n,i,"on",t));return(0,Fg.T)(...r)}function WV(n,e){return function(r,i){return HV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function uZ(n){return function(t){return t?HV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZV(n,e){return function(){return aE(n,"value","on",e)}}!function eZ(n){n.INTERNAL.registerComponent(new js.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new oE(i,r)},"PUBLIC").setServiceProps({Reference:ea,Query:cs,Database:oE,DataSnapshot:Gf,enableLogging:L6,INTERNAL:X6,ServerValue:J6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Hs.Z);const hZ=new h.OlP("angularfire2.realtimeDatabaseURL"),fZ=new h.OlP("angularfire2.database.use-emulator");let KV=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E,D,M,P,B,X,ne){this.schedulers=d;const je=p,Ye=(0,di.on)(t,l,r);y&&UM(Ye,l,E,M,P,B,D,X),this.database=(0,di.cc)(`${Ye.name}.database.${i}`,"AngularFireDatabase",Ye.name,()=>{const Ge=l.runOutsideAngular(()=>Ye.database(i||void 0));return je&&Ge.useEmulator(...je),Ge},[je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>jV(this.database,t));let s=i;return r&&(s=r(i)),function cZ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:WV(r,"update"),set:WV(r,"set"),push:i=>r.push(i),remove:uZ(r),snapshotChanges:i=>zV(n,i,t).pipe(Dn.iC),stateChanges:i=>qV(n,i,t).pipe(Dn.iC),auditTrail:i=>function oZ(n,e,t){return function lZ(n,e,t){return function aZ(n,e){return aE(n,"value","on",e).pipe((0,ht.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function oq(...n){const e=(0,Ps.jO)(n);return(0,Rn.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,ai.Xf)(n[p]).subscribe(new Un.Q(r,y=>{s[p]=y,!d&&!l[p]&&(l[p]=!0,(d=l.every(ps.y))&&(l=null))},ZM.Z));t.subscribe(new Un.Q(r,p=>{if(d){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,ht.U)(([i,s])=>{const l=i.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function aq(n){return(0,Rn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Un.Q(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ht.U)(i=>i.actions))}(n,qV(n,e).pipe(Ai((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Dn.iC),valueChanges:(i,s)=>zV(n,i,t).pipe((0,ht.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Dn.iC)}}(s,this)}object(t){return function dZ(n,e){return{query:n,snapshotChanges:()=>ZV(n,e.schedulers.outsideAngular)().pipe(Dn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZV(n,e.schedulers.outsideAngular)().pipe(Dn.iC,(0,ht.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>jV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(di.Dh),h.LFG(di.xv,8),h.LFG(hZ,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(fZ,8),h.LFG(bw,8),h.LFG(PM,8),h.LFG(NM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(BM,8),h.LFG(vw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pZ=(()=>{class n{constructor(){eD.Z.registerVersion("angularfire",Dn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[KV]}),n})(),gZ=(()=>{class n{constructor(t){this.db=t,this.mensagem=new S1}insert(t){this.db.list("mensagem").push(t).then(r=>{console.log(r.key)})}getAll(){return this.db.list("mensagem").snapshotChanges().pipe((0,ht.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.exportVal()))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(KV))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),rm=(()=>{class n extends YV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ic=new h.OlP("NgValueAccessor"),_Z={provide:ic,useExisting:(0,h.Gpc)(()=>fS),multi:!0},vZ=new h.OlP("CompositionEventMode");let fS=(()=>{class n extends YV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yZ(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(vZ,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([_Z]),h.qOj]}),n})();const Is=new h.OlP("NgValidators"),qf=new h.OlP("NgAsyncValidators");function aB(n){return null!=n}function lB(n){const e=(0,h.QGY)(n)?(0,In.D)(n):n;return(0,h.CqO)(e),e}function uB(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function cB(n,e){return e.map(t=>t(n))}function dB(n){return n.map(e=>function wZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function Jk(n){return null!=n?function hB(n){if(!n)return null;const e=n.filter(aB);return 0==e.length?null:function(t){return uB(cB(t,e))}}(dB(n)):null}function eO(n){return null!=n?function fB(n){if(!n)return null;const e=n.filter(aB);return 0==e.length?null:function(t){return UF(cB(t,e).map(lB)).pipe((0,ht.U)(uB))}}(dB(n)):null}function pB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tO(n){return n?Array.isArray(n)?n:[n]:[]}function pS(n,e){return Array.isArray(n)?n.includes(e):n===e}function _B(n,e){const t=tO(e);return tO(n).forEach(i=>{pS(t,i)||t.push(i)}),t}function yB(n,e){return tO(e).filter(t=>!pS(n,t))}class vB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wf extends vB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class to extends vB{get formDirective(){return null}get path(){return null}}let wB=(()=>{class n extends class bB{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Wf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})();function uE(n,e){(function iO(n,e){const t=function gB(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(pB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function mB(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(pB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yS(e._rawValidators,i),yS(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function MZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&CB(n,e)})}(n,e),function kZ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&CB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xZ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cE="VALID",wS="INVALID",nv="PENDING",dE="DISABLED";function lO(n){return(cO(n)?n.validators:n)||null}function DB(n){return Array.isArray(n)?Jk(n):n||null}function uO(n,e){return(cO(e)?e.asyncValidators:n)||null}function SB(n){return Array.isArray(n)?eO(n):n||null}function cO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const dO=n=>n instanceof fO;function xB(n){return(n=>n instanceof kB)(n)?n.value:n.getRawValue()}function MB(n,e){const t=dO(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function RB(n,e){dO(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class hO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=DB(this._rawValidators),this._composedAsyncValidatorFn=SB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cE}get invalid(){return this.status===wS}get pending(){return this.status==nv}get disabled(){return this.status===dE}get enabled(){return this.status!==dE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=DB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=SB(e)}addValidators(e){this.setValidators(_B(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_B(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yB(e,this._rawAsyncValidators))}hasValidator(e){return pS(this._rawValidators,e)}hasAsyncValidator(e){return pS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cE||this.status===nv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dE:cE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nv,this._hasOwnPendingAsyncValidator=!0;const t=lB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function FZ(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=dO(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof VZ)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?dE:this.errors?wS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nv)?nv:this._anyControlsHaveStatus(wS)?wS:cE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cO(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kB extends hO{constructor(e=null,t,r){super(lO(t),uO(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class fO extends hO{constructor(e,t,r){super(lO(t),uO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){RB(this,e),Object.keys(e).forEach(r=>{MB(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=xB(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class VZ extends hO{constructor(e,t,r){super(lO(t),uO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){RB(this,e),e.forEach((r,i)=>{MB(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>xB(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const jZ={provide:Wf,useExisting:(0,h.Gpc)(()=>gO)},NB=(()=>Promise.resolve(null))();let gO=(()=>{class n extends Wf{constructor(t,r,i,s){super(),this.control=new kB,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function oO(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===fS?t=s:function NZ(n){return Object.getPrototypeOf(n.constructor)===rm}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function sO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function mS(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;NB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(to,9),h.Y36(Is,10),h.Y36(qf,10),h.Y36(ic,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([jZ]),h.qOj,h.TTD]}),n})(),LB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),f4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[LB]]}),n})(),p4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[f4]}),n})();function g4(n,e){if(1&n&&(h.TgZ(0,"header",4),h._UZ(1,"img",7),h.TgZ(2,"div"),h.TgZ(3,"h2"),h._uU(4),h.qZA(),h.qZA(),h.qZA()),2&n){const t=e.ngIf;h.xp6(1),h.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",h.LSH),h.s9C("alt",t.displayName),h.xp6(3),h.Oqu(t.displayName?t.displayName:"User")}}function m4(n,e){if(1&n&&(h.TgZ(0,"li",8),h.TgZ(1,"div",9),h.TgZ(2,"h3"),h._uU(3,"10:12AM, Today"),h.qZA(),h.TgZ(4,"h2"),h._uU(5,"Vincent"),h.qZA(),h._UZ(6,"span",10),h.qZA(),h.TgZ(7,"div",11),h._uU(8),h.qZA(),h.qZA()),2&n){const t=e.$implicit;h.xp6(8),h.hij(" ",t.text," ")}}const _4=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Kj},{path:"register-user",component:Yj},{path:"home",component:sq,canActivate:[wN]},{path:"chat",component:(()=>{class n{constructor(t,r){this.mensagemService=t,this.authService=r}ngOnInit(){this.mensagem=new S1,this.mensagens=this.mensagemService.getAll()}onSubimit(){this.mensagemService.insert(this.mensagem)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gZ),h.Y36(Lg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-chat"]],decls:12,vars:5,consts:[["id","container"],["style","display: flex ;",4,"ngIf"],["id","chat"],["class","me",4,"ngFor","ngForOf"],[2,"display","flex"],[2,"border-radius","20px 0px 0px 20px",3,"ngModel","ngModelChange"],[1,"pesquisar",3,"click"],[1,"mr-5","img-thumbnail","rounded-circle",2,"height","50px",3,"src","alt"],[1,"me"],[1,"entete"],[1,"status","blue"],[1,"message"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"main"),h.YNc(2,g4,5,3,"header",1),h.TgZ(3,"ul",2),h.YNc(4,m4,9,1,"li",3),h.ALo(5,"async"),h.qZA(),h.qZA(),h.TgZ(6,"footer"),h.TgZ(7,"div",4),h.TgZ(8,"input",5),h.NdJ("ngModelChange",function(s){return r.mensagem.text=s}),h.qZA(),h.TgZ(9,"button",6),h.NdJ("click",function(){return r.onSubimit()}),h.TgZ(10,"mat-icon"),h._uU(11,"send"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(2),h.Q6J("ngIf",r.authService.userData),h.xp6(2),h.Q6J("ngForOf",h.lcZ(5,3,r.mensagens)),h.xp6(4),h.Q6J("ngModel",r.mensagem.text))},directives:[Fr,kr,fS,wB,gO,JF],pipes:[rh],styles:["main[_ngcontent-%COMP%]{background-color:#c58383}#container[_ngcontent-%COMP%]{background:#eff3f7;color:#fff;display:flex;flex-direction:column;min-height:100%}main[_ngcontent-%COMP%]{width:100%;display:inline-block;font-size:15px;vertical-align:top}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.status[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:7px}.green[_ngcontent-%COMP%]{background-color:#58b666}.orange[_ngcontent-%COMP%]{background-color:#ff725d}.blue[_ngcontent-%COMP%]{background-color:#6fbced;margin-right:0;margin-left:7px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:110px;padding:30px 20px 30px 40px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:first-child{border-radius:50%}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child{width:24px;margin-top:5px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:10px;margin-right:145px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;margin-bottom:5px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#7e818a}#chat[_ngcontent-%COMP%]{padding-left:0;margin:0;list-style-type:none;overflow-y:scroll;height:74vh;border-top:2px solid #fff;border-bottom:2px solid #fff}#chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 30px}#chat[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], #chat[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-block;font-size:13px;font-weight:400}#chat[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#bbb}#chat[_ngcontent-%COMP%]   .entete[_ngcontent-%COMP%]{margin-bottom:5px}#chat[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:20px;color:#fff;line-height:25px;max-width:90%;display:inline-block;text-align:left;border-radius:5px}#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]{text-align:right}#chat[_ngcontent-%COMP%]   .you[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#58b666}#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#6fbced}#chat[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:0 10px 10px 10px}#chat[_ngcontent-%COMP%]   .you[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{border-color:transparent transparent #58b666 transparent;margin-left:15px}#chat[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{border-color:transparent transparent #6fbced transparent;margin-left:375px}footer[_ngcontent-%COMP%]{position:static;background:#159A9C;margin-top:auto;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;padding:1rem 0rem}input[_ngcontent-%COMP%]{width:80rem;border-radius:5px;height:2rem;box-shadow:0 0;border:0 none;outline:0}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{box-shadow:0 0;border:0 none;outline:0}.pesquisar[_ngcontent-%COMP%]{border-radius:0 20px 20px 0;background-color:gold;display:flex;align-items:center;justify-content:center}@media (max-width: 767px){input[_ngcontent-%COMP%]{width:20rem}#chat[_ngcontent-%COMP%]{height:82vh}}"]}),n})(),canActivate:[wN]},{path:"forgot-password",component:Qj},{path:"verify-email-address",component:Jj}];let y4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[PE.forRoot(_4)],PE]}),n})(),v4=(()=>{class n{constructor(){this.title="me_ajuda_ae"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[bu],styles:[""]}),n})();const tU="firebasestorage.googleapis.com",nU="storageBucket";class zr extends V.ZR{constructor(e,t,r=0){super(EO(e),`Firebase Storage: ${t} (${EO(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return EO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function EO(n){return"storage/"+n}function CO(){return new zr("unknown","An unknown error occurred, please check the error payload for server response.")}function rU(){return new zr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function iU(){return new zr("canceled","User canceled the upload/download.")}function sU(){return new zr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rv(n){return new zr("invalid-argument",n)}function oU(){return new zr("app-deleted","The Firebase app was deleted.")}function aU(n){return new zr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pE(n,e){return new zr("invalid-format","String does not match format '"+n+"': "+e)}function gE(n){throw new zr("internal-error","Internal error: "+n)}class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ts.makeFromUrl(e,t)}catch(i){return new Ts(e,"")}if(""===r.path)return r;throw function x4(n){return new zr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(We){We.path_=decodeURIComponent(We.path)}const D=t.replace(/[.]/g,"\\."),Ge=[{regex:d,indices:{bucket:1,path:3},postModify:function s(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===tU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let We=0;We<Ge.length;We++){const Ct=Ge[We],Dt=Ct.regex.exec(e);if(Dt){let gi=Dt[Ct.indices.path];gi||(gi=""),r=new Ts(Dt[Ct.indices.bucket],gi),Ct.postModify(r);break}}if(null==r)throw function A4(n){return new zr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class P4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ES(n){return"string"==typeof n||n instanceof String}function lU(n){return IO()&&n instanceof Blob}function IO(){return"undefined"!=typeof Blob&&!(0,V.UG)()}function TO(n,e,t,r){if(r<e)throw rv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rv(`Invalid value for '${n}'. Expected ${t} or less.`)}function Kd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Zf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Zf||(Zf={})),Zf))();function cU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class U4{constructor(e,t,r,i,s,l,d,p,y,E,D,M=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=D,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,B)=>{this.resolve_=P,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function L4(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=CO();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?oU():iU():rU())};this.canceled_?t(0,new CS(!1,null,!0)):this.backoffId_=function N4(n,e,t){let r=1,i=null,s=null,l=!1,d=0;function p(){return 2===d}let y=!1;function E(...ne){y||(y=!0,e.apply(null,ne))}function D(ne){i=setTimeout(()=>{i=null,n(P,p())},ne)}function M(){s&&clearTimeout(s)}function P(ne,...je){if(y)return void M();if(ne)return M(),void E.call(null,ne,...je);if(p()||l)return M(),void E.call(null,ne,...je);let Ge;r<64&&(r*=2),1===d?(d=2,Ge=0):Ge=1e3*(r+Math.random()),D(Ge)}let B=!1;function X(ne){B||(B=!0,M(),!y&&(null!==i?(ne||(d=2),clearTimeout(i),D(0)):ne||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,X(!0)},t),X}((r,i)=>{if(i)return void r(!1,new CS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Zf.NO_ERROR,p=s.getStatus();if((!d||cU(p,this.additionalRetryCodes_))&&this.retry){const E=s.getErrorCode()===Zf.ABORT;return void r(!1,new CS(!1,null,E))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new CS(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function F4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class CS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function W4(...n){const e=function q4(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(IO())return new Blob(n);throw new zr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class DO{constructor(e,t){this.data=e,this.contentType=t||null}}function SO(n,e){switch(n){case ta.RAW:return new DO(dU(e));case ta.BASE64:case ta.BASE64URL:return new DO(hU(n,e));case ta.DATA_URL:return new DO(function Q4(n){const e=new fU(n);return e.base64?hU(ta.BASE64,e.rest):function Y4(n){let e;try{e=decodeURIComponent(n)}catch(t){throw pE(ta.DATA_URL,"Malformed data URL.")}return dU(e)}(e.rest)}(e),function X4(n){return new fU(n).contentType}(e))}throw CO()}function dU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function hU(n,e){switch(n){case ta.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw pE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ta.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw pE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function K4(n){if("undefined"==typeof atob)throw function O4(n){return new zr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:pE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class fU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw pE(ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function J4(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class sc{constructor(e,t){let r=0,i="";lU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(lU(this.data_)){const i=function Z4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new sc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new sc(r,!0)}}static getBlob(...e){if(IO()){const t=e.map(r=>r instanceof sc?r.data_:r);return new sc(W4.apply(null,t))}{const t=e.map(l=>ES(l)?SO(ta.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[s++]=l[d]}),new sc(i,!0)}}uploadData(){return this.data_}}function AO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function B4(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function pU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function nK(n,e){return e}class no{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||nK}}let IS=null;function mE(){if(IS)return IS;const n=[];n.push(new no("bucket")),n.push(new no("generation")),n.push(new no("metageneration")),n.push(new no("name","fullPath",!0));const t=new no("name");t.xform=function e(s,l){return function rK(n){return!ES(n)||n.length<2?n:pU(n)}(l)},n.push(t);const i=new no("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new no("timeCreated")),n.push(new no("updated")),n.push(new no("md5Hash",null,!0)),n.push(new no("cacheControl",null,!0)),n.push(new no("contentDisposition",null,!0)),n.push(new no("contentEncoding",null,!0)),n.push(new no("contentLanguage",null,!0)),n.push(new no("contentType",null,!0)),n.push(new no("metadata","customMetadata",!0)),IS=n,IS}function gU(n,e,t){const r=AO(e);return null===r?null:function sK(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function iK(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ts(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function xO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const mU="prefixes";class oc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ac(n){if(!n)throw CO()}function TS(n,e){return function t(r,i){const s=gU(n,i,e);return ac(null!==s),s}}function iv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function D4(){return new zr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function T4(){return new zr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function I4(n){return new zr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function S4(n){return new zr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function _E(n){const e=iv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function C4(n){return new zr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function yU(n,e,t){const i=Kd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new oc(i,"GET",TS(n,t),l);return d.errorHandler=_E(e),d}function dK(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=Kd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new oc(d,"GET",function uK(n,e){return function t(r,i){const s=function lK(n,e,t){const r=AO(t);return null===r?null:function aK(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[mU])for(const i of t[mU]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new Ts(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Ts(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return ac(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=iv(e),E}function bU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function gK(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class DS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function MO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){ac(!1)}return ac(!!t&&-1!==(e||["active"]).indexOf(t)),t}const vK={STATE_CHANGED:"state_changed"},ro={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function RO(n){switch(n){case"running":case"pausing":case"canceling":return ro.RUNNING;case"paused":return ro.PAUSED;case"success":return ro.SUCCESS;case"canceled":return ro.CANCELED;default:return ro.ERROR}}class bK{constructor(e,t,r){if(function V4(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function sv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class EK extends class wK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw gE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw gE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function zl(){return new EK}class IU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=mE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(cU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=rU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function mK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=bU(e,r,i),d={name:l.fullPath},p=Kd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=xO(l,t),B=new oc(p,"POST",function P(X){let ne;MO(X);try{ne=X.getResponseHeader("X-Goog-Upload-URL")}catch(je){ac(!1)}return ac(ES(ne)),ne},n.maxUploadRetryTime);return B.urlParams=d,B.headers=E,B.body=D,B.errorHandler=iv(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function _K(n,e,t,r){const p=new oc(t,"POST",function s(y){const E=MO(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){ac(!1)}D||ac(!1);const M=Number(D);return ac(!isNaN(M)),new DS(M,r.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=iv(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,zl,t,r);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new DS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function yK(n,e,t,r,i,s,l,d){const p=new DS(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function R4(){return new zr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let E=y;i>0&&(E=Math.min(E,i));const D=p.current;let P="";P=0===E?"finalize":y===E?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},X=r.slice(D,D+E);if(null===X)throw sU();const Ge=new oc(t,"POST",function ne(We,Ct){const Dt=MO(We,["active","final"]),dn=p.current+E,gi=r.size();let na;return na="final"===Dt?TS(e,s)(We,Ct):null,new DS(dn,gi,"final"===Dt,na)},e.maxUploadRetryTime);return Ge.headers=B,Ge.body=X.uploadData(),Ge.progressCallback=d||null,Ge.errorHandler=iv(n),Ge}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,zl,i,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=yU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function wU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Ge="";for(let We=0;We<2;We++)Ge+=Math.random().toString().slice(2);return Ge}();l["Content-Type"]="multipart/related; boundary="+p;const y=bU(e,r,i),E=xO(y,t),P=sc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===P)throw sU();const B={name:y.fullPath},X=Kd(s,n.host,n._protocol),je=n.maxUploadRetryTime,Ye=new oc(X,"POST",TS(n,t),je);return Ye.urlParams=B,Ye.headers=l,Ye.body=P.uploadData(),Ye.errorHandler=iv(e),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=iU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=RO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new bK(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(RO(this._state)){case ro.SUCCESS:sv(this._resolve.bind(null,this.snapshot))();break;case ro.CANCELED:case ro.ERROR:sv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(RO(this._state)){case ro.RUNNING:case ro.PAUSED:e.next&&sv(e.next.bind(e,this.snapshot))();break;case ro.SUCCESS:e.complete&&sv(e.complete.bind(e))();break;default:e.error&&sv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class im{constructor(e,t){this._service=e,this._location=t instanceof Ts?t:Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new im(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pU(this._location.path)}get storage(){return this._service}get parent(){const e=function eK(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ts(this._location.bucket,e);return new im(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw aU(e)}}function DU(n,e,t){return kO.apply(this,arguments)}function kO(){return kO=(0,we.Z)(function*(n,e,t){const i=yield SU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield DU(n,e,i.nextPageToken))}),kO.apply(this,arguments)}function SU(n,e){null!=e&&"number"==typeof e.maxResults&&TO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=dK(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,zl)}function PK(n){n._throwIfRoot("getDownloadURL");const e=function hK(n,e,t){const i=Kd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new oc(i,"GET",function cK(n,e){return function t(r,i){const s=gU(n,i,e);return ac(null!==s),function oK(n,e,t,r){const i=AO(e);if(null===i||!ES(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Kd("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+uU({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=_E(e),d}(n.storage,n._location,mE());return n.storage.makeRequestWithTokens(e,zl).then(t=>{if(null===t)throw function k4(){return new zr("no-download-url","The given file does not have any download URLs.")}();return t})}function AU(n,e){const t=function tK(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ts(n._location.bucket,t);return new im(n.storage,r)}function xU(n,e){if(n instanceof OO){const t=n;if(null==t._bucket)throw function M4(){return new zr("no-default-bucket","No default bucket found. Did you set the '"+nU+"' property when initializing the app?")}();const r=new im(t,t._bucket);return null!=e?xU(r,e):r}return void 0!==e?AU(n,e):n}function VK(n,e){if(e&&function FK(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof OO)return function LK(n,e){return new im(n,e)}(n,e);throw rv("To use ref(service, url), the first argument must be a Storage instance.")}return xU(n,e)}function MU(n,e){const t=null==e?void 0:e[nU];return null==t?null:Ts.makeFromBucketSpec(t,n)}class OO{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=tU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ts.makeFromBucketSpec(i,this._host):MU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ts.makeFromBucketSpec(this._url,e):MU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){TO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){TO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new im(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new P4(oU());{const l=function z4(n,e,t,r,i,s,l=!0){const d=uU(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function $4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function j4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function H4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,s),function G4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new U4(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const RU="@firebase/storage";function PU(n,e){return VK(n=(0,V.m9)(n),e)}function ZK(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new OO(t,r,i,e,is.SDK_VERSION)}!function KK(){(0,is._registerComponent)(new js.wA("storage",ZK,"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(RU,"0.9.14",""),(0,is.registerVersion)(RU,"0.9.14","esm2017")}();class SS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class FU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SS(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new SS(l,this,this._ref)):{next:t.next?l=>t.next(new SS(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class LU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Yd(e,this._service))}get items(){return this._delegate.items.map(e=>new Yd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function WK(n,e){return AU(n,e)}(this._delegate,e);return new Yd(t,this.storage)}get root(){return new Yd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Yd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new FU(function UK(n,e,t){return function xK(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new IU(n,new sc(e),t)}(n=(0,V.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ta.RAW,r){this._throwIfRoot("putString");const i=SO(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new FU(new IU(this._delegate,new sc(i.data,!0),s),this)}listAll(){return function GK(n){return function RK(n){const e={prefixes:[],items:[]};return DU(n,e).then(()=>e)}(n=(0,V.m9)(n))}(this._delegate).then(e=>new LU(e,this.storage))}list(e){return function $K(n,e){return SU(n=(0,V.m9)(n),e)}(this._delegate,e||void 0).then(t=>new LU(t,this.storage))}getMetadata(){return function jK(n){return function kK(n){n._throwIfRoot("getMetadata");const e=yU(n.storage,n._location,mE());return n.storage.makeRequestWithTokens(e,zl)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(e){return function HK(n,e){return function OK(n,e){n._throwIfRoot("updateMetadata");const t=function fK(n,e,t,r){const s=Kd(e.fullServerUrl(),n.host,n._protocol),d=xO(t,r),y=n.maxOperationRetryTime,E=new oc(s,"PATCH",TS(n,r),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=_E(e),E}(n.storage,n._location,e,mE());return n.storage.makeRequestWithTokens(t,zl)}(n=(0,V.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zK(n){return PK(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function qK(n){return function NK(n){n._throwIfRoot("deleteObject");const e=function pK(n,e){const r=Kd(e.fullServerUrl(),n.host,n._protocol),d=new oc(r,"DELETE",function l(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=_E(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zl)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw aU(e)}}class VU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(BU(e))throw rv("ref() expected a child path but got a URL, use refFromURL instead.");return new Yd(PU(this._delegate,e),this)}refFromURL(e){if(!BU(e))throw rv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ts.makeFromUrl(e,this._delegate.host)}catch(t){throw rv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yd(PU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function NU(n,e,t,r={}){!function BK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function BU(n){return/^[A-Za-z]+:\/\//.test(n)}function JK(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new VU(t,r)}function UU(n){const e=function t8(n){return new Wn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(AN(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function AS(n){return{getDownloadURL:()=>Xe(void 0).pipe(Dn.fc,Zt(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>Xe(void 0).pipe(Dn.fc,Zt(()=>n.getMetadata()),Dn.iC),delete:()=>(0,In.D)(n.delete()),child:e=>AS(n.child(e)),updateMetadata:e=>(0,In.D)(n.updateMetadata(e)),put:(e,t)=>UU(n.put(e,t)),putString:(e,t,r)=>UU(n.putString(e,t,r)),list:e=>(0,In.D)(n.list(e)),listAll:()=>(0,In.D)(n.listAll())}}!function e8(n){const e={TaskState:ro,TaskEvent:vK,StringFormat:ta,Storage:VU,Reference:Yd};n.INTERNAL.registerComponent(new js.wA("storage-compat",JK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Hs.Z);const n8=new h.OlP("angularfire2.storageBucket"),r8=new h.OlP("angularfire2.storage.maxUploadRetryTime"),i8=new h.OlP("angularfire2.storage.maxOperationRetryTime"),s8=new h.OlP("angularfire2.storage.use-emulator");let o8=(()=>{class n{constructor(t,r,i,s,l,d,p,y,E,D){const M=(0,di.on)(t,l,r);this.storage=(0,di.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const P=l.runOutsideAngular(()=>M.storage(i||void 0)),B=E;return B&&P.useEmulator(...B),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(t){return AS(this.storage.ref(t))}refFromURL(t){return AS(this.storage.refFromURL(t))}upload(t,r,i){return AS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(di.Dh),h.LFG(di.xv,8),h.LFG(n8,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(r8,8),h.LFG(i8,8),h.LFG(s8,8),h.LFG(vw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),l8=(()=>{class n{constructor(){eD.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[o8],imports:[a8]}),n})();const jU_firebase={apiKey:"AIzaSyDDW1-bzo0q0_5StDfZ_5c_3IGGAYknTRU",authDomain:"me-ajuda-ae-664ca.firebaseapp.com",projectId:"me-ajuda-ae-664ca",storageBucket:"me-ajuda-ae-664ca.appspot.com",messagingSenderId:"480215446284",appId:"1:480215446284:web:03cf53ab58d8aec42b8f29",measurementId:"G-WY38F96PZW"};let u8=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[u8]}),n})(),PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Fi,Ul,c8],Ul]}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),g8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[mG],imports:[[HU,PO,Ul],HU,PO]}),n})(),m8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[v4]}),n.\u0275inj=h.cJS({providers:[],imports:[[dh,di.hO.initializeApp(jU_firebase),Uj,Zj,l8,pZ,y4,QG,g8,PO,GG,nq,hG,p4]]}),n})();(0,h.G48)(),vc().bootstrapModule(m8).catch(n=>console.error(n))},5867:(st,be,L)=>{L.d(be,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=L(9681);(0,h.registerVersion)("firebase","9.14.0","app")},127:(st,be,L)=>{L.d(be,{Z:()=>h.Z});var h=L(3942);h.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(st,be,L)=>{L.r(be);var h=L(5861),G=L(3942),F=L(732),ie=L(2090),se=(L(9681),L(1877),L(4859));function de(){return window}function Y(){return(Y=(0,h.Z)(function*($,N,j){var ae;const{BuildInfo:ke}=de();(0,F.ap)(N.sessionId,"AuthEvent did not contain a session ID");const at=yield ve(N.sessionId),lt={};return(0,F.aq)()?lt.ibi=ke.packageName:(0,F.ar)()?lt.apn=ke.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),ke.displayName&&(lt.appDisplayName=ke.displayName),lt.sessionId=at,(0,F.at)($,j,N.type,void 0,null!==(ae=N.eventId)&&void 0!==ae?ae:void 0,lt)})).apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*($){const{BuildInfo:N}=de(),j={};(0,F.aq)()?j.iosBundleId=N.packageName:(0,F.ar)()?j.androidPackageName=N.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),yield(0,F.au)($,j)})).apply(this,arguments)}function He(){return(He=(0,h.Z)(function*($,N,j){const{cordova:ae}=de();let ke=()=>{};try{yield new Promise((at,lt)=>{let Ft=null;function ft(){var Bt;at();const Yr=null===(Bt=ae.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Yr&&Yr(),"function"==typeof(null==j?void 0:j.close)&&j.close()}function gn(){Ft||(Ft=window.setTimeout(()=>{lt((0,F.aw)($,"redirect-cancelled-by-user"))},2e3))}function br(){"visible"===(null==document?void 0:document.visibilityState)&&gn()}N.addPassiveListener(ft),document.addEventListener("resume",gn,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",br,!1),ke=()=>{N.removePassiveListener(ft),document.removeEventListener("resume",gn,!1),document.removeEventListener("visibilitychange",br,!1),Ft&&window.clearTimeout(Ft)}})}finally{ke()}})).apply(this,arguments)}function ve($){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,h.Z)(function*($){const N=ze($),j=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(j)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ze($){if((0,F.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode($);const N=new ArrayBuffer($.length),j=new Uint8Array(N);for(let ae=0;ae<$.length;ae++)j[ae]=$.charCodeAt(ae);return j}class ot extends F.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(N)),super.onEvent(N)}initialized(){var N=this;return(0,h.Z)(function*(){yield N.initPromise})()}}function Qe($){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,h.Z)(function*($){const N=yield pe()._get(ye($));return N&&(yield pe()._remove(ye($))),N})).apply(this,arguments)}function re(){const $=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const ae=Math.floor(Math.random()*N.length);$.push(N.charAt(ae))}return $.join("")}function pe(){return(0,F.az)(F.b)}function ye($){return(0,F.aA)("authEvent",$.config.apiKey,$.name)}function St($){if(!(null==$?void 0:$.includes("?")))return{};const[N,...j]=$.split("?");return(0,ie.zd)(j.join("?"))}function Ot(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.aw)("no-auth-event")}}function mr(){var $;return(null===($=null==self?void 0:self.location)||void 0===$?void 0:$.protocol)||null}function zn($=(0,ie.z$)()){return!("file:"!==mr()&&"ionic:"!==mr()&&"capacitor:"!==mr()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zr(){try{const $=self.localStorage,N=F.aI();if($)return $.setItem(N,"1"),$.removeItem(N),!function Ds($=(0,ie.z$)()){return function Ln(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function wn($=(0,ie.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,ie.hl)()}catch($){return mi()&&(0,ie.hl)()}return!1}function mi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fe(){return(function ti(){return"http:"===mr()||"https:"===mr()}()||(0,ie.ru)()||zn())&&!function Wr(){return(0,ie.b$)()||(0,ie.UG)()}()&&Zr()&&!mi()}function _r(){return zn()&&"undefined"!=typeof document}function Nr(){return(Nr=(0,h.Z)(function*(){return!!_r()&&new Promise($=>{const N=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),$(!0)})})})).apply(this,arguments)}const yn={LOCAL:"local",NONE:"none",SESSION:"session"},_i=F.ax,ni="persistence";function An($){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,h.Z)(function*($){yield $._initializationPromise;const N=Qt(),j=F.aA(ni,$.config.apiKey,$.name);N&&N.setItem(j,$._getPersistence())})).apply(this,arguments)}function Qt(){var $;try{return(null===($=function sn(){return"undefined"!=typeof window?window:null}())||void 0===$?void 0:$.sessionStorage)||null}catch(N){return null}}const yt=F.ax;class mt{constructor(){this.browserResolver=F.az(F.k),this.cordovaResolver=F.az(class Ar{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(N){var j=this;return(0,h.Z)(function*(){const ae=N._key();let ke=j.eventManagers.get(ae);return ke||(ke=new ot(N),j.eventManagers.set(ae,ke),j.attachCallbackListeners(N,ke)),ke})()}_openPopup(N){(0,F.as)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,j,ae,ke){var at=this;return(0,h.Z)(function*(){!function _e($){var N,j,ae,ke,at,lt,Ft,ft,gn,br;const Bt=de();(0,F.ax)("function"==typeof(null===(N=null==Bt?void 0:Bt.universalLinks)||void 0===N?void 0:N.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.ax)(void 0!==(null===(j=null==Bt?void 0:Bt.BuildInfo)||void 0===j?void 0:j.packageName),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.ax)("function"==typeof(null===(at=null===(ke=null===(ae=null==Bt?void 0:Bt.cordova)||void 0===ae?void 0:ae.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===at?void 0:at.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(ft=null===(Ft=null===(lt=null==Bt?void 0:Bt.cordova)||void 0===lt?void 0:lt.plugins)||void 0===Ft?void 0:Ft.browsertab)||void 0===ft?void 0:ft.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(br=null===(gn=null==Bt?void 0:Bt.cordova)||void 0===gn?void 0:gn.InAppBrowser)||void 0===br?void 0:br.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const lt=yield at._initialize(N);yield lt.initialized(),lt.resetRedirect(),(0,F.aD)(),yield at._originValidation(N);const Ft=function xe($,N,j=null){return{type:N,eventId:j,urlResponse:null,sessionId:re(),postBody:null,tenantId:$.tenantId,error:(0,F.aw)($,"no-auth-event")}}(N,ae,ke);yield function ct($,N){return pe()._set(ye($),N)}(N,Ft);const ft=yield function q($,N,j){return Y.apply(this,arguments)}(N,Ft,j),gn=yield function Se($){const{cordova:N}=de();return new Promise(j=>{N.plugins.browsertab.isAvailable(ae=>{let ke=null;ae?N.plugins.browsertab.openUrl($):ke=N.InAppBrowser.open($,(0,F.av)()?"_blank":"_system","location=yes"),j(ke)})})}(ft);return function Ve($,N,j){return He.apply(this,arguments)}(N,lt,gn)})()}_isIframeWebStorageSupported(N,j){throw new Error("Method not implemented.")}_originValidation(N){const j=N._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function oe($){return Ze.apply(this,arguments)}(N)),this.originValidationPromises[j]}attachCallbackListeners(N,j){const{universalLinks:ae,handleOpenURL:ke,BuildInfo:at}=de(),lt=setTimeout((0,h.Z)(function*(){yield Qe(N),j.onEvent(Ot())}),500),Ft=function(){var br=(0,h.Z)(function*(Bt){clearTimeout(lt);const Yr=yield Qe(N);let hs=null;Yr&&(null==Bt?void 0:Bt.url)&&(hs=function K($,N){var j,ae;const ke=function ce($){const N=St($),j=N.link?decodeURIComponent(N.link):void 0,ae=St(j).link,ke=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return St(ke).link||ke||ae||j||$}(N);if(ke.includes("/__/auth/callback")){const at=St(ke),lt=at.firebaseError?function Pe($){try{return JSON.parse($)}catch(N){return null}}(decodeURIComponent(at.firebaseError)):null,Ft=null===(ae=null===(j=null==lt?void 0:lt.code)||void 0===j?void 0:j.split("auth/"))||void 0===ae?void 0:ae[1],ft=Ft?(0,F.aw)(Ft):null;return ft?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:ft,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:ke,postBody:null}}return null}(Yr,Bt.url)),j.onEvent(hs||Ot())});return function(Yr){return br.apply(this,arguments)}}();void 0!==ae&&"function"==typeof ae.subscribe&&ae.subscribe(null,Ft);const ft=ke,gn=`${at.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var br=(0,h.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(gn)&&Ft({url:Bt}),"function"==typeof ft)try{ft(Bt)}catch(Yr){console.error(Yr)}});return function(Bt){return br.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(N){var j=this;return(0,h.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,j,ae,ke){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(N,j,ae,ke)})()}_openRedirect(N,j,ae,ke){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(N,j,ae,ke)})()}_isIframeWebStorageSupported(N,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,j)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return _r()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,h.Z)(function*(){if(N.underlyingResolver)return;const j=yield function _t(){return Nr.apply(this,arguments)}();N.underlyingResolver=j?N.cordovaResolver:N.browserResolver})()}}function ds($){return $.unwrap()}function It($){return yr($)}function yr($){const{_tokenResponse:N}=$ instanceof ie.ZR?$.customData:$;if(!N)return null;if(!($ instanceof ie.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return F.P.credentialFromResult($);const j=N.providerId;if(!j||j===F.o.PASSWORD)return null;let ae;switch(j){case F.o.GOOGLE:ae=F.Q;break;case F.o.FACEBOOK:ae=F.N;break;case F.o.GITHUB:ae=F.T;break;case F.o.TWITTER:ae=F.W;break;default:const{oauthIdToken:ke,oauthAccessToken:at,oauthTokenSecret:lt,pendingToken:Ft,nonce:ft}=N;return at||lt||ke||Ft?Ft?j.startsWith("saml.")?F.aL._create(j,Ft):F.J._fromParams({providerId:j,signInMethod:j,pendingToken:Ft,idToken:ke,accessToken:at}):new F.U(j).credential({idToken:ke,accessToken:at,rawNonce:ft}):null}return $ instanceof ie.ZR?ae.credentialFromError($):ae.credentialFromResult($)}function Cn($,N){return N.catch(j=>{throw j instanceof ie.ZR&&function En($,N){var j,ae;const ke=null===(j=N.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ae=N)||void 0===ae?void 0:ae.code))N.resolver=new Kt($,F.an($,N));else if(ke){const at=yr(N),lt=N;at&&(lt.credential=at,lt.tenantId=ke.tenantId||void 0,lt.email=ke.email||void 0,lt.phoneNumber=ke.phoneNumber||void 0)}}($,j),j}).then(j=>{const ke=j.user;return{operationType:j.operationType,credential:It(j),additionalUserInfo:F.al(j),user:sr.getOrCreate(ke)}})}function vt($,N){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*($,N){const j=yield N;return{verificationId:j.verificationId,confirm:ae=>Cn($,j.confirm(ae))}})).apply(this,arguments)}class Kt{constructor(N,j){this.resolver=j,this.auth=function ri($){return $.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Cn(ds(this.auth),this.resolver.resolveSignIn(N))}}class sr{constructor(N){this._delegate=N,this.multiFactor=F.ao(N)}static getOrCreate(N){return sr.USER_MAP.has(N)||sr.USER_MAP.set(N,new sr(N)),sr.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var j=this;return(0,h.Z)(function*(){return Cn(j.auth,F.Z(j._delegate,N))})()}linkWithPhoneNumber(N,j){var ae=this;return(0,h.Z)(function*(){return vt(ae.auth,F.l(ae._delegate,N,j))})()}linkWithPopup(N){var j=this;return(0,h.Z)(function*(){return Cn(j.auth,F.d(j._delegate,N,mt))})()}linkWithRedirect(N){var j=this;return(0,h.Z)(function*(){return yield An(F.aE(j.auth)),F.g(j._delegate,N,mt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var j=this;return(0,h.Z)(function*(){return Cn(j.auth,F._(j._delegate,N))})()}reauthenticateWithPhoneNumber(N,j){return vt(this.auth,F.r(this._delegate,N,j))}reauthenticateWithPopup(N){return Cn(this.auth,F.e(this._delegate,N,mt))}reauthenticateWithRedirect(N){var j=this;return(0,h.Z)(function*(){return yield An(F.aE(j.auth)),F.h(j._delegate,N,mt)})()}sendEmailVerification(N){return F.ab(this._delegate,N)}unlink(N){var j=this;return(0,h.Z)(function*(){return yield F.ak(j._delegate,N),j})()}updateEmail(N){return F.ag(this._delegate,N)}updatePassword(N){return F.ah(this._delegate,N)}updatePhoneNumber(N){return F.u(this._delegate,N)}updateProfile(N){return F.af(this._delegate,N)}verifyBeforeUpdateEmail(N,j){return F.ac(this._delegate,N,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sr.USER_MAP=new WeakMap;const et=F.ax;let Te=(()=>{class ${constructor(j,ae){if(this.app=j,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=j.options;et(ke,"invalid-api-key",{appName:j.name}),et(ke,"invalid-api-key",{appName:j.name});const at="undefined"!=typeof window?mt:void 0;this._delegate=ae.initialize({options:{persistence:Pt(ke,j.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(F.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,ae){F.G(this._delegate,j,ae)}applyActionCode(j){return F.a2(this._delegate,j)}checkActionCode(j){return F.a3(this._delegate,j)}confirmPasswordReset(j,ae){return F.a1(this._delegate,j,ae)}createUserWithEmailAndPassword(j,ae){var ke=this;return(0,h.Z)(function*(){return Cn(ke._delegate,F.a5(ke._delegate,j,ae))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return F.aa(this._delegate,j)}isSignInWithEmailLink(j){return F.a8(this._delegate,j)}getRedirectResult(){var j=this;return(0,h.Z)(function*(){et(Fe(),j._delegate,"operation-not-supported-in-this-environment");const ae=yield F.j(j._delegate,mt);return ae?Cn(j._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function ir($,N){(0,F.aE)($)._logFramework(N)}(this._delegate,j)}onAuthStateChanged(j,ae,ke){const{next:at,error:lt,complete:Ft}=tt(j,ae,ke);return this._delegate.onAuthStateChanged(at,lt,Ft)}onIdTokenChanged(j,ae,ke){const{next:at,error:lt,complete:Ft}=tt(j,ae,ke);return this._delegate.onIdTokenChanged(at,lt,Ft)}sendSignInLinkToEmail(j,ae){return F.a7(this._delegate,j,ae)}sendPasswordResetEmail(j,ae){return F.a0(this._delegate,j,ae||void 0)}setPersistence(j){var ae=this;return(0,h.Z)(function*(){let ke;switch(function xr($,N){_i(Object.values(yn).includes(N),$,"invalid-persistence-type"),(0,ie.b$)()?_i(N!==yn.SESSION,$,"unsupported-persistence-type"):(0,ie.UG)()?_i(N===yn.NONE,$,"unsupported-persistence-type"):mi()?_i(N===yn.NONE||N===yn.LOCAL&&(0,ie.hl)(),$,"unsupported-persistence-type"):_i(N===yn.NONE||Zr(),$,"unsupported-persistence-type")}(ae._delegate,j),j){case yn.SESSION:ke=F.a;break;case yn.LOCAL:ke=(yield F.az(F.i)._isAvailable())?F.i:F.b;break;case yn.NONE:ke=F.L;break;default:return F.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return Cn(this._delegate,F.X(this._delegate))}signInWithCredential(j){return Cn(this._delegate,F.Y(this._delegate,j))}signInWithCustomToken(j){return Cn(this._delegate,F.$(this._delegate,j))}signInWithEmailAndPassword(j,ae){return Cn(this._delegate,F.a6(this._delegate,j,ae))}signInWithEmailLink(j,ae){return Cn(this._delegate,F.a9(this._delegate,j,ae))}signInWithPhoneNumber(j,ae){return vt(this._delegate,F.s(this._delegate,j,ae))}signInWithPopup(j){var ae=this;return(0,h.Z)(function*(){return et(Fe(),ae._delegate,"operation-not-supported-in-this-environment"),Cn(ae._delegate,F.c(ae._delegate,j,mt))})()}signInWithRedirect(j){var ae=this;return(0,h.Z)(function*(){return et(Fe(),ae._delegate,"operation-not-supported-in-this-environment"),yield An(ae._delegate),F.f(ae._delegate,j,mt)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return F.a4(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=yn,$})();function tt($,N,j){let ae=$;"function"!=typeof $&&({next:ae,error:N,complete:j}=$);const ke=ae;return{next:lt=>ke(lt&&sr.getOrCreate(lt)),error:N,complete:j}}function Pt($,N){const j=function Mo($,N){const j=Qt();if(!j)return[];const ae=F.aA(ni,$,N);switch(j.getItem(ae)){case yn.NONE:return[F.L];case yn.LOCAL:return[F.i,F.a];case yn.SESSION:return[F.a];default:return[]}}($,N);if("undefined"!=typeof self&&!j.includes(F.i)&&j.push(F.i),"undefined"!=typeof window)for(const ae of[F.b,F.a])j.includes(ae)||j.push(ae);return j.includes(F.L)||j.push(F.L),j}class Nt{constructor(){this.providerId="phone",this._delegate=new F.P(ds(G.Z.auth()))}static credential(N,j){return F.P.credential(N,j)}verifyPhoneNumber(N,j){return this._delegate.verifyPhoneNumber(N,j)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=F.P.PROVIDER_ID;const nn=F.ax;class W{constructor(N,j,ae=G.Z.app()){var ke;nn(null===(ke=ae.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new F.R(N,j,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J($){$.INTERNAL.registerComponent(new se.wA("auth-compat",N=>{const j=N.getProvider("app-compat").getImmediate(),ae=N.getProvider("auth");return new Te(j,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.M,FacebookAuthProvider:F.N,GithubAuthProvider:F.T,GoogleAuthProvider:F.Q,OAuthProvider:F.U,SAMLAuthProvider:F.V,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:W,TwitterAuthProvider:F.W,Auth:Te,AuthCredential:F.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.24")}(G.Z)},8306:(st,be,L)=>{L.d(be,{y:()=>q});var h=L(930),G=L(727),F=L(8822),ie=L(4671);var se=L(2416),de=L(576),me=L(2806);let q=(()=>{class Se{constructor(He){He&&(this._subscribe=He)}lift(He){const _e=new Se;return _e.source=this,_e.operator=He,_e}subscribe(He,_e,ve){const Oe=function Ze(Se){return Se&&Se instanceof h.Lv||function oe(Se){return Se&&(0,de.m)(Se.next)&&(0,de.m)(Se.error)&&(0,de.m)(Se.complete)}(Se)&&(0,G.Nn)(Se)}(He)?He:new h.Hp(He,_e,ve);return(0,me.x)(()=>{const{operator:ze,source:Ue}=this;Oe.add(ze?ze.call(Oe,Ue):Ue?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(He){try{return this._subscribe(He)}catch(_e){He.error(_e)}}forEach(He,_e){return new(_e=Y(_e))((ve,Oe)=>{let ze;ze=this.subscribe(Ue=>{try{He(Ue)}catch(ot){Oe(ot),null==ze||ze.unsubscribe()}},Oe,ve)})}_subscribe(He){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(He)}[F.L](){return this}pipe(...He){return function Ee(Se){return 0===Se.length?ie.y:1===Se.length?Se[0]:function(He){return Se.reduce((_e,ve)=>ve(_e),He)}}(He)(this)}toPromise(He){return new(He=Y(He))((_e,ve)=>{let Oe;this.subscribe(ze=>Oe=ze,ze=>ve(ze),()=>_e(Oe))})}}return Se.create=Ve=>new Se(Ve),Se})();function Y(Se){var Ve;return null!==(Ve=null!=Se?Se:se.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(st,be,L)=>{L.d(be,{x:()=>se});var h=L(8306),G=L(727);const ie=(0,L(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=L(8737),Ee=L(2806);let se=(()=>{class me extends h.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const oe=new de(this,this);return oe.operator=Y,oe}_throwIfClosed(){if(this.closed)throw new ie}next(Y){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const Ze of oe)Ze.next(Y)}})}error(Y){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:oe}=this;for(;oe.length;)oe.shift().error(Y)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:oe,isStopped:Ze,observers:Se}=this;return oe||Ze?G.Lc:(Se.push(Y),new G.w0(()=>(0,he.P)(Se,Y)))}_checkFinalizedStatuses(Y){const{hasError:oe,thrownError:Ze,isStopped:Se}=this;oe?Y.error(Ze):Se&&Y.complete()}asObservable(){const Y=new h.y;return Y.source=this,Y}}return me.create=(q,Y)=>new de(q,Y),me})();class de extends se{constructor(q,Y){super(),this.destination=q,this.source=Y}next(q){var Y,oe;null===(oe=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===oe||oe.call(Y,q)}error(q){var Y,oe;null===(oe=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===oe||oe.call(Y,q)}complete(){var q,Y;null===(Y=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===Y||Y.call(q)}_subscribe(q){var Y,oe;return null!==(oe=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(q))&&void 0!==oe?oe:G.Lc}}},930:(st,be,L)=>{L.d(be,{Hp:()=>Ze,Lv:()=>oe});var h=L(576),G=L(727),F=L(2416),ie=L(7849),he=L(5032);const Ee=me("C",void 0,void 0);function me(ve,Oe,ze){return{kind:ve,value:Oe,error:ze}}var q=L(3410),Y=L(2806);class oe extends G.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,G.Nn)(Oe)&&Oe.add(this)):this.destination=_e}static create(Oe,ze,Ue){return new Ze(Oe,ze,Ue)}next(Oe){this.isStopped?He(function de(ve){return me("N",ve,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?He(function se(ve){return me("E",void 0,ve)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?He(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ze extends oe{constructor(Oe,ze,Ue){let ot;if(super(),(0,h.m)(Oe))ot=Oe;else if(Oe){let xe;({next:ot,error:ze,complete:Ue}=Oe),this&&F.v.useDeprecatedNextContext?(xe=Object.create(Oe),xe.unsubscribe=()=>this.unsubscribe()):xe=Oe,ot=null==ot?void 0:ot.bind(xe),ze=null==ze?void 0:ze.bind(xe),Ue=null==Ue?void 0:Ue.bind(xe)}this.destination={next:ot?Se(ot):he.Z,error:Se(null!=ze?ze:Ve),complete:Ue?Se(Ue):he.Z}}}function Se(ve,Oe){return(...ze)=>{try{ve(...ze)}catch(Ue){F.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Ue):(0,ie.h)(Ue)}}}function Ve(ve){throw ve}function He(ve,Oe){const{onStoppedNotification:ze}=F.v;ze&&q.z.setTimeout(()=>ze(ve,Oe))}const _e={closed:!0,next:he.Z,error:Ve,complete:he.Z}},727:(st,be,L)=>{L.d(be,{Lc:()=>Ee,w0:()=>he,Nn:()=>se});var h=L(576);const F=(0,L(3888).d)(me=>function(Y){me(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((oe,Ze)=>`${Ze+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ie=L(8737);class he{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Se of Y)Se.remove(this);else Y.remove(this);const{initialTeardown:oe}=this;if((0,h.m)(oe))try{oe()}catch(Se){q=Se instanceof F?Se.errors:[Se]}const{_teardowns:Ze}=this;if(Ze){this._teardowns=null;for(const Se of Ze)try{de(Se)}catch(Ve){q=null!=q?q:[],Ve instanceof F?q=[...q,...Ve.errors]:q.push(Ve)}}if(q)throw new F(q)}}add(q){var Y;if(q&&q!==this)if(this.closed)de(q);else{if(q instanceof he){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(Y=this._teardowns)&&void 0!==Y?Y:[]).push(q)}}_hasParent(q){const{_parentage:Y}=this;return Y===q||Array.isArray(Y)&&Y.includes(q)}_addParent(q){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(q),Y):Y?[Y,q]:q}_removeParent(q){const{_parentage:Y}=this;Y===q?this._parentage=null:Array.isArray(Y)&&(0,ie.P)(Y,q)}remove(q){const{_teardowns:Y}=this;Y&&(0,ie.P)(Y,q),q instanceof he&&q._removeParent(this)}}he.EMPTY=(()=>{const me=new he;return me.closed=!0,me})();const Ee=he.EMPTY;function se(me){return me instanceof he||me&&"closed"in me&&(0,h.m)(me.remove)&&(0,h.m)(me.add)&&(0,h.m)(me.unsubscribe)}function de(me){(0,h.m)(me)?me():me.unsubscribe()}},2416:(st,be,L)=>{L.d(be,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,be,L)=>{L.d(be,{E:()=>G});const G=new(L(8306).y)(he=>he.complete())},8996:(st,be,L)=>{L.d(be,{D:()=>ot});var h=L(8421),G=L(5363),F=L(9468),Ee=L(8306),de=L(2202),me=L(576),q=L(9672);function oe(xe,ct){if(!xe)throw new Error("Iterable cannot be null");return new Ee.y(Qe=>{(0,q.f)(Qe,ct,()=>{const Ce=xe[Symbol.asyncIterator]();(0,q.f)(Qe,ct,()=>{Ce.next().then(K=>{K.done?Qe.complete():Qe.next(K.value)})},0,!0)})})}var Ze=L(3670),Se=L(8239),Ve=L(1144),He=L(6495),_e=L(2206),ve=L(4532),Oe=L(3260);function ot(xe,ct){return ct?function Ue(xe,ct){if(null!=xe){if((0,Ze.c)(xe))return function ie(xe,ct){return(0,h.Xf)(xe).pipe((0,F.R)(ct),(0,G.Q)(ct))}(xe,ct);if((0,Ve.z)(xe))return function se(xe,ct){return new Ee.y(Qe=>{let Ce=0;return ct.schedule(function(){Ce===xe.length?Qe.complete():(Qe.next(xe[Ce++]),Qe.closed||this.schedule())})})}(xe,ct);if((0,Se.t)(xe))return function he(xe,ct){return(0,h.Xf)(xe).pipe((0,F.R)(ct),(0,G.Q)(ct))}(xe,ct);if((0,_e.D)(xe))return oe(xe,ct);if((0,He.T)(xe))return function Y(xe,ct){return new Ee.y(Qe=>{let Ce;return(0,q.f)(Qe,ct,()=>{Ce=xe[de.h](),(0,q.f)(Qe,ct,()=>{let K,re;try{({value:K,done:re}=Ce.next())}catch(pe){return void Qe.error(pe)}re?Qe.complete():Qe.next(K)},0,!0)}),()=>(0,me.m)(null==Ce?void 0:Ce.return)&&Ce.return()})}(xe,ct);if((0,Oe.L)(xe))return function ze(xe,ct){return oe((0,Oe.Q)(xe),ct)}(xe,ct)}throw(0,ve.z)(xe)}(xe,ct):(0,h.Xf)(xe)}},8421:(st,be,L)=>{L.d(be,{Xf:()=>Ze});var h=L(5987),G=L(1144),F=L(8239),ie=L(8306),he=L(3670),Ee=L(2206),se=L(4532),de=L(6495),me=L(3260),q=L(576),Y=L(7849),oe=L(8822);function Ze(Ue){if(Ue instanceof ie.y)return Ue;if(null!=Ue){if((0,he.c)(Ue))return function Se(Ue){return new ie.y(ot=>{const xe=Ue[oe.L]();if((0,q.m)(xe.subscribe))return xe.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,G.z)(Ue))return function Ve(Ue){return new ie.y(ot=>{for(let xe=0;xe<Ue.length&&!ot.closed;xe++)ot.next(Ue[xe]);ot.complete()})}(Ue);if((0,F.t)(Ue))return function He(Ue){return new ie.y(ot=>{Ue.then(xe=>{ot.closed||(ot.next(xe),ot.complete())},xe=>ot.error(xe)).then(null,Y.h)})}(Ue);if((0,Ee.D)(Ue))return ve(Ue);if((0,de.T)(Ue))return function _e(Ue){return new ie.y(ot=>{for(const xe of Ue)if(ot.next(xe),ot.closed)return;ot.complete()})}(Ue);if((0,me.L)(Ue))return function Oe(Ue){return ve((0,me.Q)(Ue))}(Ue)}throw(0,se.z)(Ue)}function ve(Ue){return new ie.y(ot=>{(function ze(Ue,ot){var xe,ct,Qe,Ce;return(0,h.mG)(this,void 0,void 0,function*(){try{for(xe=(0,h.KL)(Ue);!(ct=yield xe.next()).done;)if(ot.next(ct.value),ot.closed)return}catch(K){Qe={error:K}}finally{try{ct&&!ct.done&&(Ce=xe.return)&&(yield Ce.call(xe))}finally{if(Qe)throw Qe.error}}ot.complete()})})(Ue,ot).catch(xe=>ot.error(xe))})}},6451:(st,be,L)=>{L.d(be,{T:()=>Ee});var h=L(8189),G=L(8421),F=L(515),ie=L(3269),he=L(8996);function Ee(...se){const de=(0,ie.yG)(se),me=(0,ie._6)(se,1/0),q=se;return q.length?1===q.length?(0,G.Xf)(q[0]):(0,h.J)(me)((0,he.D)(q,de)):F.E}},5403:(st,be,L)=>{L.d(be,{Q:()=>G});var h=L(930);class G extends h.Lv{constructor(ie,he,Ee,se,de){super(ie),this.onFinalize=de,this._next=he?function(me){try{he(me)}catch(q){ie.error(q)}}:super._next,this._error=se?function(me){try{se(me)}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(me){ie.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;const{closed:he}=this;super.unsubscribe(),!he&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}},4004:(st,be,L)=>{L.d(be,{U:()=>F});var h=L(4482),G=L(5403);function F(ie,he){return(0,h.e)((Ee,se)=>{let de=0;Ee.subscribe(new G.Q(se,me=>{se.next(ie.call(he,me,de++))}))})}},8189:(st,be,L)=>{L.d(be,{J:()=>F});var h=L(5577),G=L(4671);function F(ie=1/0){return(0,h.z)(G.y,ie)}},5577:(st,be,L)=>{L.d(be,{z:()=>de});var h=L(4004),G=L(8421),F=L(4482),ie=L(9672),he=L(5403),se=L(576);function de(me,q,Y=1/0){return(0,se.m)(q)?de((oe,Ze)=>(0,h.U)((Se,Ve)=>q(oe,Se,Ze,Ve))((0,G.Xf)(me(oe,Ze))),Y):("number"==typeof q&&(Y=q),(0,F.e)((oe,Ze)=>function Ee(me,q,Y,oe,Ze,Se,Ve,He){const _e=[];let ve=0,Oe=0,ze=!1;const Ue=()=>{ze&&!_e.length&&!ve&&q.complete()},ot=ct=>ve<oe?xe(ct):_e.push(ct),xe=ct=>{Se&&q.next(ct),ve++;let Qe=!1;(0,G.Xf)(Y(ct,Oe++)).subscribe(new he.Q(q,Ce=>{null==Ze||Ze(Ce),Se?ot(Ce):q.next(Ce)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ve--;_e.length&&ve<oe;){const Ce=_e.shift();Ve?(0,ie.f)(q,Ve,()=>xe(Ce)):xe(Ce)}Ue()}catch(Ce){q.error(Ce)}}))};return me.subscribe(new he.Q(q,ot,()=>{ze=!0,Ue()})),()=>{null==He||He()}}(oe,Ze,me,Y)))}},5363:(st,be,L)=>{L.d(be,{Q:()=>ie});var h=L(9672),G=L(4482),F=L(5403);function ie(he,Ee=0){return(0,G.e)((se,de)=>{se.subscribe(new F.Q(de,me=>(0,h.f)(de,he,()=>de.next(me),Ee),()=>(0,h.f)(de,he,()=>de.complete(),Ee),me=>(0,h.f)(de,he,()=>de.error(me),Ee)))})}},3099:(st,be,L)=>{L.d(be,{B:()=>Ee});var h=L(8996),G=L(5698),F=L(7579),ie=L(930),he=L(4482);function Ee(de={}){const{connector:me=(()=>new F.x),resetOnError:q=!0,resetOnComplete:Y=!0,resetOnRefCountZero:oe=!0}=de;return Ze=>{let Se=null,Ve=null,He=null,_e=0,ve=!1,Oe=!1;const ze=()=>{null==Ve||Ve.unsubscribe(),Ve=null},Ue=()=>{ze(),Se=He=null,ve=Oe=!1},ot=()=>{const xe=Se;Ue(),null==xe||xe.unsubscribe()};return(0,he.e)((xe,ct)=>{_e++,!Oe&&!ve&&ze();const Qe=He=null!=He?He:me();ct.add(()=>{_e--,0===_e&&!Oe&&!ve&&(Ve=se(ot,oe))}),Qe.subscribe(ct),Se||(Se=new ie.Hp({next:Ce=>Qe.next(Ce),error:Ce=>{Oe=!0,ze(),Ve=se(Ue,q,Ce),Qe.error(Ce)},complete:()=>{ve=!0,ze(),Ve=se(Ue,Y),Qe.complete()}}),(0,h.D)(xe).subscribe(Se))})(Ze)}}function se(de,me,...q){return!0===me?(de(),null):!1===me?null:me(...q).pipe((0,G.q)(1)).subscribe(()=>de())}},9468:(st,be,L)=>{L.d(be,{R:()=>G});var h=L(4482);function G(F,ie=0){return(0,h.e)((he,Ee)=>{Ee.add(F.schedule(()=>he.subscribe(Ee),ie))})}},5698:(st,be,L)=>{L.d(be,{q:()=>ie});var h=L(515),G=L(4482),F=L(5403);function ie(he){return he<=0?()=>h.E:(0,G.e)((Ee,se)=>{let de=0;Ee.subscribe(new F.Q(se,me=>{++de<=he&&(se.next(me),he<=de&&se.complete())}))})}},8505:(st,be,L)=>{L.d(be,{b:()=>he});var h=L(576),G=L(4482),F=L(5403),ie=L(4671);function he(Ee,se,de){const me=(0,h.m)(Ee)||se||de?{next:Ee,error:se,complete:de}:Ee;return me?(0,G.e)((q,Y)=>{var oe;null===(oe=me.subscribe)||void 0===oe||oe.call(me);let Ze=!0;q.subscribe(new F.Q(Y,Se=>{var Ve;null===(Ve=me.next)||void 0===Ve||Ve.call(me,Se),Y.next(Se)},()=>{var Se;Ze=!1,null===(Se=me.complete)||void 0===Se||Se.call(me),Y.complete()},Se=>{var Ve;Ze=!1,null===(Ve=me.error)||void 0===Ve||Ve.call(me,Se),Y.error(Se)},()=>{var Se,Ve;Ze&&(null===(Se=me.unsubscribe)||void 0===Se||Se.call(me)),null===(Ve=me.finalize)||void 0===Ve||Ve.call(me)}))}):ie.y}},4408:(st,be,L)=>{L.d(be,{o:()=>he});var h=L(727);class G extends h.w0{constructor(se,de){super()}schedule(se,de=0){return this}}const F={setInterval(...Ee){const{delegate:se}=F;return((null==se?void 0:se.setInterval)||setInterval)(...Ee)},clearInterval(Ee){const{delegate:se}=F;return((null==se?void 0:se.clearInterval)||clearInterval)(Ee)},delegate:void 0};var ie=L(8737);class he extends G{constructor(se,de){super(se,de),this.scheduler=se,this.work=de,this.pending=!1}schedule(se,de=0){if(this.closed)return this;this.state=se;const me=this.id,q=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(q,me,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(q,this.id,de),this}requestAsyncId(se,de,me=0){return F.setInterval(se.flush.bind(se,this),me)}recycleAsyncId(se,de,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return de;F.clearInterval(de)}execute(se,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(se,de);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,de){let q,me=!1;try{this.work(se)}catch(Y){me=!0,q=Y||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:se,scheduler:de}=this,{actions:me}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=se&&(this.id=this.recycleAsyncId(de,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,be,L)=>{L.d(be,{v:()=>F});var h=L(6063);class G{constructor(he,Ee=G.now){this.schedulerActionCtor=he,this.now=Ee}schedule(he,Ee=0,se){return new this.schedulerActionCtor(this,he).schedule(se,Ee)}}G.now=h.l.now;class F extends G{constructor(he,Ee=G.now){super(he,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:Ee}=this;if(this._active)return void Ee.push(he);let se;this._active=!0;do{if(se=he.execute(he.state,he.delay))break}while(he=Ee.shift());if(this._active=!1,se){for(;he=Ee.shift();)he.unsubscribe();throw se}}}},4986:(st,be,L)=>{L.d(be,{z:()=>F,P:()=>ie});var h=L(4408);const F=new(L(7565).v)(h.o),ie=F},6063:(st,be,L)=>{L.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(st,be,L)=>{L.d(be,{z:()=>h});const h={setTimeout(...G){const{delegate:F}=h;return((null==F?void 0:F.setTimeout)||setTimeout)(...G)},clearTimeout(G){const{delegate:F}=h;return((null==F?void 0:F.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(st,be,L)=>{L.d(be,{h:()=>G});const G=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,be,L)=>{L.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(st,be,L)=>{L.d(be,{jO:()=>ie,yG:()=>he,_6:()=>Ee});var h=L(576),G=L(3532);function F(se){return se[se.length-1]}function ie(se){return(0,h.m)(F(se))?se.pop():void 0}function he(se){return(0,G.K)(F(se))?se.pop():void 0}function Ee(se,de){return"number"==typeof F(se)?se.pop():de}},8737:(st,be,L)=>{function h(G,F){if(G){const ie=G.indexOf(F);0<=ie&&G.splice(ie,1)}}L.d(be,{P:()=>h})},3888:(st,be,L)=>{function h(G){const ie=G(he=>{Error.call(he),he.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}L.d(be,{d:()=>h})},2806:(st,be,L)=>{L.d(be,{x:()=>F,O:()=>ie});var h=L(2416);let G=null;function F(he){if(h.v.useDeprecatedSynchronousErrorHandling){const Ee=!G;if(Ee&&(G={errorThrown:!1,error:null}),he(),Ee){const{errorThrown:se,error:de}=G;if(G=null,se)throw de}}else he()}function ie(he){h.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=he)}},9672:(st,be,L)=>{function h(G,F,ie,he=0,Ee=!1){const se=F.schedule(function(){ie(),Ee?G.add(this.schedule(null,he)):this.unsubscribe()},he);if(G.add(se),!Ee)return se}L.d(be,{f:()=>h})},4671:(st,be,L)=>{function h(G){return G}L.d(be,{y:()=>h})},1144:(st,be,L)=>{L.d(be,{z:()=>h});const h=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(st,be,L)=>{L.d(be,{D:()=>G});var h=L(576);function G(F){return Symbol.asyncIterator&&(0,h.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(st,be,L)=>{function h(G){return"function"==typeof G}L.d(be,{m:()=>h})},3670:(st,be,L)=>{L.d(be,{c:()=>F});var h=L(8822),G=L(576);function F(ie){return(0,G.m)(ie[h.L])}},6495:(st,be,L)=>{L.d(be,{T:()=>F});var h=L(2202),G=L(576);function F(ie){return(0,G.m)(null==ie?void 0:ie[h.h])}},8239:(st,be,L)=>{L.d(be,{t:()=>G});var h=L(576);function G(F){return(0,h.m)(null==F?void 0:F.then)}},3260:(st,be,L)=>{L.d(be,{Q:()=>F,L:()=>ie});var h=L(5987),G=L(576);function F(he){return(0,h.FC)(this,arguments,function*(){const se=he.getReader();try{for(;;){const{value:de,done:me}=yield(0,h.qq)(se.read());if(me)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(de)}}finally{se.releaseLock()}})}function ie(he){return(0,G.m)(null==he?void 0:he.getReader)}},3532:(st,be,L)=>{L.d(be,{K:()=>G});var h=L(576);function G(F){return F&&(0,h.m)(F.schedule)}},4482:(st,be,L)=>{L.d(be,{A:()=>G,e:()=>F});var h=L(576);function G(ie){return(0,h.m)(null==ie?void 0:ie.lift)}function F(ie){return he=>{if(G(he))return he.lift(function(Ee){try{return ie(Ee,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(st,be,L)=>{function h(){}L.d(be,{Z:()=>h})},7849:(st,be,L)=>{L.d(be,{h:()=>F});var h=L(2416),G=L(3410);function F(ie){G.z.setTimeout(()=>{const{onUnhandledError:he}=h.v;if(!he)throw ie;he(ie)})}},4532:(st,be,L)=>{function h(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(be,{z:()=>h})},5987:(st,be,L)=>{function de(K,re,pe,ye){return new(pe||(pe=Promise))(function(ce,St){function qt(Ot){try{dt(ye.next(Ot))}catch(ir){St(ir)}}function Ar(Ot){try{dt(ye.throw(Ot))}catch(ir){St(ir)}}function dt(Ot){Ot.done?ce(Ot.value):function Pe(ce){return ce instanceof pe?ce:new pe(function(St){St(ce)})}(Ot.value).then(qt,Ar)}dt((ye=ye.apply(K,re||[])).next())})}function _e(K){return this instanceof _e?(this.v=K,this):new _e(K)}function ve(K,re,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ye=pe.apply(K,re||[]),ce=[];return Pe={},St("next"),St("throw"),St("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function St(tn){ye[tn]&&(Pe[tn]=function(gr){return new Promise(function(_n,mr){ce.push([tn,gr,_n,mr])>1||qt(tn,gr)})})}function qt(tn,gr){try{!function Ar(tn){tn.value instanceof _e?Promise.resolve(tn.value.v).then(dt,Ot):ir(ce[0][2],tn)}(ye[tn](gr))}catch(_n){ir(ce[0][3],_n)}}function dt(tn){qt("next",tn)}function Ot(tn){qt("throw",tn)}function ir(tn,gr){tn(gr),ce.shift(),ce.length&&qt(ce[0][0],ce[0][1])}}function ze(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function oe(K){var re="function"==typeof Symbol&&Symbol.iterator,pe=re&&K[re],ye=0;if(pe)return pe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ye>=K.length&&(K=void 0),{value:K&&K[ye++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),pe={},ye("next"),ye("throw"),ye("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ye(ce){pe[ce]=K[ce]&&function(St){return new Promise(function(qt,Ar){!function Pe(ce,St,qt,Ar){Promise.resolve(Ar).then(function(dt){ce({value:dt,done:qt})},St)}(qt,Ar,(St=K[ce](St)).done,St.value)})}}}L.d(be,{mG:()=>de,qq:()=>_e,FC:()=>ve,KL:()=>ze})},5e3:(st,be,L)=>{L.d(be,{deG:()=>lu,tb:()=>Iy,AFp:()=>by,ip1:()=>Eg,CZH:()=>Cf,hGG:()=>ew,z2F:()=>Bd,sBO:()=>j0,Sil:()=>I0,_Vd:()=>Ll,EJc:()=>Vd,SBq:()=>Ad,qLn:()=>_p,vpe:()=>Do,tBr:()=>De,XFs:()=>_t,OlP:()=>bn,zs3:()=>Gs,ZZ4:()=>Ks,aQg:()=>jd,soG:()=>If,YKP:()=>lg,h0i:()=>Ba,PXZ:()=>Bx,R0b:()=>Ws,FiY:()=>qe,Lbi:()=>Cy,g9A:()=>Ey,n_E:()=>iy,Qsj:()=>PI,FYo:()=>OI,JOm:()=>Ra,q3G:()=>wr,tp0:()=>Rt,Rgc:()=>fg,dDg:()=>R0,q4F:()=>FI,GfV:()=>qu,s_b:()=>kd,ifc:()=>Qt,eFA:()=>N0,G48:()=>U0,Gpc:()=>Y,f3M:()=>T,X6Q:()=>vT,_c5:()=>hP,VLi:()=>Lx,c2e:()=>Vl,zSh:()=>Xn,wAp:()=>Mt,vHH:()=>Ve,EiD:()=>Oh,mCW:()=>Hc,qzn:()=>yu,JVY:()=>xh,pB0:()=>lp,eBb:()=>ap,L6k:()=>wl,LAX:()=>Cm,cg1:()=>Cd,kL8:()=>kb,yhl:()=>Em,dqk:()=>It,sIi:()=>ud,CqO:()=>Ru,QGY:()=>Hi,F4k:()=>gb,RDi:()=>Kl,AaK:()=>de,z3N:()=>Us,qOj:()=>ad,TTD:()=>ko,_Bn:()=>Gb,xp6:()=>HE,uIk:()=>Kh,ekj:()=>P_,Suo:()=>a0,Xpm:()=>Nt,lG2:()=>ae,Yz7:()=>_n,cJS:()=>ti,oAB:()=>$,Yjl:()=>ke,Y36:()=>Io,_UZ:()=>kl,qZA:()=>pd,TgZ:()=>fb,EpF:()=>LC,n5z:()=>Fo,LFG:()=>On,$8M:()=>Zt,$Z:()=>D_,NdJ:()=>A_,CRH:()=>l0,O4$:()=>ru,oxw:()=>md,ALo:()=>GI,lcZ:()=>Ku,Hsn:()=>Jr,F$t:()=>VC,Q6J:()=>ue,s9C:()=>mb,DdM:()=>Md,iGM:()=>uy,MAs:()=>Mu,CHM:()=>Xl,LSH:()=>Ph,YNc:()=>Be,_uU:()=>Pl,Oqu:()=>Lu,hij:()=>B_,Gf:()=>mg});var h=L(7579),G=L(727),F=L(8306),ie=L(6451),he=L(3099);function Ee(o){for(let a in o)if(o[a]===Ee)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function de(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(de).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function me(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const q=Ee({__forward_ref__:Ee});function Y(o){return o.__forward_ref__=Y,o.toString=function(){return de(this())},o}function oe(o){return Ze(o)?o():o}function Ze(o){return"function"==typeof o&&o.hasOwnProperty(q)&&o.__forward_ref__===Y}class Ve extends Error{constructor(a,u){super(function He(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function _e(o){return"string"==typeof o?o:null==o?"":String(o)}function ve(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():_e(o)}function ot(o,a){const u=a?` in ${a}`:"";throw new Ve(-201,`No provider for ${ve(o)} found${u}`)}function dt(o,a){null==o&&function Ot(o,a,u,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,o,null,"!=")}function _n(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function ti(o){return{providers:o.providers||[],imports:o.imports||[]}}function zn(o){return Wr(o,Zr)||Wr(o,Fe)}function Wr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ds(o){return o&&(o.hasOwnProperty(mi)||o.hasOwnProperty(_r))?o[mi]:null}const Zr=Ee({\u0275prov:Ee}),mi=Ee({\u0275inj:Ee}),Fe=Ee({ngInjectableDef:Ee}),_r=Ee({ngInjectorDef:Ee});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Nr;function yn(o){const a=Nr;return Nr=o,a}function _i(o,a,u){const c=zn(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&_t.Optional?null:void 0!==a?a:void ot(de(o),"Injector")}function xr(o){return{toString:o}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),Qt=(()=>{return(o=Qt||(Qt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Qt;var o})();const yt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,ds="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=yt||"undefined"!=typeof global&&global||mt||ds,Cn={},vt=[],vr=Ee({\u0275cmp:Ee}),Kt=Ee({\u0275dir:Ee}),sr=Ee({\u0275pipe:Ee}),et=Ee({\u0275mod:Ee}),Te=Ee({\u0275fac:Ee}),tt=Ee({__NG_ELEMENT_ID__:Ee});let Pt=0;function Nt(o){return xr(()=>{const u={},c={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||vt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Qt.Emulated,id:"c",styles:o.styles||vt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return c.id+=Pt++,c.inputs=j(o.inputs,u),c.outputs=j(o.outputs),m&&m.forEach(C=>C(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(W):null,c.pipeDefs=b?()=>("function"==typeof b?b():b).map(z):null,c})}function W(o){return at(o)||function lt(o){return o[Kt]||null}(o)}function z(o){return function Ft(o){return o[sr]||null}(o)}const J={};function $(o){return xr(()=>{const a={type:o.type,bootstrap:o.bootstrap||vt,declarations:o.declarations||vt,imports:o.imports||vt,exports:o.exports||vt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(J[o.id]=o.type),a})}function j(o,a){if(null==o)return Cn;const u={};for(const c in o)if(o.hasOwnProperty(c)){let f=o[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=c,a&&(a[f]=m)}return u}const ae=Nt;function ke(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function at(o){return o[vr]||null}function ft(o,a){const u=o[et]||null;if(!u&&!0===a)throw new Error(`Type ${de(o)} does not have '\u0275mod' property.`);return u}function Ki(o){return Array.isArray(o)&&"object"==typeof o[1]}function Yi(o){return Array.isArray(o)&&!0===o[1]}function Jd(o){return 0!=(8&o.flags)}function eh(o){return 2==(2&o.flags)}function qn(o){return 1==(1&o.flags)}function Qi(o){return null!==o.template}function th(o){return 0!=(512&o[2])}function As(o,a){return o.hasOwnProperty(Te)?o[Te]:null}class lh{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ko(){return tl}function tl(o){return o.type.prototype.ngOnChanges&&(o.setInput=ql),dc}function dc(){const o=Wl(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===Cn)o.previous=a;else for(let c in a)u[c]=a[c];o.current=null,this.ngOnChanges(a)}}function ql(o,a,u,c){const f=Wl(o)||function aa(o,a){return o[Fi]=a}(o,{previous:Cn,current:null}),m=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],I=b[C];m[C]=new lh(I&&I.currentValue,a,b===Cn),o[c]=a}ko.ngInherit=!0;const Fi="__ngSimpleChanges__";function Wl(o){return o[Fi]||null}const hc="http://www.w3.org/2000/svg";let uh;function Kl(o){uh=o}function Vn(o){return!!o.listen}const yi={createRenderer:(o,a)=>function fc(){return void 0!==uh?uh:"undefined"!=typeof document?document:void 0}()};function Yn(o){for(;Array.isArray(o);)o=o[0];return o}function Li(o,a){return Yn(a[o])}function Qn(o,a){return Yn(a[o.index])}function Ms(o,a){return o.data[a]}function Rs(o,a){return o[a]}function Si(o,a){const u=a[o];return Ki(u)?u:u[0]}function Or(o){return 4==(4&o[2])}function nl(o){return 128==(128&o[2])}function Xi(o,a){return null==a?null:o[a]}function fs(o){o[18]=0}function rl(o,a){o[5]+=a;let u=o,c=o[3];for(;null!==c&&(1===a&&1===u[5]||-1===a&&0===u[5]);)c[5]+=a,u=c,c=c[3]}const At={lFrame:nu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function il(){return At.bindingsEnabled}function Me(){return At.lFrame.lView}function Jt(){return At.lFrame.tView}function Xl(o){return At.lFrame.contextLView=o,o[8]}function Mn(){let o=ca();for(;null!==o&&64===o.type;)o=o.parent;return o}function ca(){return At.lFrame.currentTNode}function oi(o,a){const u=At.lFrame;u.currentTNode=o,u.isParent=a}function co(){return At.lFrame.isParent}function ol(){At.lFrame.isParent=!1}function Oo(){return At.isInCheckNoChangesMode}function da(o){At.isInCheckNoChangesMode=o}function Lr(){const o=At.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ji(){return At.lFrame.bindingIndex++}function yc(o,a){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=o,al(a)}function al(o){At.lFrame.currentDirectiveIndex=o}function vc(){return At.lFrame.currentQueryIndex}function Po(o){At.lFrame.currentQueryIndex=o}function dh(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function ll(o,a,u){if(u&_t.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&_t.Host||(f=dh(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const c=At.lFrame=bc();return c.currentTNode=a,c.lView=o,!0}function tu(o){const a=bc(),u=o[1];At.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function bc(){const o=At.lFrame,a=null===o?null:o.child;return null===a?nu(o):a}function nu(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function ul(){const o=At.lFrame;return At.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const wc=ul;function fa(){const o=ul();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Vr(){return At.lFrame.selectedIndex}function Br(o){At.lFrame.selectedIndex=o}function Hn(){const o=At.lFrame;return Ms(o.tView,o.selectedIndex)}function ru(){At.lFrame.currentNamespace=hc}function cl(o,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:O}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-u,I),x&&((o.viewHooks||(o.viewHooks=[])).push(u,x),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,x)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(u,O)}}function pa(o,a,u){Ic(o,a,3,u)}function ga(o,a,u,c){(3&o[2])===u&&Ic(o,a,u,c)}function fh(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Ic(o,a,u,c){const m=null!=c?c:-1,b=a.length-1;let C=0;for(let I=void 0!==c?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=c&&C>=c)break}else a[I]<0&&(o[18]+=65536),(C<m||-1==m)&&(mm(o,u,a,I),o[18]=(4294901760&o[18])+I+2),I++}function mm(o,a,u,c){const f=u[c]<0,m=u[c+1],C=o[f?-u[c]:u[c]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class ur{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ac(o,a,u){const c=Vn(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const b=u[f++],C=u[f++],I=u[f++];c?o.setAttribute(a,C,I,b):a.setAttributeNS(b,C,I)}else{const b=m,C=u[++f];Ps(b)?c&&o.setProperty(a,b,C):c?o.setAttribute(a,b,C):a.setAttribute(b,C),f++}}return f}function In(o){return 3===o||4===o||6===o}function Ps(o){return 64===o.charCodeAt(0)}function Xe(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?u=f:0===u||Bn(o,u,f,null,-1===u||2===u?a[++c]:null)}}return o}function Bn(o,a,u,c,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==f&&(o[m+1]=f));if(c===o[m+1])return void(o[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,u),null!==c&&o.splice(m++,0,c),null!==f&&o.splice(m++,0,f)}function Bi(o){return-1!==o}function Wn(o){return 32767&o}function dl(o,a){let u=function gh(o){return o>>16}(o),c=a;for(;u>0;)c=c[15],u--;return c}let mh=!0;function hl(o){const a=mh;return mh=o,a}let ht=0;function fl(o,a){const u=ma(o,a);if(-1!==u)return u;const c=a[1];c.firstCreatePass&&(o.injectorIndex=a.length,pl(c.data,o),pl(a,null),pl(c.blueprint,null));const f=Un(o,a),m=o.injectorIndex;if(Bi(f)){const b=Wn(f),C=dl(f,a),I=C[1].data;for(let x=0;x<8;x++)a[m+x]=C[b+x]|I[b+x]}return a[m+8]=f,m}function pl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function ma(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Un(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,c=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(c=2===b?m.declTNode:1===b?f[6]:null,null===c)return-1;if(u++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function fo(o,a,u){!function Mc(o,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(tt)&&(c=u[tt]),null==c&&(c=u[tt]=ht++);const f=255&c;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function au(o,a,u){if(u&_t.Optional)return o;ot(a,"NodeInjector")}function _a(o,a,u,c){if(u&_t.Optional&&void 0===c&&(c=null),0==(u&(_t.Self|_t.Host))){const f=o[9],m=yn(void 0);try{return f?f.get(a,c,u&_t.Optional):_i(a,c,u&_t.Optional)}finally{yn(m)}}return au(c,a,u)}function gl(o,a,u,c=_t.Default,f){if(null!==o){const m=function _h(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(tt)?o[tt]:void 0;return"number"==typeof a?a>=0?255&a:ya:a}(u);if("function"==typeof m){if(!ll(a,o,c))return c&_t.Host?au(f,u,c):_a(a,u,c,f);try{const b=m(c);if(null!=b||c&_t.Optional)return b;ot(u)}finally{wc()}}else if("number"==typeof m){let b=null,C=ma(o,a),I=-1,x=c&_t.Host?a[16][6]:null;for((-1===C||c&_t.SkipSelf)&&(I=-1===C?Un(o,a):a[C+8],-1!==I&&Ui(c,!1)?(b=a[1],C=Wn(I),a=dl(I,a)):C=-1);-1!==C;){const O=a[1];if(gs(m,C,O.data)){const U=tp(C,a,u,b,c,x);if(U!==ml)return U}I=a[C+8],-1!==I&&Ui(c,a[1].data[C+8]===x)&&gs(m,C,a)?(b=O,C=Wn(I),a=dl(I,a)):C=-1}}}return _a(a,u,c,f)}const ml={};function ya(){return new Rn(Mn(),Me())}function tp(o,a,u,c,f,m){const b=a[1],C=b.data[o+8],O=po(C,b,u,null==c?eh(C)&&mh:c!=b&&0!=(3&C.type),f&_t.Host&&m===C);return null!==O?ai(a,b,O,C):ml}function po(o,a,u,c,f){const m=o.providerIndexes,b=a.data,C=1048575&m,I=o.directiveStart,O=m>>20,Q=f?C+O:o.directiveEnd;for(let te=c?C:C+O;te<Q;te++){const Ie=b[te];if(te<I&&u===Ie||te>=I&&Ie.type===u)return te}if(f){const te=b[I];if(te&&Qi(te)&&te.type===u)return I}return null}function ai(o,a,u,c){let f=o[u];const m=a.data;if(function Tc(o){return o instanceof ur}(f)){const b=f;b.resolving&&function Oe(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${o}${u}`)}(ve(m[u]));const C=hl(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?yn(b.injectImpl):null;ll(o,c,_t.Default);try{f=o[u]=b.factory(void 0,m,o,c),a.firstCreatePass&&u>=c.directiveStart&&function av(o,a,u){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(c){const b=tl(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==I&&yn(I),hl(C),b.resolving=!1,wc()}}return f}function gs(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Ui(o,a){return!(o&_t.Self||o&_t.Host&&a)}class Rn{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,c){return gl(this._tNode,this._lView,a,c,u)}}function Fo(o){return xr(()=>{const a=o.prototype.constructor,u=a[Te]||_l(a),c=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==c;){const m=f[Te]||_l(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function _l(o){return Ze(o)?()=>{const a=_l(oe(o));return a&&a()}:As(o)}function Zt(o){return function Rc(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const c=u.length;let f=0;for(;f<c;){const m=u[f];if(In(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Mn(),o)}const li="__parameters__";function ui(o,a,u){return xr(()=>{const c=function cr(o){return function(...u){if(o){const c=o(...u);for(const f in c)this[f]=c[f]}}}(a);function f(...m){if(this instanceof f)return c.apply(this,m),this;const b=new f(...m);return C.annotation=b,C;function C(I,x,O){const U=I.hasOwnProperty(li)?I[li]:Object.defineProperty(I,li,{value:[]})[li];for(;U.length<=O;)U.push(null);return(U[O]=U[O]||[]).push(b),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class bn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=_n({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const lu=new bn("AnalyzeForEntryComponents");function xi(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let c=o[u];Array.isArray(c)?(a===o&&(a=o.slice(0,u)),xi(c,a)):a!==o&&a.push(c)}return a}function ms(o,a){o.forEach(u=>Array.isArray(u)?ms(u,a):a(u))}function bh(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function wa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Ea(o,a){const u=[];for(let c=0;c<o;c++)u.push(a);return u}function xt(o,a,u){let c=ci(o,a);return c>=0?o[1|c]=u:(c=~c,function vm(o,a,u,c){let f=o.length;if(f==a)o.push(u,c);else if(1===f)o.push(c,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=c}}(o,c,a,u)),c}function Pc(o,a){const u=ci(o,a);if(u>=0)return o[1|u]}function ci(o,a){return function Ca(o,a,u){let c=0,f=o.length>>u;for(;f!==c;){const m=c+(f-c>>1),b=o[m<<u];if(a===b)return m<<u;b>a?f=m:c=m+1}return~(f<<u)}(o,a,1)}const er={},du="__NG_DI_FLAG__",Ia="ngTempTokenPath",_s=/\n/gm,ts="__source",ip=Ee({provide:String,useValue:Ee});let Vo;function fu(o){const a=Vo;return Vo=o,a}function ys(o,a=_t.Default){if(void 0===Vo)throw new Ve(203,"");return null===Vo?_i(o,void 0,a):Vo.get(o,a&_t.Optional?null:void 0,a)}function On(o,a=_t.Default){return(function sn(){return Nr}()||ys)(oe(o),a)}const T=On;function S(o){const a=[];for(let u=0;u<o.length;u++){const c=oe(o[u]);if(Array.isArray(c)){if(0===c.length)throw new Ve(900,"");let f,m=_t.Default;for(let b=0;b<c.length;b++){const C=c[b],I=H(C);"number"==typeof I?-1===I?f=C.token:m|=I:f=C}a.push(On(f,m))}else a.push(On(c))}return a}function k(o,a){return o[du]=a,o.prototype[du]=a,o}function H(o){return o[du]}const De=k(ui("Inject",o=>({token:o})),-1),qe=k(ui("Optional"),8),Rt=k(ui("SkipSelf"),4);let pu;function Vs(o){var a;return(null===(a=function ns(){if(void 0===pu&&(pu=null,It.trustedTypes))try{pu=It.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return pu}())||void 0===a?void 0:a.createHTML(o))||o}class Uo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class op extends Uo{getTypeName(){return"HTML"}}class Sh extends Uo{getTypeName(){return"Style"}}class Ah extends Uo{getTypeName(){return"Script"}}class uv extends Uo{getTypeName(){return"URL"}}class _u extends Uo{getTypeName(){return"ResourceURL"}}function Us(o){return o instanceof Uo?o.changingThisBreaksApplicationSecurity:o}function yu(o,a){const u=Em(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Em(o){return o instanceof Uo&&o.getTypeName()||null}function xh(o){return new op(o)}function wl(o){return new Sh(o)}function ap(o){return new Ah(o)}function Cm(o){return new uv(o)}function lp(o){return new _u(o)}class vu{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Vs(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class cv{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Vs(a),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Vs(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const hv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hc(o){return(o=String(o)).match(hv)||o.match(Mh)?o:"unsafe:"+o}function vo(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Sa(...o){const a={};for(const u of o)for(const c in u)u.hasOwnProperty(c)&&(a[c]=!0);return a}const up=vo("area,br,col,hr,img,wbr"),Tm=vo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dm=vo("rp,rt"),cp=Sa(up,Sa(Tm,vo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sa(Dm,vo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sa(Dm,Tm)),jo=vo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dp=vo("srcset"),xm=Sa(jo,dp,vo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),El=vo("script,style,template");class $c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!cp.hasOwnProperty(u))return this.sanitizedSomething=!0,!El.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=a.attributes;for(let f=0;f<c.length;f++){const m=c.item(f),b=m.name,C=b.toLowerCase();if(!xm.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=m.value;jo[C]&&(I=Hc(I)),dp[C]&&(o=I,I=(o=String(o)).split(",").map(a=>Hc(a.trim())).join(", ")),this.buf.push(" ",b,'="',bu(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();cp.hasOwnProperty(u)&&!up.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(bu(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Mm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gc=/([^\#-~ |!])/g;function bu(o){return o.replace(/&/g,"&amp;").replace(Mm,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Gc,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kh;function Oh(o,a){let u=null;try{kh=kh||function Im(o){const a=new cv(o);return function dv(){try{return!!(new window.DOMParser).parseFromString(Vs(""),"text/html")}catch(o){return!1}}()?new vu(a):a}(o);let c=a?String(a):"";u=kh.getInertBodyElement(c);let f=5,m=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=m,m=u.innerHTML,u=kh.getInertBodyElement(c)}while(c!==m);return Vs((new $c).sanitizeChildren(zc(u)||u))}finally{if(u){const c=zc(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function zc(o){return"content"in o&&function pv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function Ph(o){const a=function R(){const o=Me();return o&&o[12]}();return a?a.sanitize(wr.URL,o)||"":yu(o,"URL")?Us(o):Hc(_e(o))}const Le="__ngContext__";function ut(o,a){o[Le]=a}function Tn(o){const a=function on(o){return o[Le]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Kc(o){return o.ngOriginalError}function mp(o,...a){o.error(...a)}class _p{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),c=function gv(o){return o&&o.ngErrorLogger||mp}(a);c(this._console,"ERROR",a),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Kc(a);for(;u&&Kc(u);)u=Kc(u);return u||null}}const DE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function Il(o){return o instanceof Function?o():o}var Ra=(()=>((Ra=Ra||{})[Ra.Important=1]="Important",Ra[Ra.DashCase=2]="DashCase",Ra))();function yv(o,a){return undefined(o,a)}function Qc(o){const a=o[3];return Yi(a)?a[3]:a}function vv(o){return bv(o[13])}function yp(o){return bv(o[4])}function bv(o){for(;null!==o&&!Yi(o);)o=o[4];return o}function Lh(o,a,u,c,f){if(null!=c){let m,b=!1;Yi(c)?m=c:Ki(c)&&(b=!0,c=c[0]);const C=Yn(c);0===o&&null!==u?null==f?Eu(a,u,C):Vh(a,u,C,f||null,!0):1===o&&null!==u?Vh(a,u,C,f||null,!0):2===o?function BE(o,a,u){const c=Lm(o,a);c&&function WS(o,a,u,c){Vn(o)?o.removeChild(a,u,c):a.removeChild(u)}(o,c,a,u)}(a,C,b):3===o&&a.destroyNode(C),null!=m&&function V(o,a,u,c,f){const m=u[7];m!==Yn(u)&&Lh(a,o,c,m,f);for(let C=10;C<u.length;C++){const I=u[C];vp(I[1],I,o,a,c,m)}}(a,o,m,u,f)}}function Ev(o,a,u){return Vn(o)?o.createElement(a,u):null===u?o.createElement(a):o.createElementNS(u,a)}function Xc(o,a){const u=o[9],c=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,rl(f,-1)),u.splice(c,1)}function Iv(o,a){if(o.length<=10)return;const u=10+a,c=o[u];if(c){const f=c[17];null!==f&&f!==o&&Xc(f,c),a>0&&(o[u-1][4]=c[4]);const m=wa(o,10+a);!function GS(o,a){vp(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const b=m[19];null!==b&&b.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function kE(o,a){if(!(256&a[2])){const u=a[11];Vn(u)&&u.destroyNode&&vp(o,a,u,3,null,null),function Pm(o){let a=o[13];if(!a)return Nm(o[1],o);for(;a;){let u=null;if(Ki(a))u=a[13];else{const c=a[10];c&&(u=c)}if(!u){for(;a&&!a[4]&&a!==o;)Ki(a)&&Nm(a[1],a),a=a[3];null===a&&(a=o),Ki(a)&&Nm(a[1],a),u=a&&a[4]}a=u}}(a)}}function Nm(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function OE(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let c=0;c<u.length;c+=2){const f=a[u[c]];if(!(f instanceof ur)){const m=u[c+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const C=f[m[b]],I=m[b+1];try{I.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function qS(o,a){const u=o.cleanup,c=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],C="function"==typeof b?b(a):Yn(a[b]),I=c[f=u[m+2]],x=u[m+3];"boolean"==typeof x?C.removeEventListener(u[m],I,x):x>=0?c[f=x]():c[f=-x].unsubscribe(),m+=2}else{const b=c[f=u[m+1]];u[m].call(b)}if(null!==c){for(let m=f+1;m<c.length;m++)c[m]();a[7]=null}}(o,a),1===a[1].type&&Vn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&Yi(a[3])){u!==a[3]&&Xc(u,a);const c=a[19];null!==c&&c.detachView(o)}}}function Tv(o,a,u){return function Fm(o,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[0];if(2&c.flags){const f=o.data[c.directiveStart].encapsulation;if(f===Qt.None||f===Qt.Emulated)return null}return Qn(c,u)}(o,a.parent,u)}function Vh(o,a,u,c,f){Vn(o)?o.insertBefore(a,u,c,f):a.insertBefore(u,c,f)}function Eu(o,a,u){Vn(o)?o.appendChild(a,u):a.appendChild(u)}function Dv(o,a,u,c,f){null!==c?Vh(o,a,u,c,f):Eu(o,a,u)}function Lm(o,a){return Vn(o)?o.parentNode(a):a.parentNode}function NE(o,a,u){return LE(o,a,u)}let LE=function FE(o,a,u){return 40&o.type?Qn(o,u):null};function Bm(o,a,u,c){const f=Tv(o,c,a),m=a[11],C=NE(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)Dv(m,f,u[I],C,!1);else Dv(m,f,u,C,!1)}function Um(o,a){if(null!==a){const u=a.type;if(3&u)return Qn(a,o);if(4&u)return Sv(-1,o[a.index]);if(8&u){const c=a.child;if(null!==c)return Um(o,c);{const f=o[a.index];return Yi(f)?Sv(-1,f):Yn(f)}}if(32&u)return yv(a,o)()||Yn(o[a.index]);{const c=jm(o,a);return null!==c?Array.isArray(c)?c[0]:Um(Qc(o[16]),c):Um(o,a.next)}}return null}function jm(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Sv(o,a){const u=10+o+1;if(u<a.length){const c=a[u],f=c[1].firstChild;if(null!==f)return Um(c,f)}return a[7]}function Hm(o,a,u,c,f,m,b){for(;null!=u;){const C=c[u.index],I=u.type;if(b&&0===a&&(C&&ut(Yn(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)Hm(o,a,u.child,c,f,m,!1),Lh(a,o,f,C,m);else if(32&I){const x=yv(u,c);let O;for(;O=x();)Lh(a,o,f,O,m);Lh(a,o,f,C,m)}else 16&I?Av(o,a,c,u,f,m):Lh(a,o,f,C,m);u=b?u.projectionNext:u.next}}function vp(o,a,u,c,f,m){Hm(u,c,o.firstChild,a,f,m,!1)}function Av(o,a,u,c,f,m){const b=u[16],I=b[6].projection[c.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)Lh(a,o,f,I[x],m);else Hm(o,a,I,b[3],f,m,!0)}function bo(o,a,u){Vn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function js(o,a,u){Vn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function Jc(o,a,u){let c=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===c||o.charCodeAt(f+m)<=32)return f}u=f+1}}const $m="ng-template";function xv(o,a,u){let c=0;for(;c<o.length;){let f=o[c++];if(u&&"class"===f){if(f=o[c],-1!==Jc(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<o.length&&"string"==typeof(f=o[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function UE(o){return 4===o.type&&o.value!==$m}function di(o,a,u){return a===(4!==o.type||u?o.value:$m)}function VO(o,a,u){let c=4;const f=o.attrs||[],m=function Et(o){for(let a=0;a<o.length;a++)if(In(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!b)if(4&c){if(c=2|1&c,""!==I&&!di(o,I,u)||""===I&&1===a.length){if(Hs(c))return!1;b=!0}}else{const x=8&c?I:a[++C];if(8&c&&null!==o.attrs){if(!xv(o.attrs,x,u)){if(Hs(c))return!1;b=!0}continue}const U=we(8&c?"class":I,f,UE(o),u);if(-1===U){if(Hs(c))return!1;b=!0;continue}if(""!==x){let Q;Q=U>m?"":f[U+1].toLowerCase();const te=8&c?Q:null;if(te&&-1!==Jc(te,x,0)||2&c&&x!==Q){if(Hs(c))return!1;b=!0}}}}else{if(!b&&!Hs(c)&&!Hs(I))return!1;if(b&&Hs(I))continue;b=!1,c=I|1&c}}return Hs(c)||b}function Hs(o){return 0==(1&o)}function we(o,a,u,c){if(null===a)return-1;let f=0;if(c||!u){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function Mv(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const c=o[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,o)}function jE(o,a,u=!1){for(let c=0;c<a.length;c++)if(VO(o,a[c],u))return!0;return!1}function Gt(o,a){e:for(let u=0;u<a.length;u++){const c=a[u];if(o.length===c.length){for(let f=0;f<o.length;f++)if(o[f]!==c[f])continue e;return!0}}return!1}function bp(o,a){return o?":not("+a.trim()+")":a}function Gm(o){let a=o[0],u=1,c=2,f="",m=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&c){const C=o[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?f+="."+b:4&c&&(f+=" "+b);else""!==f&&!Hs(b)&&(a+=bp(m,f),f=""),c=b,m=m||!Hs(c);u++}return""!==f&&(a+=bp(m,f)),a}const Ht={};function HE(o){$E(Jt(),Me(),Vr()+o,Oo())}function $E(o,a,u,c){if(!c)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&pa(a,m,u)}else{const m=o.preOrderHooks;null!==m&&ga(a,m,0,u)}Br(u)}function hi(o,a){return o<<17|a<<2}function bs(o){return o>>17&32767}function Rv(o){return 2|o}function ka(o){return(131068&o)>>2}function Ep(o,a){return-131069&o|a<<2}function bi(o){return 1|o}function Jm(o,a){const u=o.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const f=u[c],m=u[c+1];if(-1!==m){const b=o.data[m];Po(f),b.contentQueries(2,a[m],m)}}}function td(o,a,u,c,f,m,b,C,I,x){const O=a.blueprint.slice();return O[0]=f,O[2]=140|c,fs(O),O[3]=O[15]=o,O[8]=u,O[10]=b||o&&o[10],O[11]=C||o&&o[11],O[12]=I||o&&o[12]||null,O[9]=x||o&&o[9]||null,O[6]=m,O[16]=2==a.type?o[16]:O,O}function Iu(o,a,u,c,f){let m=o.data[a];if(null===m)m=function Ap(o,a,u,c,f){const m=ca(),b=co(),I=o.data[a]=function t_(o,a,u,c,f,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,a,c,f);return null===o.firstChild&&(o.firstChild=I),null!==m&&(b?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(o,a,u,c,f),function Jl(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=c,m.attrs=f;const b=function ks(){const o=At.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return oi(m,!0),m}function Er(o,a,u,c){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(c),o.blueprint.push(c),o.data.push(null);return f}function jr(o,a,u){tu(a);try{const c=o.viewQuery;null!==c&&u_(1,c,u);const f=o.template;null!==f&&eC(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Jm(o,a),o.staticViewQueries&&u_(2,o.viewQuery,u);const m=o.components;null!==m&&function eA(o,a){for(let u=0;u<a.length;u++)pC(o,a[u])}(a,m)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{a[2]&=-5,fa()}}function Al(o,a,u,c){const f=a[2];if(256==(256&f))return;tu(a);const m=Oo();try{fs(a),function _c(o){return At.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&eC(o,a,u,2,c);const b=3==(3&f);if(!m)if(b){const x=o.preOrderCheckHooks;null!==x&&pa(a,x,null)}else{const x=o.preOrderHooks;null!==x&&ga(a,x,0,null),fh(a,0)}if(function qv(o){for(let a=vv(o);null!==a;a=yp(a)){if(!a[2])continue;const u=a[9];for(let c=0;c<u.length;c++){const f=u[c],m=f[3];0==(1024&f[2])&&rl(m,1),f[2]|=1024}}}(a),function zv(o){for(let a=vv(o);null!==a;a=yp(a))for(let u=10;u<a.length;u++){const c=a[u],f=c[1];nl(c)&&Al(f,c,f.template,c[8])}}(a),null!==o.contentQueries&&Jm(o,a),!m)if(b){const x=o.contentCheckHooks;null!==x&&pa(a,x)}else{const x=o.contentHooks;null!==x&&ga(a,x,1),fh(a,1)}!function XE(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const f=u[c];if(f<0)Br(~f);else{const m=f,b=u[++c],C=u[++c];yc(b,m),C(2,a[m])}}}finally{Br(-1)}}(o,a);const C=o.components;null!==C&&function JE(o,a){for(let u=0;u<a.length;u++)o_(o,a[u])}(a,C);const I=o.viewQuery;if(null!==I&&u_(2,I,c),!m)if(b){const x=o.viewCheckHooks;null!==x&&pa(a,x)}else{const x=o.viewHooks;null!==x&&ga(a,x,2),fh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,rl(a[3],-1))}finally{fa()}}function Bv(o,a,u,c){const f=a[10],m=!Oo(),b=Or(a);try{m&&!b&&f.begin&&f.begin(),b&&jr(o,a,c),Al(o,a,u,c)}finally{m&&!b&&f.end&&f.end()}}function eC(o,a,u,c,f){const m=Vr(),b=2&c;try{Br(-1),b&&a.length>20&&$E(o,a,20,Oo()),u(c,f)}finally{Br(m)}}function e_(o,a,u){!il()||(function nd(o,a,u,c){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||fl(u,a),ut(c,a);const b=u.initialInputs;for(let C=f;C<m;C++){const I=o.data[C],x=Qi(I);x&&r_(a,u,I);const O=ai(a,o,C,u);ut(O,a),null!==b&&hC(0,C-f,O,I,0,b),x&&(Si(u.index,a)[8]=O)}}(o,a,u,Qn(u,a)),128==(128&u.flags)&&function uC(o,a,u){const c=u.directiveStart,f=u.directiveEnd,b=u.index,C=function ha(){return At.lFrame.currentDirectiveIndex}();try{Br(b);for(let I=c;I<f;I++){const x=o.data[I],O=a[I];al(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&kp(x,O)}}finally{Br(-1),al(C)}}(o,a,u))}function Uv(o,a,u=Qn){const c=a.localNames;if(null!==c){let f=a.index+1;for(let m=0;m<c.length;m+=2){const b=c[m+1],C=-1===b?u(a,o):o[b];o[f++]=C}}}function nC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=xp(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function xp(o,a,u,c,f,m,b,C,I,x){const O=20+c,U=O+f,Q=function jv(o,a){const u=[];for(let c=0;c<a;c++)u.push(c<o?null:Ht);return u}(O,U),te="function"==typeof x?x():x;return Q[1]={type:o,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function sC(o,a,u,c){const f=Du(a);null===u?f.push(c):(f.push(u),o.firstCreatePass&&c_(o).push(c,f.length-1))}function n_(o,a,u){for(let c in o)if(o.hasOwnProperty(c)){const f=o[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(a,f):u[c]=[a,f]}return u}function $s(o,a,u,c,f,m,b,C){const I=Qn(a,u);let O,x=a.inputs;!C&&null!=x&&(O=x[c])?(Yv(o,u,O,c,f),eh(a)&&function Mp(o,a){const u=Si(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(c=function oC(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),f=null!=b?b(f,a.value||"",c):f,Vn(m)?m.setProperty(I,c,f):Ps(c)||(I.setProperty?I.setProperty(c,f):I[c]=f))}function Tu(o,a,u,c){let f=!1;if(il()){const m=function cC(o,a,u){const c=o.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const b=c[m];jE(u,b.selectors,!1)&&(f||(f=[]),fo(fl(u,a),o,b.type),Qi(b)?(jh(o,u),f.unshift(b)):f.push(b))}return f}(o,a,u),b=null===c?null:{"":-1};if(null!==m){f=!0,Gv(u,o.data.length,m.length);for(let O=0;O<m.length;O++){const U=m[O];U.providersResolver&&U.providersResolver(U)}let C=!1,I=!1,x=Er(o,a,m.length,null);for(let O=0;O<m.length;O++){const U=m[O];u.mergedAttrs=Xe(u.mergedAttrs,U.hostAttrs),Hh(o,u,a,x,U),ss(x,U,b),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Q=U.type.prototype;!C&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!I&&(Q.ngOnChanges||Q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),I=!0),x++}!function $v(o,a){const c=a.directiveEnd,f=o.data,m=a.attrs,b=[];let C=null,I=null;for(let x=a.directiveStart;x<c;x++){const O=f[x],U=O.inputs,Q=null===m||UE(a)?null:fC(U,m);b.push(Q),C=n_(U,x,C),I=n_(O.outputs,x,I)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=I}(o,u)}b&&function dC(o,a,u){if(a){const c=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ve(-301,`Export of name '${a[f+1]}' not found!`);c.push(a[f],m)}}}(u,c,b)}return u.mergedAttrs=Xe(u.mergedAttrs,u.attrs),f}function lC(o,a,u,c,f,m){const b=m.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const I=~a.index;(function iA(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,f,b)}}function kp(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function jh(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function ss(o,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=o;Qi(a)&&(u[""]=o)}}function Gv(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function Hh(o,a,u,c,f){o.data[c]=f;const m=f.factory||(f.factory=As(f.type)),b=new ur(m,Qi(f),null);o.blueprint[c]=b,u[c]=b,lC(o,a,0,c,Er(o,u,f.hostVars,Ht),f)}function r_(o,a,u){const c=Qn(a,o),f=nC(u),m=o[10],b=$h(o,td(o,f,null,u.onPush?64:16,c,a,m,m.createRenderer(c,u),null,null));o[a.index]=b}function Ho(o,a,u,c,f,m){const b=Qn(o,a);!function Op(o,a,u,c,f,m,b){if(null==m)Vn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==b?_e(m):b(m,c||"",f);Vn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],b,m,o.value,u,c,f)}function hC(o,a,u,c,f,m){const b=m[a];if(null!==b){const C=c.setInput;for(let I=0;I<b.length;){const x=b[I++],O=b[I++],U=b[I++];null!==C?c.setInput(u,U,x,O):u[O]=U}}}function fC(o,a){let u=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[c+1])),c+=2}else c+=2;else c+=4}return u}function s_(o,a,u,c){return new Array(o,!0,!1,a,null,0,c,u,null,null)}function o_(o,a){const u=Si(a,o);if(nl(u)){const c=u[1];80&u[2]?Al(c,u,c.template,u[8]):u[5]>0&&rd(u)}}function rd(o){for(let c=vv(o);null!==c;c=yp(c))for(let f=10;f<c.length;f++){const m=c[f];if(1024&m[2]){const b=m[1];Al(b,m,b.template,m[8])}else m[5]>0&&rd(m)}const u=o[1].components;if(null!==u)for(let c=0;c<u.length;c++){const f=Si(u[c],o);nl(f)&&f[5]>0&&rd(f)}}function pC(o,a){const u=Si(a,o),c=u[1];(function sA(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(c,u),jr(c,u,u[8])}function $h(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Gh(o){for(;o;){o[2]|=64;const a=Qc(o);if(th(o)&&!a)return o;o=a}return null}function l_(o,a,u){const c=a[10];c.begin&&c.begin();try{Al(o,a,o.template,u)}catch(f){throw mC(a,f),f}finally{c.end&&c.end()}}function Zv(o){!function a_(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],c=Tn(u),f=c[1];Bv(f,c,f.template,u)}}(o[8])}function u_(o,a,u){Po(0),a(o,u)}const Np=(()=>Promise.resolve(null))();function Du(o){return o[7]||(o[7]=[])}function c_(o){return o.cleanup||(o.cleanup=[])}function mC(o,a){const u=o[9],c=u?u.get(_p,null):null;c&&c.handleError(a)}function Yv(o,a,u,c,f){for(let m=0;m<u.length;){const b=u[m++],C=u[m++],I=a[b],x=o.data[b];null!==x.setInput?x.setInput(I,f,c,C):I[C]=f}}function Oa(o,a,u){const c=Li(a,o);!function ME(o,a,u){Vn(o)?o.setValue(a,u):a.textContent=u}(o[11],c,u)}function d_(o,a,u){let c=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?m=C:1==m?f=me(f,C):2==m&&(c=me(c,C+": "+a[++b]+";"))}u?o.styles=c:o.stylesWithoutHost=c,u?o.classes=f:o.classesWithoutHost=f}const zh=new bn("INJECTOR",-1);class Xv{get(a,u=er){if(u===er){const c=new Error(`NullInjectorError: No provider for ${de(a)}!`);throw c.name="NullInjectorError",c}return u}}const Xn=new bn("Set Injector scope."),Su={},Fp={};let sd;function _C(){return void 0===sd&&(sd=new Xv),sd}function Jv(o,a=null,u=null,c){const f=yC(o,a,u,c);return f._resolveInjectorDefTypes(),f}function yC(o,a=null,u=null,c){return new aA(o,u,a||_C(),c)}class aA{constructor(a,u,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&ms(u,C=>this.processProvider(C,a,u)),ms([a],C=>this.processInjectorType(C,[],m)),this.records.set(zh,od(void 0,this));const b=this.records.get(Xn);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:de(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=er,c=_t.Default){this.assertNotDestroyed();const f=fu(this),m=yn(void 0);try{if(!(c&_t.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=function wC(o){return"function"==typeof o||"object"==typeof o&&o instanceof bn}(a)&&zn(a);C=I&&this.injectableDefInScope(I)?od(eb(a),Su):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(c&_t.Self?_C():this.parent).get(a,u=c&_t.Optional&&u===er?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Ia]=b[Ia]||[]).unshift(de(a)),f)throw b;return function ee(o,a,u,c){const f=o[Ia];throw a[ts]&&f.unshift(a[ts]),o.message=function le(o,a,u,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=de(a);if(Array.isArray(a))f=a.map(de).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];m.push(b+":"+("string"==typeof C?JSON.stringify(C):de(C)))}f=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${f}]: ${o.replace(_s,"\n  ")}`}("\n"+o.message,f,u,c),o.ngTokenPath=f,o[Ia]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{yn(m),fu(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((c,f)=>a.push(de(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,"")}processInjectorType(a,u,c){if(!(a=oe(a)))return!1;let f=Ds(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,C=-1!==c.indexOf(b);if(void 0!==m&&(f=Ds(m)),null==f)return!1;if(null!=f.imports&&!C){let O;c.push(b);try{ms(f.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===O&&(O=[]),O.push(U))})}finally{}if(void 0!==O)for(let U=0;U<O.length;U++){const{ngModule:Q,providers:te}=O[U];ms(te,Ie=>this.processProvider(Ie,Q,te||vt))}}this.injectorDefTypes.add(b);const I=As(b)||(()=>new b);this.records.set(b,od(I,Su));const x=f.providers;if(null!=x&&!C){const O=a;ms(x,U=>this.processProvider(U,O,x))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,c){let f=Wh(a=oe(a))?a:oe(a&&a.provide);const m=function Lp(o,a,u){return tb(o)?od(void 0,o.useValue):od(Ml(o),Su)}(a);if(Wh(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=od(void 0,Su,!0),b.factory=()=>S(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===Su&&(u.value=Fp,u.value=u.factory()),"object"==typeof u.value&&u.value&&function cA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=oe(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function eb(o){const a=zn(o),u=null!==a?a.factory:As(o);if(null!==u)return u;if(o instanceof bn)throw new Ve(204,"");if(o instanceof Function)return function lA(o){const a=o.length;if(a>0)throw Ea(a,"?"),new Ve(204,"");const u=function Ln(o){const a=o&&(o[Zr]||o[Fe]);if(a){const u=function wn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ve(204,"")}function Ml(o,a,u){let c;if(Wh(o)){const f=oe(o);return As(f)||eb(f)}if(tb(o))c=()=>oe(o.useValue);else if(function qh(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...S(o.deps||[]));else if(function vC(o){return!(!o||!o.useExisting)}(o))c=()=>On(oe(o.useExisting));else{const f=oe(o&&(o.useClass||o.provide));if(!function bC(o){return!!o.deps}(o))return As(f)||eb(f);c=()=>new f(...S(o.deps))}return c}function od(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function tb(o){return null!==o&&"object"==typeof o&&ip in o}function Wh(o){return"function"==typeof o}let Gs=(()=>{class o{static create(u,c){var f;if(Array.isArray(u))return Jv({name:""},c,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return Jv({name:m},u.parent,u.providers,m)}}}return o.THROW_IF_NOT_FOUND=er,o.NULL=new Xv,o.\u0275prov=_n({token:o,providedIn:"any",factory:()=>On(zh)}),o.__NG_ELEMENT_ID__=-1,o})();function DC(o,a){cl(Tn(o)[1],Mn())}function ad(o){let a=function __(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const c=[o];for(;a;){let f;if(Qi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ve(903,"");f=a.\u0275dir}if(f){if(u){c.push(f);const b=o;b.inputs=jp(o.inputs),b.declaredInputs=jp(o.declaredInputs),b.outputs=jp(o.outputs);const C=f.hostBindings;C&&v_(o,C);const I=f.viewQuery,x=f.contentQueries;if(I&&y_(o,I),x&&AC(o,x),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),Qi(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const C=m[b];C&&C.ngInherit&&C(o),C===ad&&(u=!1)}}a=Object.getPrototypeOf(a)}!function SC(o){let a=0,u=null;for(let c=o.length-1;c>=0;c--){const f=o[c];f.hostVars=a+=f.hostVars,f.hostAttrs=Xe(f.hostAttrs,u=Xe(u,f.hostAttrs))}}(c)}function jp(o){return o===Cn?{}:o===vt?[]:o}function y_(o,a){const u=o.viewQuery;o.viewQuery=u?(c,f)=>{a(c,f),u(c,f)}:a}function AC(o,a){const u=o.contentQueries;o.contentQueries=u?(c,f,m)=>{a(c,f,m),u(c,f,m)}:a}function v_(o,a){const u=o.hostBindings;o.hostBindings=u?(c,f)=>{a(c,f),u(c,f)}:a}let $p=null;function ld(){if(!$p){const o=It.Symbol;if(o&&o.iterator)$p=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const c=a[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&($p=c)}}}return $p}function ud(o){return!!w_(o)&&(Array.isArray(o)||!(o instanceof Map)&&ld()in o)}function w_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function $o(o,a,u){return o[a]=u}function ki(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Kh(o,a,u,c){const f=Me();return ki(f,Ji(),a)&&(Jt(),Ho(Hn(),f,o,a,u,c)),Kh}function cd(o,a,u,c){return ki(o,Ji(),u)?a+_e(u)+c:Ht}function Be(o,a,u,c,f,m,b,C){const I=Me(),x=Jt(),O=o+20,U=x.firstCreatePass?function yA(o,a,u,c,f,m,b,C,I){const x=a.consts,O=Iu(a,o,4,b||null,Xi(x,C));Tu(a,u,O,Xi(x,I)),cl(a,O);const U=O.tViews=xp(2,O,c,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,O),U.queries=a.queries.embeddedTView(O)),O}(O,x,I,a,u,c,f,m,b):x.data[O];oi(U,!1);const Q=I[11].createComment("");Bm(x,I,Q,U),ut(Q,I),$h(I,I[O]=s_(Q,I,Q,U)),qn(U)&&e_(x,I,U),null!=b&&Uv(I,U,C)}function Mu(o){return Rs(function mc(){return At.lFrame.contextLView}(),20+o)}function Io(o,a=_t.Default){const u=Me();return null===u?On(o,a):gl(Mn(),u,oe(o),a)}function D_(){throw new Error("invalid")}function ue(o,a,u){const c=Me();return ki(c,Ji(),a)&&$s(Jt(),Hn(),c,o,a,c[11],u,!1),ue}function nf(o,a,u,c,f){const b=f?"class":"style";Yv(o,u,a.inputs[b],b,c)}function fb(o,a,u,c){const f=Me(),m=Jt(),b=20+o,C=f[11],I=f[b]=Ev(C,a,function iu(){return At.lFrame.currentNamespace}()),x=m.firstCreatePass?function Wo(o,a,u,c,f,m,b){const C=a.consts,x=Iu(a,o,2,f,Xi(C,m));return Tu(a,u,x,Xi(C,b)),null!==x.attrs&&d_(x,x.attrs,!1),null!==x.mergedAttrs&&d_(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(b,m,f,0,a,u,c):m.data[b];oi(x,!0);const O=x.mergedAttrs;null!==O&&Ac(C,I,O);const U=x.classes;null!==U&&js(C,I,U);const Q=x.styles;null!==Q&&bo(C,I,Q),64!=(64&x.flags)&&Bm(m,f,I,x),0===function si(){return At.lFrame.elementDepthCount}()&&ut(I,f),function ua(){At.lFrame.elementDepthCount++}(),qn(x)&&(e_(m,f,x),function tC(o,a,u){if(Jd(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}(m,x,f)),null!==c&&Uv(f,x)}function pd(){let o=Mn();co()?ol():(o=o.parent,oi(o,!1));const a=o;!function Yl(){At.lFrame.elementDepthCount--}();const u=Jt();u.firstCreatePass&&(cl(u,o),Jd(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function ou(o){return 0!=(16&o.flags)}(a)&&nf(u,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Sc(o){return 0!=(32&o.flags)}(a)&&nf(u,a,Me(),a.stylesWithoutHost,!1)}function kl(o,a,u,c){fb(o,a,u,c),pd()}function LC(){return Me()}function Hi(o){return!!o&&"function"==typeof o.then}function gb(o){return!!o&&"function"==typeof o.subscribe}const Ru=gb;function A_(o,a,u,c){const f=Me(),m=Jt(),b=Mn();return function Ei(o,a,u,c,f,m,b,C){const I=qn(c),O=o.firstCreatePass&&c_(o),U=a[8],Q=Du(a);let te=!0;if(3&c.type||C){const Ne=Qn(c,a),gt=C?C(Ne):Ne,Ae=Q.length,it=C?rn=>C(Yn(rn[c.index])):c.index;if(Vn(u)){let rn=null;if(!C&&I&&(rn=function x_(o,a,u,c){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===u&&f[m+1]===c){const C=a[7],I=f[m+2];return C.length>I?C[I]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,c.index)),null!==rn)(rn.__ngLastListenerFn__||rn).__ngNextListenerFn__=m,rn.__ngLastListenerFn__=m,te=!1;else{m=M_(c,a,U,m,!1);const Nn=u.listen(gt,f,m);Q.push(m,Nn),O&&O.push(f,it,Ae,Ae+1)}}else m=M_(c,a,U,m,!0),gt.addEventListener(f,m,b),Q.push(m),O&&O.push(f,it,Ae,b)}else m=M_(c,a,U,m,!1);const Ie=c.outputs;let $e;if(te&&null!==Ie&&($e=Ie[f])){const Ne=$e.length;if(Ne)for(let gt=0;gt<Ne;gt+=2){const Ys=a[$e[gt]][$e[gt+1]].subscribe(m),Xu=Q.length;Q.push(m,Ys),O&&O.push(f,c.index,Xu,-(Xu+1))}}}(m,f,f[11],b,o,a,!!u,c),A_}function jn(o,a,u,c){try{return!1!==u(c)}catch(f){return mC(o,f),!1}}function M_(o,a,u,c,f){return function m(b){if(b===Function)return c;const C=2&o.flags?Si(o.index,a):a;0==(32&a[2])&&Gh(C);let I=jn(a,0,c,b),x=m.__ngNextListenerFn__;for(;x;)I=jn(a,0,x,b)&&I,x=x.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function md(o=1){return function gm(o){return(At.lFrame.contextLView=function hh(o,a){for(;o>0;)a=a[15],o--;return a}(o,At.lFrame.contextLView))[8]}(o)}function qs(o,a){let u=null;const c=function Tl(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===c?jE(o,m,!0):Gt(c,m))return f}else u=f}return u}function VC(o){const a=Me()[16][6];if(!a.projection){const c=a.projection=Ea(o?o.length:1,null),f=c.slice();let m=a.child;for(;null!==m;){const b=o?qs(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:c[b]=m,f[b]=m),m=m.next}}}function Jr(o,a=0,u){const c=Me(),f=Jt(),m=Iu(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),ol(),64!=(64&m.flags)&&function LO(o,a,u){Av(a[11],0,a,u,Tv(o,u,a),NE(u.parent||a[6],u,a))}(f,c,m)}function mb(o,a,u){return Na(o,"",a,"",u),mb}function Na(o,a,u,c,f){const m=Me(),b=cd(m,a,u,c);return b!==Ht&&$s(Jt(),Hn(),m,o,b,m[11],f,!1),Na}function Zp(o,a,u,c,f){const m=o[u+1],b=null===a;let C=c?bs(m):ka(m),I=!1;for(;0!==C&&(!1===I||b);){const O=o[C+1];_d(o[C],a)&&(I=!0,o[C+1]=c?bi(O):Rv(O)),C=c?bs(O):ka(O)}I&&(o[u+1]=c?Rv(m):bi(m))}function _d(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ci(o,a)>=0}function P_(o,a){return function Ko(o,a,u,c){const f=Me(),m=Jt(),b=function Os(o){const a=At.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}(2);m.firstUpdatePass&&function qC(o,a,u,c){const f=o.data;if(null===f[u+1]){const m=f[Vr()],b=function Fu(o,a){return a>=o.expandoStartIndex}(o,u);(function YC(o,a){return 0!=(o.flags&(a?16:32))})(m,c)&&null===a&&!b&&(a=!1),a=function Qp(o,a,u,c){const f=function ho(o){const a=At.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(u=$r(u=L_(null,o,a,u,c),a.attrs,c),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(u=L_(f,o,a,u,c),null===m){let I=function N_(o,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==ka(c))return o[bs(c)]}(o,a,c);void 0!==I&&Array.isArray(I)&&(I=L_(null,o,a,I[1],c),I=$r(I,a.attrs,c),function F_(o,a,u,c){o[bs(u?a.classBindings:a.styleBindings)]=c}(o,a,c,I))}else m=function WC(o,a,u){let c;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)c=$r(c,o[m].hostAttrs,u);return $r(c,a.attrs,u)}(o,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,c),function UC(o,a,u,c,f,m){let b=m?a.classBindings:a.styleBindings,C=bs(b),I=ka(b);o[c]=u;let O,x=!1;if(Array.isArray(u)){const U=u;O=U[1],(null===O||ci(U,O)>0)&&(x=!0)}else O=u;if(f)if(0!==I){const Q=bs(o[C+1]);o[c+1]=hi(Q,C),0!==Q&&(o[Q+1]=Ep(o[Q+1],c)),o[C+1]=function Cu(o,a){return 131071&o|a<<17}(o[C+1],c)}else o[c+1]=hi(C,0),0!==C&&(o[C+1]=Ep(o[C+1],c)),C=c;else o[c+1]=hi(I,0),0===C?C=c:o[I+1]=Ep(o[I+1],c),I=c;x&&(o[c+1]=Rv(o[c+1])),Zp(o,O,c,!0),Zp(o,O,c,!1),function Ou(o,a,u,c,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&ci(m,a)>=0&&(u[c+1]=bi(u[c+1]))}(a,O,o,c,m),b=hi(C,I),m?a.classBindings=b:a.styleBindings=b}(f,m,a,u,b,c)}}(m,o,b,c),a!==Ht&&ki(f,b,a)&&function bb(o,a,u,c,f,m,b,C){if(!(3&a.type))return;const I=o.data,x=I[C+1];V_(function kv(o){return 1==(1&o)}(x)?KC(I,a,u,f,ka(x),b):void 0)||(V_(m)||function vi(o){return 2==(2&o)}(x)&&(m=KC(I,null,u,f,C,b)),function is(o,a,u,c,f){const m=Vn(o);if(a)f?m?o.addClass(u,c):u.classList.add(c):m?o.removeClass(u,c):u.classList.remove(c);else{let b=-1===c.indexOf("-")?void 0:Ra.DashCase;if(null==f)m?o.removeStyle(u,c,b):u.style.removeProperty(c);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=Ra.Important),m?o.setStyle(u,c,f,b):u.style.setProperty(c,f,C?"important":"")}}}(c,b,Li(Vr(),u),f,m))}(m,m.data[Vr()],f,f[11],o,f[b+1]=function RA(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=de(Us(o)))),o}(a,u),c,b)}(o,a,null,!0),P_}function L_(o,a,u,c,f){let m=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(m=a[C],c=$r(c,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),c}function $r(o,a,u){const c=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===c&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),xt(o,b,!!u||a[++m]))}return void 0===o?null:o}function KC(o,a,u,c,f,m){const b=null===a;let C;for(;f>0;){const I=o[f],x=Array.isArray(I),O=x?I[1]:I,U=null===O;let Q=u[f+1];Q===Ht&&(Q=U?vt:void 0);let te=U?Pc(Q,c):O===c?Q:void 0;if(x&&!V_(te)&&(te=Pc(I,c)),V_(te)&&(C=te,b))return C;const Ie=o[f+1];f=b?bs(Ie):ka(Ie)}if(null!==a){let I=m?a.residualClasses:a.residualStyles;null!=I&&(C=Pc(I,c))}return C}function V_(o){return void 0!==o}function Pl(o,a=""){const u=Me(),c=Jt(),f=o+20,m=c.firstCreatePass?Iu(c,f,1,a,null):c.data[f],b=u[f]=function wv(o,a){return Vn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Bm(c,u,b,m),oi(m,!1)}function Lu(o){return B_("",o,""),Lu}function B_(o,a,u){const c=Me(),f=cd(c,o,a,u);return f!==Ht&&Oa(c,Vr(),f),B_}const Pn=void 0;var z_=["en",[["a","p"],["AM","PM"],Pn],[["AM","PM"],Pn,Pn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pn,"{1} 'at' {0}",Pn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function G_(o){const u=Math.floor(Math.abs(o)),c=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ed={};function Cd(o){const a=function oI(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Id(a);if(u)return u;const c=a.split("-")[0];if(u=Id(c),u)return u;if("en"===c)return z_;throw new Error(`Missing locale data for the locale "${o}".`)}function kb(o){return Cd(o)[Mt.PluralCase]}function Id(o){return o in Ed||(Ed[o]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[o]),Ed[o]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const df="en-US";let Nl=df;function X_(o,a,u,c,f){if(o=oe(o),Array.isArray(o))for(let m=0;m<o.length;m++)X_(o[m],a,u,c,f);else{const m=Jt(),b=Me();let C=Wh(o)?o:oe(o.provide),I=Ml(o);const x=Mn(),O=1048575&x.providerIndexes,U=x.directiveStart,Q=x.providerIndexes>>20;if(Wh(o)||!o.multi){const te=new ur(I,f,Io),Ie=ei(C,a,f?O:O+Q,U);-1===Ie?(fo(fl(x,b),m,C),jb(m,o,a.length),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(te),b.push(te)):(u[Ie]=te,b[Ie]=te)}else{const te=ei(C,a,O+Q,U),Ie=ei(C,a,O,O+Q),$e=te>=0&&u[te],Ne=Ie>=0&&u[Ie];if(f&&!Ne||!f&&!$e){fo(fl(x,b),m,C);const gt=function $u(o,a,u,c,f){const m=new ur(o,u,Io);return m.multi=[],m.index=a,m.componentProviders=0,J_(m,f,c&&!u),m}(f?$b:Hb,u.length,f,c,I);!f&&Ne&&(u[Ie].providerFactory=gt),jb(m,o,a.length,0),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(gt),b.push(gt)}else jb(m,o,te>-1?te:Ie,J_(u[f?Ie:te],I,!f&&c));!f&&c&&Ne&&u[Ie].componentProviders++}}}function jb(o,a,u,c){const f=Wh(a),m=function uA(o){return!!o.useClass}(a);if(f||m){const I=(m?oe(a.useClass):a).prototype.ngOnDestroy;if(I){const x=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=x.indexOf(u);-1===O?x.push(u,[c,I]):x[O+1].push(c,I)}else x.push(u,I)}}}function J_(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function ei(o,a,u,c){for(let f=u;f<c;f++)if(a[f]===o)return f;return-1}function Hb(o,a,u,c){return sg(this.multi,[])}function $b(o,a,u,c){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=ai(u,u[1],this.providerFactory.index,c);m=C.slice(0,b),sg(f,m);for(let I=b;I<C.length;I++)m.push(C[I])}else m=[],sg(f,m);return m}function sg(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Gb(o,a=[]){return u=>{u.providersResolver=(c,f)=>function MI(o,a,u){const c=Jt();if(c.firstCreatePass){const f=Qi(o);X_(u,c.data,c.blueprint,f,!0),X_(a,c.data,c.blueprint,f,!1)}}(c,f?f(o):o,a)}}class zb{}class Sd{resolveComponentFactory(a){throw function ey(o){const a=Error(`No component factory found for ${de(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Ll=(()=>{class o{}return o.NULL=new Sd,o})();function RI(){return zu(Mn(),Me())}function zu(o,a){return new Ad(Qn(o,a))}let Ad=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=RI,o})();function kI(o){return o instanceof Ad?o.nativeElement:o}class OI{}let PI=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function ty(){const o=Me(),u=Si(Mn().index,o);return function NI(o){return o[11]}(Ki(u)?u:o)}(),o})(),og=(()=>{class o{}return o.\u0275prov=_n({token:o,providedIn:"root",factory:()=>null}),o})();class qu{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const FI=new qu("13.1.3"),ny={};function ry(o,a,u,c,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&c.push(Yn(m)),Yi(m))for(let C=10;C<m.length;C++){const I=m[C],x=I[1].firstChild;null!==x&&ry(I[1],I,x,c)}const b=u.type;if(8&b)ry(o,a,u.child,c);else if(32&b){const C=yv(u,a);let I;for(;I=C();)c.push(I)}else if(16&b){const C=jm(a,u);if(Array.isArray(C))c.push(...C);else{const I=Qc(a[16]);ry(I[1],I,C,c,!0)}}u=f?u.projectionNext:u.next}return c}class ag{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return ry(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Yi(a)){const u=a[8],c=u?u.indexOf(this):-1;c>-1&&(Iv(a,c),wa(u,c))}this._attachedToViewContainer=!1}kE(this._lView[1],this._lView)}onDestroy(a){sC(this._lView[1],this._lView,null,a)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){l_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function oA(o,a,u){da(!0);try{l_(o,a,u)}finally{da(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zS(o,a){vp(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=a}}class lx extends ag{constructor(a){super(a),this._view=a}detectChanges(){Zv(this._view)}checkNoChanges(){!function Pp(o){da(!0);try{Zv(o)}finally{da(!1)}}(this._view)}get context(){return null}}class yf extends Ll{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=at(a);return new qb(u,this.ngModule)}}function Wu(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}const LI=new bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>DE});class qb extends zb{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function wp(o){return o.map(Gm).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Wu(this.componentDef.inputs)}get outputs(){return Wu(this.componentDef.outputs)}create(a,u,c,f){const m=(f=f||this.ngModule)?function ux(o,a){return{get:(u,c,f)=>{const m=o.get(u,ny,f);return m!==ny||c===ny?m:a.get(u,c,f)}}}(a,f.injector):a,b=m.get(OI,yi),C=m.get(og,null),I=b.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",O=c?function Hv(o,a,u){if(Vn(o))return o.selectRootElement(a,u===Qt.ShadowDom);let c="string"==typeof a?o.querySelector(a):a;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Ev(b.createRenderer(null,this.componentDef),x,function xd(o){const a=o.toLowerCase();return"svg"===a?hc:"math"===a?"http://www.w3.org/1998/MathML/":null}(x)),U=this.componentDef.onPush?576:528,Q=function Pa(o,a){return{components:[],scheduler:o||DE,clean:Np,playerHandler:a||null,flags:0}}(),te=xp(0,null,null,1,0,null,null,null,null,null),Ie=td(null,te,Q,U,null,null,b,I,C,m);let $e,Ne;tu(Ie);try{const gt=function Up(o,a,u,c,f,m){const b=u[1];u[20]=o;const I=Iu(b,20,2,"#host",null),x=I.mergedAttrs=a.hostAttrs;null!==x&&(d_(I,x,!0),null!==o&&(Ac(f,o,x),null!==I.classes&&js(f,o,I.classes),null!==I.styles&&bo(f,o,I.styles)));const O=c.createRenderer(o,a),U=td(u,nC(a),null,a.onPush?64:16,u[20],I,c,O,m||null,null);return b.firstCreatePass&&(fo(fl(I,u),b,a.type),jh(b,I),Gv(I,u.length,1)),$h(u,U),u[20]=U}(O,this.componentDef,Ie,b,I);if(O)if(c)Ac(I,O,["ng-version",FI.full]);else{const{attrs:Ae,classes:it}=function ZS(o){const a=[],u=[];let c=1,f=2;for(;c<o.length;){let m=o[c];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++c]):8===f&&u.push(m);else{if(!Hs(f))break;f=m}c++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ae&&Ac(I,O,Ae),it&&it.length>0&&js(I,O,it.join(" "))}if(Ne=Ms(te,20),void 0!==u){const Ae=Ne.projection=[];for(let it=0;it<this.ngContentSelectors.length;it++){const rn=u[it];Ae.push(null!=rn?Array.from(rn):null)}}$e=function sb(o,a,u,c,f){const m=u[1],b=function rA(o,a,u){const c=Mn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Hh(o,c,a,Er(o,a,1,null),u));const f=ai(a,o,c.directiveStart,c);ut(f,a);const m=Qn(c,a);return m&&ut(m,a),f}(m,u,a);if(c.components.push(b),o[8]=b,f&&f.forEach(I=>I(b,a)),a.contentQueries){const I=Mn();a.contentQueries(1,b,I.directiveStart)}const C=Mn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Br(C.index),lC(u[1],C,0,C.directiveStart,C.directiveEnd,a),kp(a,b)),b}(gt,this.componentDef,Ie,Q,[DC]),jr(te,Ie,null)}finally{fa()}return new cx(this.componentType,$e,zu(Ne,Ie),Ie,Ne)}}class cx extends class ox{}{constructor(a,u,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new lx(f),this.componentType=a}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Ba{}class lg{}const Ua=new Map;class Qb extends Ba{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yf(this);const c=ft(a);this._bootstrapComponents=Il(c.bootstrap),this._r3Injector=yC(a,u,[{provide:Ba,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],de(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=Gs.THROW_IF_NOT_FOUND,c=_t.Default){return a===Gs||a===Ba||a===zh?this:this._r3Injector.get(a,u,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class ja extends lg{constructor(a){super(),this.moduleType=a,null!==ft(a)&&function Es(o){const a=new Set;!function u(c){const f=ft(c,!0),m=f.id;null!==m&&(function Kb(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${de(a)} vs ${de(a.name)}`)}(m,Ua.get(m),c),Ua.set(m,c));const b=Il(f.imports);for(const C of b)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new Qb(this.moduleType,a)}}function Md(o,a,u){const c=Lr()+o,f=Me();return f[c]===Ht?$o(f,c,u?a.call(u):a()):function Go(o,a){return o[a]}(f,c)}function HI(o,a,u,c,f,m){const b=a+u;return ki(o,b,f)?$o(o,b+1,m?c.call(m,f):c(f)):function cg(o,a){const u=o[a];return u===Ht?void 0:u}(o,b+1)}function GI(o,a){const u=Jt();let c;const f=o+20;u.firstCreatePass?(c=function zI(o,a){if(a)for(let u=a.length-1;u>=0;u--){const c=a[u];if(o===c.name)return c}}(a,u.pipeRegistry),u.data[f]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,c.onDestroy)):c=u.data[f];const m=c.factory||(c.factory=As(c.type)),b=yn(Io);try{const C=hl(!1),I=m();return hl(C),function Hr(o,a,u,c){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=c}(u,Me(),f,I),I}finally{yn(b)}}function Ku(o,a,u){const c=o+20,f=Me(),m=Rs(f,c);return function bf(o,a){return o[1].data[a].pure}(f,c)?HI(f,Lr(),a,m.transform,u,m):m.transform(u)}function e0(o){return a=>{setTimeout(o,void 0,a)}}const Do=class _x extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){var f,m,b;let C=a,I=u||(()=>null),x=c;if(a&&"object"==typeof a){const U=a;C=null===(f=U.next)||void 0===f?void 0:f.bind(U),I=null===(m=U.error)||void 0===m?void 0:m.bind(U),x=null===(b=U.complete)||void 0===b?void 0:b.bind(U)}this.__isAsync&&(I=e0(I),C&&(C=e0(C)),x&&(x=e0(x)));const O=super.subscribe({next:C,error:I,complete:x});return a instanceof G.w0&&a.add(O),O}};function Ii(){return this._results[ld()]()}class iy{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ld(),c=iy.prototype;c[u]||(c[u]=Ii)}get changes(){return this._changes||(this._changes=new Do)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const f=xi(a);(this._changesDetected=!function kc(o,a,u){if(o.length!==a.length)return!1;for(let c=0;c<o.length;c++){let f=o[c],m=a[c];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(c._results,f,u))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let fg=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZI,o})();const yx=fg,vx=class extends yx{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(a){const u=this._declarationTContainer.tViews,c=td(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),jr(u,c,a),new ag(c)}};function ZI(){return sy(Mn(),Me())}function sy(o,a){return 4&o.type?new vx(a,o,zu(o,a)):null}let kd=(()=>{class o{}return o.__NG_ELEMENT_ID__=bx,o})();function bx(){return pg(Mn(),Me())}const KI=kd,oy=class extends KI{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return zu(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){const a=Un(this._hostTNode,this._hostLView);if(Bi(a)){const u=dl(a,this._hostLView),c=Wn(a);return new Rn(u[1].data[c+8],u)}return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=ay(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,c){const f=a.createEmbeddedView(u||{});return this.insert(f,c),f}createComponent(a,u,c,f,m){const b=a&&!function ba(o){return"function"==typeof o}(a);let C;if(b)C=u;else{const U=u||{};C=U.index,c=U.injector,f=U.projectableNodes,m=U.ngModuleRef}const I=b?a:new qb(at(a)),x=c||this.parentInjector;if(!m&&null==I.ngModule&&x){const U=x.get(Ba,null);U&&(m=U)}const O=I.create(x,f,void 0,m);return this.insert(O.hostView,C),O}insert(a,u){const c=a._lView,f=c[1];if(function lo(o){return Yi(o[3])}(c)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const U=c[3],Q=new oy(U,U[6],U[3]);Q.detach(Q.indexOf(a))}}const m=this._adjustIndex(u),b=this._lContainer;!function wu(o,a,u,c){const f=10+c,m=u.length;c>0&&(u[f-1][4]=a),c<m-10?(a[4]=u[f],bh(u,10+c,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function Cv(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,c,b,m);const C=Sv(m,b),I=c[11],x=Lm(I,b[7]);return null!==x&&function rs(o,a,u,c,f,m){c[0]=f,c[6]=a,vp(o,c,u,1,f,m)}(f,b[6],I,c,x,C),a.attachToViewContainerRef(),bh(Od(b),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=ay(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=Iv(this._lContainer,u);c&&(wa(Od(this._lContainer),u),kE(c[1],c))}detach(a){const u=this._adjustIndex(a,-1),c=Iv(this._lContainer,u);return c&&null!=wa(Od(this._lContainer),u)?new ag(c):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function ay(o){return o[8]}function Od(o){return o[8]||(o[8]=[])}function pg(o,a){let u;const c=a[o.index];if(Yi(c))u=c;else{let f;if(8&o.type)f=Yn(c);else{const m=a[11];f=m.createComment("");const b=Qn(o,a);Vh(m,Lm(m,b),f,function PE(o,a){return Vn(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=u=s_(c,a,f,o),$h(a,u)}return new oy(u,o,a)}class r0{constructor(a){this.queryList=a,this.matches=null}clone(){return new r0(this.queryList)}setDirty(){this.queryList.setDirty()}}class ly{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<c;m++){const b=u.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new ly(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==dy(a,u).matches&&this.queries[u].setDirty()}}class s0{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class gg{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const f=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(a,f);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new gg(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class o0{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new o0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(a,u,YI(u,m)),this.matchTNodeWithReadOption(a,u,po(u,a,m,!1,!1))}else c===fg?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,po(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Ad||f===kd||f===fg&&4&u.type)this.addMatch(u.index,-2);else{const m=po(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function YI(o,a){const u=o.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function QI(o,a,u,c){return-1===u?function Ex(o,a){return 11&o.type?zu(o,a):4&o.type?sy(o,a):null}(a,o):-2===u?function Cx(o,a,u){return u===Ad?zu(a,o):u===fg?sy(a,o):u===kd?pg(a,o):void 0}(o,a,c):ai(o,o[1],u,a)}function Pd(o,a,u,c){const f=a[19].queries[c];if(null===f.matches){const m=o.data,b=u.matches,C=[];for(let I=0;I<b.length;I+=2){const x=b[I];C.push(x<0?null:QI(a,m[x],b[I+1],u.metadata.read))}f.matches=C}return f.matches}function Yu(o,a,u,c){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const b=Pd(o,a,f,u);for(let C=0;C<m.length;C+=2){const I=m[C];if(I>0)c.push(b[C/2]);else{const x=m[C+1],O=a[-I];for(let U=10;U<O.length;U++){const Q=O[U];Q[17]===Q[3]&&Yu(Q[1],Q,x,c)}if(null!==O[9]){const U=O[9];for(let Q=0;Q<U.length;Q++){const te=U[Q];Yu(te[1],te,x,c)}}}}}return c}function uy(o){const a=Me(),u=Jt(),c=vc();Po(c+1);const f=dy(u,c);if(o.dirty&&Or(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?Yu(u,a,c,[]):Pd(u,a,f,c);o.reset(m,kI),o.notifyOnChanges()}return!0}return!1}function mg(o,a,u){const c=Jt();c.firstCreatePass&&(cy(c,new s0(o,a,u),-1),2==(2&a)&&(c.staticViewQueries=!0)),JI(c,Me(),a)}function a0(o,a,u,c){const f=Jt();if(f.firstCreatePass){const m=Mn();cy(f,new s0(a,u,c),m.index),function Ix(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}JI(f,Me(),u)}function l0(){return function XI(o,a){return o[19].queries[a].queryList}(Me(),vc())}function JI(o,a,u){const c=new iy(4==(4&u));sC(o,a,c,c.destroy),null===a[19]&&(a[19]=new ly),a[19].queries.push(new r0(c))}function cy(o,a,u){null===o.queries&&(o.queries=new gg),o.queries.track(new o0(a,u))}function dy(o,a){return o.queries.getByIndex(a)}function Ef(...o){}const Eg=new bn("Application Initializer");let Cf=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Ef,this.reject=Ef,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Hi(m))u.push(m);else if(Ru(m)){const b=new Promise((C,I)=>{m.subscribe({complete:C,error:I})});u.push(b)}}Promise.all(u).then(()=>{c()}).catch(f=>{this.reject(f)}),0===u.length&&c(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(On(Eg,8))},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();const by=new bn("AppId"),C0={provide:by,useFactory:function Rx(){return`${wy()}${wy()}${wy()}`},deps:[]};function wy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ey=new bn("Platform Initializer"),Cy=new bn("Platform ID"),Iy=new bn("appBootstrapListener");let Vl=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();const If=new bn("LocaleId"),Vd=new bn("DefaultCurrencyCode");class Ox{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let I0=(()=>{class o{compileModuleSync(u){return new ja(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=Il(ft(u).declarations).reduce((b,C)=>{const I=at(C);return I&&b.push(new qb(I)),b},[]);return new Ox(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();const D0=(()=>Promise.resolve(0))();function Dg(o){"undefined"==typeof Zone?D0.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ws{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Do(!1),this.onMicrotaskEmpty=new Do(!1),this.onStable=new Do(!1),this.onError=new Do(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&u,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Px(){let o=It.requestAnimationFrame,a=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function fT(o){const a=()=>{!function Nx(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(It,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,A0(o),o.isCheckStableRunning=!0,Sg(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),A0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,f,m,b,C)=>{try{return x0(o),u.invokeTask(f,m,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),M0(o)}},onInvoke:(u,c,f,m,b,C,I)=>{try{return x0(o),u.invoke(f,m,b,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),M0(o)}},onHasTask:(u,c,f,m)=>{u.hasTask(f,m),c===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,A0(o),Sg(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ws.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ws.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,S0,Ef,Ef);try{return m.runTask(b,u,c)}finally{m.cancelTask(b)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const S0={};function Sg(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function A0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function x0(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function M0(o){o._nesting--,Sg(o)}class pT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Do,this.onMicrotaskEmpty=new Do,this.onStable=new Do,this.onError=new Do}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,f){return a.apply(u,c)}}let R0=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ws.assertNotInAngularZone(),Dg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(On(Ws))},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})(),gT=(()=>{class o{constructor(){this._applications=new Map,k0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return k0.findTestabilityInTree(this,u,c)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();class Fx{addToWindow(a){}findTestabilityInTree(a,u,c){return null}}function Lx(o){k0=o}let Zs,k0=new Fx;const Ty=new bn("AllowMultipleToken");class Bx{constructor(a,u){this.name=a,this.token=u}}function N0(o,a,u=[]){const c=`Platform: ${a}`,f=new bn(c);return(m=[])=>{let b=_T();if(!b||b.injector.get(Ty,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:Xn,useValue:"platform"});!function P0(o){if(Zs&&!Zs.destroyed&&!Zs.injector.get(Ty,!1))throw new Ve(400,"");Zs=o.get(Dy);const a=o.get(Ey,null);a&&a.forEach(u=>u())}(Gs.create({providers:C,name:c}))}return function F0(o){const a=_T();if(!a)throw new Ve(401,"");return a}()}}function _T(){return Zs&&!Zs.destroyed?Zs:null}let Dy=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function jx(o,a){let u;return u="noop"===o?new pT:("zone.js"===o?void 0:o)||new Ws({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Ws,useValue:C}];return C.run(()=>{const x=Gs.create({providers:I,parent:this.injector,name:u.moduleType.name}),O=u.create(x),U=O.injector.get(_p,null);if(!U)throw new Ve(402,"");return C.runOutsideAngular(()=>{const Q=C.onError.subscribe({next:te=>{U.handleError(te)}});O.onDestroy(()=>{V0(this._modules,O),Q.unsubscribe()})}),function L0(o,a,u){try{const c=u();return Hi(c)?c.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>o.handleError(c)),c}}(U,C,()=>{const Q=O.injector.get(Cf);return Q.runInitializers(),Q.donePromise.then(()=>(function LA(o){dt(o,"Expected localeId to be defined"),"string"==typeof o&&(Nl=o.toLowerCase().replace(/_/g,"-"))}(O.injector.get(If,df)||df),this._moduleDoBootstrap(O),O))})})}bootstrapModule(u,c=[]){const f=yT({},c);return function O0(o,a,u){const c=new ja(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const c=u.injector.get(Bd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(On(Gs))},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();function yT(o,a){return Array.isArray(a)?a.reduce(yT,o):Object.assign(Object.assign({},o),a)}let Bd=(()=>{class o{constructor(u,c,f,m,b){this._zone=u,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),I=new F.y(x=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Ws.assertNotInAngularZone(),Dg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{O.unsubscribe(),U.unsubscribe()}});this.isStable=(0,ie.T)(C,I.pipe((0,he.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ve(405,"");let f;f=u instanceof zb?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function Vx(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Ba),C=f.create(Gs.NULL,[],c||f.selector,m),I=C.location.nativeElement,x=C.injector.get(R0,null),O=x&&C.injector.get(gT);return x&&O&&O.registerApplication(I,x),C.onDestroy(()=>{this.detachView(C.hostView),V0(this.components,C),O&&O.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;V0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Iy,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(On(Ws),On(Gs),On(_p),On(Ll),On(Cf))},o.\u0275prov=_n({token:o,factory:o.\u0275fac}),o})();function V0(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let Ay=!0,Ud=!1;function vT(){return Ud=!0,Ay}function U0(){if(Ud)throw new Error("Cannot enable prod mode after platform setup.");Ay=!1}let j0=(()=>{class o{}return o.__NG_ELEMENT_ID__=Hx,o})();function Hx(o){return function H0(o,a,u){if(eh(o)&&!u){const c=Si(o.index,a);return new ag(c,c)}return 47&o.type?new ag(a[16],a):null}(Mn(),Me(),16==(16&o))}class Y0{constructor(){}supports(a){return ud(a)}create(a){return new Ry(a)}}const TT=(o,a)=>a;class Ry{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||TT}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,f=0,m=null;for(;u||c;){const b=!c||u&&u.currentIndex<X0(c,f,m)?u:c,C=X0(b,f,m),I=b.currentIndex;if(b===c)f--,c=c._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{m||(m=[]);const x=C-f,O=I-f;if(x!=O){for(let Q=0;Q<x;Q++){const te=Q<m.length?m[Q]:m[Q]=0,Ie=te+Q;O<=Ie&&Ie<x&&(m[Q]=te+1)}m[b.previousIndex]=O-x}}C!==I&&a(b,C,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!ud(a))throw new Ve(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],b=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,b)?(c&&(u=this._verifyReinsertion(u,m,b,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,C),c=!0),u=u._next}else f=0,function b_(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[ld()]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(c&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),c=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new hn(u,c),m,f),a}_verifyReinsertion(a,u,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Q0),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Q0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class hn{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Q0{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new DT,this.map.set(u,c)),c.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function X0(o,a,u){const c=o.previousIndex;if(null===c)return c;let f=0;return u&&c<u.length&&(f=u[c]),c+a+f}class Df{constructor(){}supports(a){return a instanceof Map||w_(a)}create(){return new ST}}class ST{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||w_(a)))throw new Ve(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const c=new nr(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class nr{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pi(){return new Ks([new Y0])}let Ks=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(null!=c){const f=c.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||Pi()),deps:[[o,new Rt,new qe]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(null!=c)return c;throw new Ve(901,"")}}return o.\u0275prov=_n({token:o,providedIn:"root",factory:Pi}),o})();function AT(){return new jd([new Df])}let jd=(()=>{class o{constructor(u){this.factories=u}static create(u,c){if(c){const f=c.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:c=>o.create(u,c||AT()),deps:[[o,new Rt,new qe]]}}find(u){const c=this.factories.find(m=>m.supports(u));if(c)return c;throw new Ve(901,"")}}return o.\u0275prov=_n({token:o,providedIn:"root",factory:AT}),o})();const xT=[new Df],MT=new Ks([new Y0]),ky=new jd(xT),hP=N0(null,"core",[{provide:Cy,useValue:"unknown"},{provide:Dy,deps:[Gs]},{provide:gT,deps:[]},{provide:Vl,deps:[]}]),Jx=[{provide:Bd,useClass:Bd,deps:[Ws,Gs,_p,Ll,Cf]},{provide:LI,deps:[Ws],useFactory:function RT(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(u){a.push(u)}}},{provide:Cf,useClass:Cf,deps:[[new qe,Eg]]},{provide:I0,useClass:I0,deps:[]},C0,{provide:Ks,useFactory:function Kx(){return MT},deps:[]},{provide:jd,useFactory:function Yx(){return ky},deps:[]},{provide:If,useFactory:function Qx(o){return o||function Xx(){return"undefined"!=typeof $localize&&$localize.locale||df}()},deps:[[new De(If),new qe,new Rt]]},{provide:Vd,useValue:"USD"}];let ew=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(On(Bd))},o.\u0275mod=$({type:o}),o.\u0275inj=ti({providers:Jx}),o})()},3942:(st,be,L)=>{L.d(be,{Z:()=>Ve});var h=L(2090),G=L(4859),F=L(9681),ie=L(1877);class he{constructor(_e,ve){this._delegate=_e,this.firebase=ve,(0,F._addComponent)(_e,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(_e,ve=F._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(_e);return!ze.isInitialized()&&"EXPLICIT"===(null===(Oe=ze.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:ve})}_removeServiceInstance(_e,ve=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ve)}_addComponent(_e){(0,F._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,F._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function me(){const He=function de(He){const _e={},ve={__esModule:!0,initializeApp:function Ue(Qe,Ce={}){const K=F.initializeApp(Qe,Ce);if((0,h.r3)(_e,K.name))return _e[K.name];const re=new He(K,ve);return _e[K.name]=re,re},app:ze,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function xe(Qe){const Ce=Qe.name,K=Ce.replace("-compat","");if(F._registerComponent(Qe)&&"PUBLIC"===Qe.type){const re=(pe=ze())=>{if("function"!=typeof pe[K])throw se.create("invalid-app-argument",{appName:Ce});return pe[K]()};void 0!==Qe.serviceProps&&(0,h.ZB)(re,Qe.serviceProps),ve[K]=re,He.prototype[K]=function(...pe){return this._getService.bind(this,Ce).apply(this,Qe.multipleInstances?pe:[])}}return"PUBLIC"===Qe.type?ve[K]:null},removeApp:function Oe(Qe){delete _e[Qe]},useAsService:function ct(Qe,Ce){return"serverAuth"===Ce?null:Ce},modularAPIs:F}};function ze(Qe){if(!(0,h.r3)(_e,Qe=Qe||F._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Qe});return _e[Qe]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ot(){return Object.keys(_e).map(Qe=>_e[Qe])}}),ze.App=He,ve}(he);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(ve){(0,h.ZB)(He,ve)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),He}(),Y=new ie.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=q;!function Se(He){(0,F.registerVersion)("@firebase/app-compat","0.1.39",He)}()},9681:(st,be,L)=>{L.r(be),L.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>dt,_addComponent:()=>gr,_addOrOverwriteComponent:()=>_n,_apps:()=>ir,_clearComponents:()=>Wr,_components:()=>tn,_getProvider:()=>ti,_registerComponent:()=>mr,_removeServiceInstance:()=>zn,deleteApp:()=>_t,getApp:()=>Fe,getApps:()=>_r,initializeApp:()=>mi,onLog:()=>yn,registerVersion:()=>sn,setLogLevel:()=>_i});var h=L(5861),G=L(4859),F=L(1877),ie=L(2090),he=L(8766);class Ee{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function se(et){const Te=et.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(tt)){const Pt=tt.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(tt=>tt).join(" ")}}const de="@firebase/app",q=new F.Yd("@firebase/app"),dt="[DEFAULT]",Ot={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ir=new Map,tn=new Map;function gr(et,Te){try{et.container.addComponent(Te)}catch(tt){q.debug(`Component ${Te.name} failed to register with FirebaseApp ${et.name}`,tt)}}function _n(et,Te){et.container.addOrOverwriteComponent(Te)}function mr(et){const Te=et.name;if(tn.has(Te))return q.debug(`There were multiple attempts to register component ${Te}.`),!1;tn.set(Te,et);for(const tt of ir.values())gr(tt,et);return!0}function ti(et,Te){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(Te)}function zn(et,Te,tt=dt){ti(et,Te).clearInstance(tt)}function Wr(){tn.clear()}const wn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ds{constructor(Te,tt,Pt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const Zr="9.14.0";function mi(et,Te={}){let tt=et;"object"!=typeof Te&&(Te={name:Te});const Pt=Object.assign({name:dt,automaticDataCollectionEnabled:!1},Te),Nt=Pt.name;if("string"!=typeof Nt||!Nt)throw wn.create("bad-app-name",{appName:String(Nt)});if(tt||(tt=(0,ie.aH)()),!tt)throw wn.create("no-options");const nn=ir.get(Nt);if(nn){if((0,ie.vZ)(tt,nn.options)&&(0,ie.vZ)(Pt,nn.config))return nn;throw wn.create("duplicate-app",{appName:Nt})}const W=new G.H0(Nt);for(const J of tn.values())W.addComponent(J);const z=new Ds(tt,Pt,W);return ir.set(Nt,z),z}function Fe(et=dt){const Te=ir.get(et);if(!Te&&et===dt)return mi();if(!Te)throw wn.create("no-app",{appName:et});return Te}function _r(){return Array.from(ir.values())}function _t(et){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(et){const Te=et.name;ir.has(Te)&&(ir.delete(Te),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function sn(et,Te,tt){var Pt;let Nt=null!==(Pt=Ot[et])&&void 0!==Pt?Pt:et;tt&&(Nt+=`-${tt}`);const nn=Nt.match(/\s|\//),W=Te.match(/\s|\//);if(nn||W){const z=[`Unable to register library "${Nt}" with version "${Te}":`];return nn&&z.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),nn&&W&&z.push("and"),W&&z.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void q.warn(z.join(" "))}mr(new G.wA(`${Nt}-version`,()=>({library:Nt,version:Te}),"VERSION"))}function yn(et,Te){if(null!==et&&"function"!=typeof et)throw wn.create("invalid-log-argument");(0,F.Am)(et,Te)}function _i(et){(0,F.Ub)(et)}const An="firebase-heartbeat-store";let Kr=null;function Mo(){return Kr||(Kr=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(et,Te)=>{0===Te&&et.createObjectStore(An)}}).catch(et=>{throw wn.create("idb-open",{originalErrorMessage:et.message})})),Kr}function yt(){return(yt=(0,h.Z)(function*(et){var Te;try{return(yield Mo()).transaction(An).objectStore(An).get(ri(et))}catch(tt){if(tt instanceof ie.ZR)q.warn(tt.message);else{const Pt=wn.create("idb-get",{originalErrorMessage:null===(Te=tt)||void 0===Te?void 0:Te.message});q.warn(Pt.message)}}})).apply(this,arguments)}function mt(et,Te){return ds.apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(et,Te){var tt;try{const Nt=(yield Mo()).transaction(An,"readwrite");return yield Nt.objectStore(An).put(Te,ri(et)),Nt.done}catch(Pt){if(Pt instanceof ie.ZR)q.warn(Pt.message);else{const Nt=wn.create("idb-set",{originalErrorMessage:null===(tt=Pt)||void 0===tt?void 0:tt.message});q.warn(Nt.message)}}})).apply(this,arguments)}function ri(et){return`${et.name}!${et.options.appId}`}class yr{constructor(Te){this.container=Te,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new vr(tt),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var Te=this;return(0,h.Z)(function*(){const Pt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=Cn();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Te._heartbeatsCache.heartbeats.some(nn=>nn.date===Nt))return Te._heartbeatsCache.heartbeats.push({date:Nt,agent:Pt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(nn=>{const W=new Date(nn.date).valueOf();return Date.now()-W<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,h.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const tt=Cn(),{heartbeatsToSend:Pt,unsentEntries:Nt}=function vt(et,Te=1024){const tt=[];let Pt=et.slice();for(const Nt of et){const nn=tt.find(W=>W.agent===Nt.agent);if(nn){if(nn.dates.push(Nt.date),Kt(tt)>Te){nn.dates.pop();break}}else if(tt.push({agent:Nt.agent,dates:[Nt.date]}),Kt(tt)>Te){tt.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:Pt}}(Te._heartbeatsCache.heartbeats),nn=(0,ie.L)(JSON.stringify({version:2,heartbeats:Pt}));return Te._heartbeatsCache.lastSentHeartbeatDate=tt,Nt.length>0?(Te._heartbeatsCache.heartbeats=Nt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),nn})()}}function Cn(){return(new Date).toISOString().substring(0,10)}class vr{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,h.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function Qt(et){return yt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var tt=this;return(0,h.Z)(function*(){var Pt;if(yield tt._canUseIndexedDBPromise){const nn=yield tt.read();return mt(tt.app,{lastSentHeartbeatDate:null!==(Pt=Te.lastSentHeartbeatDate)&&void 0!==Pt?Pt:nn.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var tt=this;return(0,h.Z)(function*(){var Pt;if(yield tt._canUseIndexedDBPromise){const nn=yield tt.read();return mt(tt.app,{lastSentHeartbeatDate:null!==(Pt=Te.lastSentHeartbeatDate)&&void 0!==Pt?Pt:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...Te.heartbeats]})}})()}}function Kt(et){return(0,ie.L)(JSON.stringify({version:2,heartbeats:et})).length}!function sr(et){mr(new G.wA("platform-logger",Te=>new Ee(Te),"PRIVATE")),mr(new G.wA("heartbeat",Te=>new yr(Te),"PRIVATE")),sn(de,"0.8.4",et),sn(de,"0.8.4","esm2017"),sn("fire-js","")}("")},4859:(st,be,L)=>{L.d(be,{wA:()=>F,H0:()=>de,zt:()=>he});var h=L(5861),G=L(2090);class F{constructor(q,Y,oe){this.name=q,this.instanceFactory=Y,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ie="[DEFAULT]";class he{constructor(q,Y){this.name=q,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const Y=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(Y)){const oe=new G.BH;if(this.instancesDeferred.set(Y,oe),this.isInitialized(Y)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:Y});Ze&&oe.resolve(Ze)}catch(Ze){}}return this.instancesDeferred.get(Y).promise}getImmediate(q){var Y;const oe=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),Ze=null!==(Y=null==q?void 0:q.optional)&&void 0!==Y&&Y;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Se){if(Ze)return null;throw Se}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function se(me){return"EAGER"===me.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(Y){}for(const[Y,oe]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(Y);try{const Se=this.getOrInitializeService({instanceIdentifier:Ze});oe.resolve(Se)}catch(Se){}}}}clearInstance(q=ie){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,h.Z)(function*(){const Y=Array.from(q.instances.values());yield Promise.all([...Y.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...Y.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ie){return this.instances.has(q)}getOptions(q=ie){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:Y={}}=q,oe=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:oe,options:Y});for(const[Se,Ve]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Se)&&Ve.resolve(Ze);return Ze}onInit(q,Y){var oe;const Ze=this.normalizeInstanceIdentifier(Y),Se=null!==(oe=this.onInitCallbacks.get(Ze))&&void 0!==oe?oe:new Set;Se.add(q),this.onInitCallbacks.set(Ze,Se);const Ve=this.instances.get(Ze);return Ve&&q(Ve,Ze),()=>{Se.delete(q)}}invokeOnInitCallbacks(q,Y){const oe=this.onInitCallbacks.get(Y);if(oe)for(const Ze of oe)try{Ze(q,Y)}catch(Se){}}getOrInitializeService({instanceIdentifier:q,options:Y={}}){let oe=this.instances.get(q);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(me=q,me===ie?void 0:me),options:Y}),this.instances.set(q,oe),this.instancesOptions.set(q,Y),this.invokeOnInitCallbacks(oe,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,oe)}catch(Ze){}var me;return oe||null}normalizeInstanceIdentifier(q=ie){return this.component?this.component.multipleInstances?q:ie:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const Y=this.getProvider(q.name);if(Y.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);Y.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const Y=new he(q,this);return this.providers.set(q,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(st,be,L)=>{L.d(be,{in:()=>G,Yd:()=>se,Ub:()=>de,Am:()=>me});const h=[];var G=(()=>{return(q=G||(G={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",G;var q})();const F={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ie=G.INFO,he={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Ee=(q,Y,...oe)=>{if(Y<q.logLevel)return;const Ze=(new Date).toISOString(),Se=he[Y];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Se](`[${Ze}]  ${q.name}:`,...oe)};class se{constructor(Y){this.name=Y,this._logLevel=ie,this._logHandler=Ee,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in G))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?F[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...Y),this._logHandler(this,G.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...Y),this._logHandler(this,G.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,G.INFO,...Y),this._logHandler(this,G.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,G.WARN,...Y),this._logHandler(this,G.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...Y),this._logHandler(this,G.ERROR,...Y)}}function de(q){h.forEach(Y=>{Y.setLogLevel(q)})}function me(q,Y){for(const oe of h){let Ze=null;Y&&Y.level&&(Ze=F[Y.level]),oe.userLogHandler=null===q?null:(Se,Ve,...He)=>{const _e=He.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Oe){return null}}).filter(ve=>ve).join(" ");Ve>=(null!=Ze?Ze:Se.logLevel)&&q({level:G[Ve].toLowerCase(),message:_e,args:He,type:Se.name})}}}},8766:(st,be,L)=>{L.d(be,{Lj:()=>Ue,X3:()=>ze});var h=L(5861);let F,ie;const se=new WeakMap,de=new WeakMap,me=new WeakMap,q=new WeakMap,Y=new WeakMap;let Se={get(Ce,K,re){if(Ce instanceof IDBTransaction){if("done"===K)return de.get(Ce);if("objectStoreNames"===K)return Ce.objectStoreNames||me.get(Ce);if("store"===K)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return ve(Ce[K])},set:(Ce,K,re)=>(Ce[K]=re,!0),has:(Ce,K)=>Ce instanceof IDBTransaction&&("done"===K||"store"===K)||K in Ce};function _e(Ce){return"function"==typeof Ce?function He(Ce){return Ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ce)?function(...K){return Ce.apply(Oe(this),K),ve(se.get(this))}:function(...K){return ve(Ce.apply(Oe(this),K))}:function(K,...re){const pe=Ce.call(Oe(this),K,...re);return me.set(pe,K.sort?K.sort():[K]),ve(pe)}}(Ce):(Ce instanceof IDBTransaction&&function Ze(Ce){if(de.has(Ce))return;const K=new Promise((re,pe)=>{const ye=()=>{Ce.removeEventListener("complete",Pe),Ce.removeEventListener("error",ce),Ce.removeEventListener("abort",ce)},Pe=()=>{re(),ye()},ce=()=>{pe(Ce.error||new DOMException("AbortError","AbortError")),ye()};Ce.addEventListener("complete",Pe),Ce.addEventListener("error",ce),Ce.addEventListener("abort",ce)});de.set(Ce,K)}(Ce),((Ce,K)=>K.some(re=>Ce instanceof re))(Ce,function he(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ce,Se):Ce)}function ve(Ce){if(Ce instanceof IDBRequest)return function oe(Ce){const K=new Promise((re,pe)=>{const ye=()=>{Ce.removeEventListener("success",Pe),Ce.removeEventListener("error",ce)},Pe=()=>{re(ve(Ce.result)),ye()},ce=()=>{pe(Ce.error),ye()};Ce.addEventListener("success",Pe),Ce.addEventListener("error",ce)});return K.then(re=>{re instanceof IDBCursor&&se.set(re,Ce)}).catch(()=>{}),Y.set(K,Ce),K}(Ce);if(q.has(Ce))return q.get(Ce);const K=_e(Ce);return K!==Ce&&(q.set(Ce,K),Y.set(K,Ce)),K}const Oe=Ce=>Y.get(Ce);function ze(Ce,K,{blocked:re,upgrade:pe,blocking:ye,terminated:Pe}={}){const ce=indexedDB.open(Ce,K),St=ve(ce);return pe&&ce.addEventListener("upgradeneeded",qt=>{pe(ve(ce.result),qt.oldVersion,qt.newVersion,ve(ce.transaction))}),re&&ce.addEventListener("blocked",()=>re()),St.then(qt=>{Pe&&qt.addEventListener("close",()=>Pe()),ye&&qt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),St}function Ue(Ce,{blocked:K}={}){const re=indexedDB.deleteDatabase(Ce);return K&&re.addEventListener("blocked",()=>K()),ve(re).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],ct=new Map;function Qe(Ce,K){if(!(Ce instanceof IDBDatabase)||K in Ce||"string"!=typeof K)return;if(ct.get(K))return ct.get(K);const re=K.replace(/FromIndex$/,""),pe=K!==re,ye=xe.includes(re);if(!(re in(pe?IDBIndex:IDBObjectStore).prototype)||!ye&&!ot.includes(re))return;const Pe=function(){var ce=(0,h.Z)(function*(St,...qt){const Ar=this.transaction(St,ye?"readwrite":"readonly");let dt=Ar.store;return pe&&(dt=dt.index(qt.shift())),(yield Promise.all([dt[re](...qt),ye&&Ar.done]))[0]});return function(qt){return ce.apply(this,arguments)}}();return ct.set(K,Pe),Pe}!function Ve(Ce){Se=Ce(Se)}(Ce=>YU(KU({},Ce),{get:(K,re,pe)=>Qe(K,re)||Ce.get(K,re,pe),has:(K,re)=>!!Qe(K,re)||Ce.has(K,re)}))},5861:(st,be,L)=>{function h(F,ie,he,Ee,se,de,me){try{var q=F[de](me),Y=q.value}catch(oe){return void he(oe)}q.done?ie(Y):Promise.resolve(Y).then(Ee,se)}function G(F){return function(){var ie=this,he=arguments;return new Promise(function(Ee,se){var de=F.apply(ie,he);function me(Y){h(de,Ee,se,me,q,"next",Y)}function q(Y){h(de,Ee,se,me,q,"throw",Y)}me(void 0)})}}L.d(be,{Z:()=>G})}},st=>{st(st.s=2831)}]);